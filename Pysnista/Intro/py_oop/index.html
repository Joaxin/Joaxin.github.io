<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Python Introduction - OOP | Pinsflora</title><meta name="keywords" content="Python,OOP"><meta name="author" content="Joaxin"><meta name="copyright" content="Joaxin"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="把一组数据结构和处理它们的方法组成对象(object)，把相同行为的对象归纳为类(class)，通过类的封装(encapsulation)隐藏内部细节，通过继承(inheritance)实现类的特化(specialization)和泛化(generalization)，通过多态(polymorphism)实现基于对象类型的动态分派。">
<meta property="og:type" content="article">
<meta property="og:title" content="Python Introduction - OOP">
<meta property="og:url" content="https://u.pinsflora.xyz/Pysnista/Intro/py_oop/index.html">
<meta property="og:site_name" content="Pinsflora">
<meta property="og:description" content="把一组数据结构和处理它们的方法组成对象(object)，把相同行为的对象归纳为类(class)，通过类的封装(encapsulation)隐藏内部细节，通过继承(inheritance)实现类的特化(specialization)和泛化(generalization)，通过多态(polymorphism)实现基于对象类型的动态分派。">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/joaxin/img_bed/img/cover_posts/py/python_intro_cover.png">
<meta property="article:published_time" content="2017-10-23T16:00:00.000Z">
<meta property="article:modified_time" content="2019-11-27T16:00:00.000Z">
<meta property="article:author" content="Joaxin">
<meta property="article:tag" content="Python">
<meta property="article:tag" content="OOP">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/joaxin/img_bed/img/cover_posts/py/python_intro_cover.png"><link rel="shortcut icon" href="/img/favicon-32x32.png"><link rel="canonical" href="https://u.pinsflora.xyz/Pysnista/Intro/py_oop/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><script async="async" src="https://www.googletagmanager.com/gtag/js?id=UA-177831205-1"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-177831205-1');
</script><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: {"limitDay":600,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'days',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"Traditional Chinese Activated Manually","cht_to_chs":"Simplified Chinese Activated Manually","day_to_night":"Dark Mode Activated Manually","night_to_day":"Light Mode Activated Manually","bgLight":"#49b1f5","bgDark":"#2d3035","position":"bottom-left"},
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2019-11-28 00:00:00'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const fontSizeVal = saveToLocal.get('global-font-size')
    if (fontSizeVal !== undefined) {
      document.documentElement.style.setProperty('--global-font-size', fontSizeVal + 'px')
    }
    })(window)</script><meta name="generator" content="Hexo 5.3.0"><link rel="alternate" href="/atom.xml" title="Pinsflora" type="application/atom+xml">
</head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="https://avatars2.githubusercontent.com/u/8346164?s=460&amp;v=4" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">340</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">Tags</div><div class="length-num">110</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">Categories</div><div class="length-num">34</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-list"></i><span> List</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/Galleries"><i class="fa-fw /gallery/"></i><span> 0</span></a></li><li><a class="site-page child" href="/Movie"><i class="fa-fw /movies/"></i><span> 1</span></a></li><li><a class="site-page child" href="/Games"><i class="fa-fw /games/"></i><span> 2</span></a></li><li><a class="site-page child" href="/Tools"><i class="fa-fw /tools/"></i><span> 3</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://cdn.jsdelivr.net/gh/joaxin/img_bed/img/cover_posts/py/python_intro_cover.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Pinsflora</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-list"></i><span> List</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/Galleries"><i class="fa-fw /gallery/"></i><span> 0</span></a></li><li><a class="site-page child" href="/Movie"><i class="fa-fw /movies/"></i><span> 1</span></a></li><li><a class="site-page child" href="/Games"><i class="fa-fw /games/"></i><span> 2</span></a></li><li><a class="site-page child" href="/Tools"><i class="fa-fw /tools/"></i><span> 3</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Python Introduction - OOP</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2017-10-23T16:00:00.000Z" title="Created 2017-10-24 00:00:00">2017-10-24</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2019-11-27T16:00:00.000Z" title="Updated 2019-11-28 00:00:00">2019-11-28</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Python/">Python</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Python/Introduction/">Introduction</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">Word count:</span><span class="word-count">5.3k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">Reading time:</span><span>26min</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Python Introduction - OOP"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post View:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>There are two paradigms of programming</p>
<ul>
<li>
<p>imperative (using statements, loops, and functions as subroutines)</p>
</li>
<li>
<p>functional (using pure functions, higher-order functions, and recursion)</p>
</li>
</ul>
<p>And another very popular paradigm is object-oriented programming (OOP), so let’s  explore it.</p>
<p>Throughout this tutorial, I’ll walk you through the creation of a basic python object-oriented programming.</p>
<p>It’ll consist of some parts:</p>
<ul>
<li>what is a class?</li>
<li>what is inheirance?</li>
<li>…</li>
</ul>
<p>面向对象相关知识</p>
<ul>
<li>
<p>三大支柱：封装、继承、多态</p>
<p>面向对象的设计原则：SOLID原则</p>
<p>面向对象的设计模式：GoF设计模式（单例、工厂、代理、策略、迭代器）</p>
<p>月薪结算系统 - 部门经理每月15000 程序员每小时200 销售员1800底薪加销售额5%提成</p>
<p>例子：工资结算系统。</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">月薪结算系统 - 部门经理每月15000 程序员每小时200 销售员1800底薪加销售额5%提成</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="keyword">from</span> abc <span class="keyword">import</span> ABCMeta, abstractmethod</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Employee</span>(<span class="params">metaclass=ABCMeta</span>):</span></span><br><span class="line">    <span class="string">"""员工(抽象类)"""</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, name</span>):</span></span><br><span class="line">        self.name = name</span><br><span class="line"></span><br><span class="line"><span class="meta">    @abstractmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_salary</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">"""结算月薪(抽象方法)"""</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Manager</span>(<span class="params">Employee</span>):</span></span><br><span class="line">    <span class="string">"""部门经理"""</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_salary</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">15000.0</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Programmer</span>(<span class="params">Employee</span>):</span></span><br><span class="line">    <span class="string">"""程序员"""</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, name, working_hour=<span class="number">0</span></span>):</span></span><br><span class="line">        self.working_hour = working_hour</span><br><span class="line">        super().__init__(name)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_salary</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">200.0</span> * self.working_hour</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Salesman</span>(<span class="params">Employee</span>):</span></span><br><span class="line">    <span class="string">"""销售员"""</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, name, sales=<span class="number">0.0</span></span>):</span></span><br><span class="line">        self.sales = sales</span><br><span class="line">        super().__init__(name)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_salary</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">1800.0</span> + self.sales * <span class="number">0.05</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">EmployeeFactory</span>():</span></span><br><span class="line">    <span class="string">"""创建员工的工厂（工厂模式 - 通过工厂实现对象使用者和对象之间的解耦合）"""</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">create</span>(<span class="params">emp_type, *args, **kwargs</span>):</span></span><br><span class="line">        <span class="string">"""创建员工"""</span></span><br><span class="line">        emp_type = emp_type.upper()</span><br><span class="line">        emp = <span class="literal">None</span></span><br><span class="line">        <span class="keyword">if</span> emp_type == <span class="string">'M'</span>:</span><br><span class="line">            emp = Manager(*args, **kwargs)</span><br><span class="line">        <span class="keyword">elif</span> emp_type == <span class="string">'P'</span>:</span><br><span class="line">            emp = Programmer(*args, **kwargs)</span><br><span class="line">        <span class="keyword">elif</span> emp_type == <span class="string">'S'</span>:</span><br><span class="line">            emp = Salesman(*args, **kwargs)</span><br><span class="line">        <span class="keyword">return</span> emp</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span>():</span></span><br><span class="line">    <span class="string">"""主函数"""</span></span><br><span class="line">    emps = [</span><br><span class="line">        EmployeeFactory.create(<span class="string">'M'</span>, <span class="string">'曹操'</span>), </span><br><span class="line">        EmployeeFactory.create(<span class="string">'P'</span>, <span class="string">'荀彧'</span>, <span class="number">120</span>),</span><br><span class="line">        EmployeeFactory.create(<span class="string">'P'</span>, <span class="string">'郭嘉'</span>, <span class="number">85</span>), </span><br><span class="line">        EmployeeFactory.create(<span class="string">'S'</span>, <span class="string">'典韦'</span>, <span class="number">123000</span>),</span><br><span class="line">    ]</span><br><span class="line">    <span class="keyword">for</span> emp <span class="keyword">in</span> emps:</span><br><span class="line">        print(<span class="string">'%s: %.2f元'</span> % (emp.name, emp.get_salary()))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></tbody></table></figure>
</li>
<li>
<p>类与类之间的关系</p>
<ul>
<li>is-a关系：继承</li>
<li>has-a关系：关联 / 聚合 / 合成</li>
<li>use-a关系：依赖</li>
</ul>
<p>例子：扑克游戏。</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">经验：符号常量总是优于字面常量，枚举类型是定义符号常量的最佳选择</span></span><br><span class="line"><span class="string">枚举 - 一个变量的值只有有限个选择，最适合的类型就是枚举</span></span><br><span class="line"><span class="string">通过枚举我们可以定义符号常量，符号常量优于字面常量</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="keyword">from</span> enum <span class="keyword">import</span> Enum, unique</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@unique</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Suite</span>(<span class="params">Enum</span>):</span></span><br><span class="line">    <span class="string">"""花色"""</span></span><br><span class="line"></span><br><span class="line">    SPADE, HEART, CLUB, DIAMOND = range(<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__lt__</span>(<span class="params">self, other</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self.value &lt; other.value</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Card</span>():</span></span><br><span class="line">    <span class="string">"""牌"""</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, suite, face</span>):</span></span><br><span class="line">        <span class="string">"""初始化方法"""</span></span><br><span class="line">        self.suite = suite</span><br><span class="line">        self.face = face</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">show</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">"""显示牌面"""</span></span><br><span class="line">        suites = [<span class="string">'♠️'</span>, <span class="string">'♥️'</span>, <span class="string">'♣️'</span>, <span class="string">'♦️'</span>]</span><br><span class="line">        faces = [<span class="string">''</span>, <span class="string">'A'</span>, <span class="string">'2'</span>, <span class="string">'3'</span>, <span class="string">'4'</span>, <span class="string">'5'</span>, <span class="string">'6'</span>, <span class="string">'7'</span>, <span class="string">'8'</span>, <span class="string">'9'</span>, <span class="string">'10'</span>, <span class="string">'J'</span>, <span class="string">'Q'</span>, <span class="string">'K'</span>]</span><br><span class="line">        <span class="keyword">return</span> <span class="string">f'<span class="subst">{suites[self.suite.value]}</span> <span class="subst">{faces[self.face]}</span>'</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self.show()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__repr__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self.show()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Poker</span>():</span></span><br><span class="line">    <span class="string">"""扑克"""</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self</span>):</span></span><br><span class="line">        self.index = <span class="number">0</span></span><br><span class="line">        self.cards = [Card(suite, face)</span><br><span class="line">                      <span class="keyword">for</span> suite <span class="keyword">in</span> Suite</span><br><span class="line">                      <span class="keyword">for</span> face <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">14</span>)]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">shuffle</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">"""洗牌（随机乱序）"""</span></span><br><span class="line">        random.shuffle(self.cards)</span><br><span class="line">        self.index = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">deal</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">"""发牌"""</span></span><br><span class="line">        card = self.cards[self.index]</span><br><span class="line">        self.index += <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> card</span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">has_more</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self.index &lt; len(self.cards)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Player</span>():</span></span><br><span class="line">    <span class="string">"""玩家"""</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, name</span>):</span></span><br><span class="line">        self.name = name</span><br><span class="line">        self.cards = []</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_one</span>(<span class="params">self, card</span>):</span></span><br><span class="line">        <span class="string">"""摸一张牌"""</span></span><br><span class="line">        self.cards.append(card)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sort</span>(<span class="params">self, comp=lambda card: (<span class="params">card.suite, card.face</span>)</span>):</span></span><br><span class="line">        <span class="string">"""整理手上的牌"""</span></span><br><span class="line">        self.cards.sort(key=comp)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span>():</span></span><br><span class="line">    <span class="string">"""主函数"""</span></span><br><span class="line">    poker = Poker()</span><br><span class="line">    poker.shuffle()</span><br><span class="line">    players = [Player(<span class="string">'东邪'</span>), Player(<span class="string">'西毒'</span>), Player(<span class="string">'南帝'</span>), Player(<span class="string">'北丐'</span>)]</span><br><span class="line">    <span class="keyword">while</span> poker.has_more:</span><br><span class="line">        <span class="keyword">for</span> player <span class="keyword">in</span> players:</span><br><span class="line">                player.get_one(poker.deal())</span><br><span class="line">    <span class="keyword">for</span> player <span class="keyword">in</span> players:</span><br><span class="line">        player.sort()</span><br><span class="line">        print(player.name, end=<span class="string">': '</span>)</span><br><span class="line">        print(player.cards)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> enum <span class="keyword">import</span> Enum, unique</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@unique</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Suite</span>(<span class="params">Enum</span>):</span></span><br><span class="line">    <span class="string">"""花色（枚举）"""</span></span><br><span class="line">    SPADE, HEART, CLUB, DIAMOND = range(<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__lt__</span>(<span class="params">self, other</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self.value &lt; other.value</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Card</span>():</span></span><br><span class="line">    <span class="string">"""牌"""</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, suite, face</span>):</span></span><br><span class="line">        self.suite = suite</span><br><span class="line">        self.face = face</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__repr__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self.__str__()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span>(<span class="params">self</span>):</span></span><br><span class="line">        suites = (<span class="string">'♠️'</span>, <span class="string">'♥️'</span>, <span class="string">'♣️'</span>, <span class="string">'♦️'</span>)</span><br><span class="line">        faces = (<span class="string">''</span>, <span class="string">'A'</span>, <span class="string">'2'</span>, <span class="string">'3'</span>, <span class="string">'4'</span>, <span class="string">'5'</span>, <span class="string">'6'</span>, </span><br><span class="line">                 <span class="string">'7'</span>, <span class="string">'8'</span>, <span class="string">'9'</span>, <span class="string">'10'</span>, <span class="string">'J'</span>, <span class="string">'Q'</span>, <span class="string">'K'</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="string">f'<span class="subst">{suites[self.suite.value]}</span> <span class="subst">{faces[self.face]}</span>'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Poker</span>():</span></span><br><span class="line">    <span class="string">"""扑克"""</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self</span>):</span></span><br><span class="line">        self.index = <span class="number">0</span></span><br><span class="line">        self.cards = [Card(suite, face)</span><br><span class="line">                      <span class="keyword">for</span> suite <span class="keyword">in</span> Suite</span><br><span class="line">                      <span class="keyword">for</span> face <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">14</span>)]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">shuffle</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">"""洗牌"""</span></span><br><span class="line">        self.index = <span class="number">0</span></span><br><span class="line">        random.shuffle(self.cards)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">deal</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">"""发牌"""</span></span><br><span class="line">        card = self.cards[self.index]</span><br><span class="line">        self.index += <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> card</span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">has_more</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">"""是否有更多的牌"""</span></span><br><span class="line">        <span class="keyword">return</span> self.index &lt; len(self.cards)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Player</span>():</span></span><br><span class="line">    <span class="string">"""玩家"""</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, name</span>):</span></span><br><span class="line">        self.name = name</span><br><span class="line">        self.cards = []</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_card</span>(<span class="params">self, card</span>):</span></span><br><span class="line">        <span class="string">"""摸牌"""</span></span><br><span class="line">        self.cards.append(card)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">arrange</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">"""整理手上的牌"""</span></span><br><span class="line">        self.cards.sort(key=<span class="keyword">lambda</span> card: (card.suite, card.face))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span>():</span></span><br><span class="line">    <span class="string">"""主函数"""</span></span><br><span class="line">    poker = Poker()</span><br><span class="line">    poker.shuffle()</span><br><span class="line">    players = [</span><br><span class="line">        Player(<span class="string">'东邪'</span>), Player(<span class="string">'西毒'</span>), </span><br><span class="line">        Player(<span class="string">'南帝'</span>), Player(<span class="string">'北丐'</span>)</span><br><span class="line">    ]</span><br><span class="line">    <span class="keyword">while</span> poker.has_more:</span><br><span class="line">        <span class="keyword">for</span> player <span class="keyword">in</span> players:</span><br><span class="line">            player.get_card(poker.deal())</span><br><span class="line">    <span class="keyword">for</span> player <span class="keyword">in</span> players:</span><br><span class="line">        player.arrange()</span><br><span class="line">        print(player.name, end=<span class="string">': '</span>)</span><br><span class="line">        print(player.cards)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></tbody></table></figure>
<blockquote>
<p>说明：上面的代码中使用了Emoji字符来表示扑克牌的四种花色，在某些不支持Emoji字符的系统上可能无法显示。</p>
</blockquote>
</li>
<li>
<p>对象的复制（深复制/深拷贝/深度克隆和浅复制/浅拷贝/影子克隆）</p>
</li>
</ul>
<p>垃圾回收、循环引用和弱引用</p>
<p>Python使用了自动化内存管理，这种管理机制以<strong>引用计数</strong>为基础，同时也引入了<strong>标记-清除</strong>和<strong>分代收集</strong>两种机制为辅的策略。</p>
 <figure class="highlight c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> struct_object {</span><br><span class="line">    <span class="comment">/* 引用计数 */</span></span><br><span class="line">    <span class="keyword">int</span> ob_refcnt;</span><br><span class="line">    <span class="comment">/* 对象指针 */</span></span><br><span class="line">    struct_typeobject *ob_type;</span><br><span class="line">} PyObject;</span><br></pre></td></tr></tbody></table></figure>
 <figure class="highlight c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 增加引用计数的宏定义 */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> Py_INCREF(op)   ((op)-&gt;ob_refcnt++)</span></span><br><span class="line"><span class="comment">/* 减少引用计数的宏定义 */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> Py_DECREF(op) \ <span class="comment">//减少计数</span></span></span><br><span class="line">    <span class="keyword">if</span> (--(op)-&gt;ob_refcnt != <span class="number">0</span>) \</span><br><span class="line">        ; \</span><br><span class="line">    <span class="keyword">else</span> \</span><br><span class="line">        __Py_Dealloc((PyObject *)(op))</span><br></pre></td></tr></tbody></table></figure>
<p>导致引用计数+1的情况：</p>
<ul>
<li>对象被创建，例如<code>a = 23</code></li>
<li>对象被引用，例如<code>b = a</code></li>
<li>对象被作为参数，传入到一个函数中，例如<code>f(a)</code></li>
<li>对象作为一个元素，存储在容器中，例如<code>list1 = [a, a]</code></li>
</ul>
<p>导致引用计数-1的情况：</p>
<ul>
<li>对象的别名被显式销毁，例如<code>del a</code></li>
<li>对象的别名被赋予新的对象，例如<code>a = 24</code></li>
<li>一个对象离开它的作用域，例如f函数执行完毕时，f函数中的局部变量（全局变量不会）</li>
<li>对象所在的容器被销毁，或从容器中删除对象</li>
</ul>
<p>引用计数可能会导致循环引用问题，而循环引用会导致内存泄露，如下面的代码所示。为了解决这个问题，Python中引入了“标记-清除”和“分代收集”。在创建一个对象的时候，对象被放在第一代中，如果在第一代的垃圾检查中对象存活了下来，该对象就会被放到第二代中，同理在第二代的垃圾检查中对象存活下来，该对象就会被放到第三代中。</p>
 <figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 循环引用会导致内存泄露 - Python除了引用技术还引入了标记清理和分代回收</span></span><br><span class="line"><span class="comment"># 在Python 3.6以前如果重写__del__魔术方法会导致循环引用处理失效</span></span><br><span class="line"><span class="comment"># 如果不想造成循环引用可以使用弱引用</span></span><br><span class="line">list1 = []</span><br><span class="line">list2 = [] </span><br><span class="line">list1.append(list2)</span><br><span class="line">list2.append(list1)</span><br></pre></td></tr></tbody></table></figure>
<p>以下情况会导致垃圾回收：</p>
<ul>
<li>调用<code>gc.collect()</code></li>
<li>gc模块的计数器达到阀值</li>
<li>程序退出</li>
</ul>
<p>如果循环引用中两个对象都定义了<code>__del__</code>方法，gc模块不会销毁这些不可达对象，因为gc模块不知道应该先调用哪个对象的<code>__del__</code>方法，这个问题在Python 3.6中得到了解决。</p>
<p>也可以通过<code>weakref</code>模块构造弱引用的方式来解决循环引用的问题。</p>
<ul>
<li>
<p>魔法属性和方法（请参考《Python魔法方法指南》）</p>
<p>有几个小问题请大家思考：</p>
<ul>
<li>自定义的对象能不能使用运算符做运算？</li>
<li>自定义的对象能不能放到set中？能去重吗？</li>
<li>自定义的对象能不能作为dict的键？</li>
<li>自定义的对象能不能使用上下文语法？</li>
</ul>
</li>
<li>
<p>混入（Mixin）</p>
<p>例子：自定义字典限制只有在指定的key不存在时才能在字典中设置键值对。</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SetOnceMappingMixin</span>:</span></span><br><span class="line">    <span class="string">"""自定义混入类"""</span></span><br><span class="line">    __slots__ = ()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__setitem__</span>(<span class="params">self, key, value</span>):</span></span><br><span class="line">        <span class="keyword">if</span> key <span class="keyword">in</span> self:</span><br><span class="line">            <span class="keyword">raise</span> KeyError(str(key) + <span class="string">' already set'</span>)</span><br><span class="line">        <span class="keyword">return</span> super().__setitem__(key, value)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SetOnceDict</span>(<span class="params">SetOnceMappingMixin, dict</span>):</span></span><br><span class="line">    <span class="string">"""自定义字典"""</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">my_dict= SetOnceDict()</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    my_dict[<span class="string">'username'</span>] = <span class="string">'jackfrued'</span></span><br><span class="line">    my_dict[<span class="string">'username'</span>] = <span class="string">'hellokitty'</span></span><br><span class="line"><span class="keyword">except</span> KeyError:</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line">print(my_dict)</span><br></pre></td></tr></tbody></table></figure>
</li>
<li>
<p>元编程和元类</p>
<p>例子：用元类实现单例模式。</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SingletonMeta</span>(<span class="params">type</span>):</span></span><br><span class="line">    <span class="string">"""自定义元类"""</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">cls, *args, **kwargs</span>):</span></span><br><span class="line">        cls.__instance = <span class="literal">None</span></span><br><span class="line">        cls.__lock = threading.Lock()</span><br><span class="line">        super().__init__(*args, **kwargs)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__call__</span>(<span class="params">cls, *args, **kwargs</span>):</span></span><br><span class="line">        <span class="keyword">if</span> cls.__instance <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">with</span> cls.__lock:</span><br><span class="line">                <span class="keyword">if</span> cls.__instance <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">                    cls.__instance = super().__call__(*args, **kwargs)</span><br><span class="line">        <span class="keyword">return</span> cls.__instance</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">President</span>(<span class="params">metaclass=SingletonMeta</span>):</span></span><br><span class="line">    <span class="string">"""总统(单例类)"""</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, name, country</span>):</span></span><br><span class="line">        self.name = name</span><br><span class="line">        self.country = country</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">f'<span class="subst">{self.country}</span>: <span class="subst">{self.name}</span>'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">p1 = President(<span class="string">'特朗普'</span>, <span class="string">'美国'</span>)</span><br><span class="line">p2 = President(<span class="string">'奥巴马'</span>, <span class="string">'美国'</span>)</span><br><span class="line">p3 = President.__call__(<span class="string">'克林顿'</span>, <span class="string">'美国'</span>)</span><br><span class="line">print(p1 == p2)</span><br><span class="line">print(p1 == p3)</span><br><span class="line">print(p1, p2, p3, sep=<span class="string">'\n'</span>)</span><br></pre></td></tr></tbody></table></figure>
</li>
<li>
<p>面向对象设计原则</p>
<ul>
<li>单一职责原则 （<strong>S</strong>RP）- 一个类只做该做的事情（类的设计要高内聚）</li>
<li>开闭原则 （<strong>O</strong>CP）- 软件实体应该对扩展开发对修改关闭</li>
<li>依赖倒转原则（DIP）- 面向抽象编程（在弱类型语言中已经被弱化）</li>
<li>里氏替换原则（<strong>L</strong>SP） - 任何时候可以用子类对象替换掉父类对象</li>
<li>接口隔离原则（<strong>I</strong>SP）- 接口要小而专不要大而全（Python中没有接口的概念）</li>
<li>合成聚合复用原则（CARP） - 优先使用强关联关系而不是继承关系复用代码</li>
<li>最少知识原则（迪米特法则，Lo<strong>D</strong>）- 不要给没有必然联系的对象发消息</li>
</ul>
<blockquote>
<p>说明：上面加粗的字母放在一起称为面向对象的<strong>SOLID</strong>原则。</p>
</blockquote>
</li>
<li>
<p>GoF设计模式</p>
<ul>
<li>创建型模式：单例、工厂、建造者、原型</li>
<li>结构型模式：适配器、门面（外观）、代理</li>
<li>行为型模式：迭代器、观察者、状态、策略</li>
</ul>
<p>例子：可插拔的哈希算法。</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StreamHasher</span>():</span></span><br><span class="line">    <span class="string">"""哈希摘要生成器(策略模式)"""</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, alg=<span class="string">'md5'</span>, size=<span class="number">4096</span></span>):</span></span><br><span class="line">        self.size = size</span><br><span class="line">        alg = alg.lower()</span><br><span class="line">        self.hasher = getattr(__import__(<span class="string">'hashlib'</span>), alg.lower())()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__call__</span>(<span class="params">self, stream</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self.to_digest(stream)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">to_digest</span>(<span class="params">self, stream</span>):</span></span><br><span class="line">        <span class="string">"""生成十六进制形式的摘要"""</span></span><br><span class="line">        <span class="keyword">for</span> buf <span class="keyword">in</span> iter(<span class="keyword">lambda</span>: stream.read(self.size), <span class="string">b''</span>):</span><br><span class="line">            self.hasher.update(buf)</span><br><span class="line">        <span class="keyword">return</span> self.hasher.hexdigest()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span>():</span></span><br><span class="line">    <span class="string">"""主函数"""</span></span><br><span class="line">    hasher1 = StreamHasher()</span><br><span class="line">    <span class="keyword">with</span> open(<span class="string">'Python-3.7.1.tgz'</span>, <span class="string">'rb'</span>) <span class="keyword">as</span> stream:</span><br><span class="line">        print(hasher1.to_digest(stream))</span><br><span class="line">    hasher2 = StreamHasher(<span class="string">'sha1'</span>)</span><br><span class="line">    <span class="keyword">with</span> open(<span class="string">'Python-3.7.1.tgz'</span>, <span class="string">'rb'</span>) <span class="keyword">as</span> stream:</span><br><span class="line">        print(hasher2(stream))</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
</li>
</ul>
<h2 id="classes"><a class="markdownIt-Anchor" href="#classes"></a> Classes</h2>
<p>Objects are created using <code>classes</code>, which are actually the focal point of <code>OOP</code>.<br>
The class describes what the object will be, but is separate from the object itself. In other words, a class can be described as an object’s blueprint, description, or definition.</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    This Code defines a class named Animal,which has three attrbutes:name,color and weight</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    Count1 = <span class="number">0</span></span><br><span class="line">    __Count2 = <span class="number">0</span></span><br><span class="line">    <span class="comment">## Class attributes are shared by all instances of the class.</span></span><br><span class="line">    <span class="comment">## These can be accessed either from instances of the class, or the class itself.</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, name, color, weight</span>):</span></span><br><span class="line">        self.name = name</span><br><span class="line">        self.color = color</span><br><span class="line">        self._weight = weight  <span class="comment">## private weight self.__</span></span><br><span class="line">        Animal.Count1 += <span class="number">1</span></span><br><span class="line">        Animal.__Count2 += <span class="number">1</span>	   <span class="comment">## private Count</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">## The __init__ method is the most important method in a class.</span></span><br><span class="line">    <span class="comment">## This is called when an instance (object) of the class is created, using the class name as a function.</span></span><br><span class="line">    <span class="comment">## The __init__ method is called the class constructor.</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">showAnimal</span>(<span class="params">self</span>):</span></span><br><span class="line">        print(<span class="string">"Total animals："</span>, self.__count2, <span class="string">"\nName : "</span>, self.name, <span class="string">"\nColor: "</span>, self.color,</span><br><span class="line">              <span class="string">"\nWeight: "</span>, self._weight, <span class="string">"kilograms."</span>)</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">cat1 = Animal(<span class="string">"Mr.MidNight"</span>, <span class="string">"black"</span>, <span class="number">2.0</span>)</span><br><span class="line">cat2 = Animal(<span class="string">"Garfield"</span>, <span class="string">"orange"</span>, <span class="number">5.0</span>)</span><br><span class="line">cat1.showAnimal()</span><br><span class="line">cat2.showAnimal()</span><br><span class="line"><span class="comment"># Name :  Mr.MidNight </span></span><br><span class="line"><span class="comment"># Color:  black </span></span><br><span class="line"><span class="comment"># Weight:  2.0 kilograms.</span></span><br><span class="line"><span class="comment"># Name :  Garfield </span></span><br><span class="line"><span class="comment"># Color:  orange </span></span><br><span class="line"><span class="comment"># Weight:  5.0 kilograms.</span></span><br><span class="line"></span><br><span class="line">cat1.name</span><br><span class="line"><span class="comment"># Mr.MidNight</span></span><br><span class="line"><span class="comment"># cat1.weight</span></span><br><span class="line"><span class="comment">## 'Animal' object has no attribute 'weight'</span></span><br><span class="line">cat1._weight</span><br><span class="line"><span class="comment"># 2.0</span></span><br><span class="line">Animal.Count1</span><br><span class="line"><span class="comment"># 2</span></span><br><span class="line">cat1._Animal__Count2</span><br><span class="line"><span class="comment"># 2</span></span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">print(hasattr(cat1, <span class="string">'color'</span>), getattr(cat1, <span class="string">'name'</span>, <span class="string">"None"</span>))</span><br><span class="line"><span class="comment">## return none if attr not exists</span></span><br><span class="line"><span class="comment"># True Mr.MidNight</span></span><br><span class="line">setattr(cat1, <span class="string">'weight'</span>, <span class="number">4.0</span>)</span><br><span class="line">cat1.showAnimal()</span><br><span class="line"><span class="comment"># Name :  Mr.MidNight </span></span><br><span class="line"><span class="comment"># Color:  black </span></span><br><span class="line"><span class="comment"># Weight:  2.0 kilograms.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## add/modify attrs</span></span><br><span class="line">setattr(cat1, <span class="string">'_weight'</span>, <span class="number">4.0</span>) <span class="comment">#== cat1._weight = "4.0"</span></span><br><span class="line">cat1.showAnimal()</span><br><span class="line"><span class="comment"># Name :  Mr.MidNight </span></span><br><span class="line"><span class="comment"># Color:  black </span></span><br><span class="line"><span class="comment"># Weight:  4.0 kilograms.</span></span><br><span class="line">setattr(cat1, <span class="string">'_Animal__Count2'</span>, <span class="number">17</span>)</span><br><span class="line">cat1._Animal__Count2</span><br><span class="line"><span class="comment"># 17</span></span><br><span class="line"></span><br><span class="line">cat = getattr(cat1, <span class="string">'showAnimal'</span>) <span class="comment"># 获取属性'power'</span></span><br><span class="line">print(cat)</span><br><span class="line"><span class="comment"># &lt;bound method Animal.showAnimal of &lt;__main__.Animal object at 0x000000000531FC48&gt;&gt;</span></span><br><span class="line">cat()</span><br><span class="line"><span class="comment"># Name :  Mr.MidNight </span></span><br><span class="line"><span class="comment"># Color:  black </span></span><br><span class="line"><span class="comment"># Weight:  2.0 kilograms.</span></span><br><span class="line"></span><br><span class="line">delattr(cat1, <span class="string">'color'</span>)</span><br><span class="line"><span class="comment"># cat1.showAnimal()</span></span><br><span class="line"><span class="comment"># AttributeError: 'Animal' object has no attribute 'color'</span></span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Animal</span><br><span class="line"><span class="comment"># __main__.Animal</span></span><br><span class="line">cat1</span><br><span class="line"><span class="comment"># &lt;__main__.Animal at 0x5459320&gt;</span></span><br><span class="line"><span class="keyword">print</span> (<span class="string">"Animal.__doc__:"</span>, Animal.__doc__)</span><br><span class="line"><span class="keyword">print</span> (<span class="string">"Animal.__name__:"</span>, Animal.__name__)</span><br><span class="line"><span class="keyword">print</span> (<span class="string">"Animal.__module__:"</span>, Animal.__module__)</span><br><span class="line"><span class="keyword">print</span> (<span class="string">"Animal.__bases__:"</span>, Animal.__bases__)</span><br><span class="line"><span class="keyword">print</span> (<span class="string">"Animal.__dict__:"</span>, Animal.__dict__)</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Animal.__doc__: </span><br><span class="line">    This Code defines a class named Animal,which has three attrbutes:name,color and weight</span><br><span class="line">    </span><br><span class="line">Animal.__name__: Animal</span><br><span class="line">Animal.__module__: __main__</span><br><span class="line">Animal.__bases__: (&lt;class 'object'&gt;,)</span><br><span class="line">Animal.__dict__: {'__module__': '__main__', '__doc__': '\n    This Code defines a class named Animal,which has three attrbutes:name,color and weight\n    ', 'Count1': 2, '_Animal__Count2': 2, '__init__': &lt;function Animal.__init__ at 0x00000000052753A8&gt;, 'showAnimal': &lt;function Animal.showAnimal at 0x0000000005275438&gt;, '__dict__': &lt;attribute '__dict__' of 'Animal' objects&gt;, '__weakref__': &lt;attribute '__weakref__' of 'Animal' objects&gt;}</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyError</span>(<span class="params">Exception</span>):</span></span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, value</span>):</span></span><br><span class="line">            self.__value = value</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">__str__</span>(<span class="params">self</span>):</span></span><br><span class="line">            <span class="keyword">return</span> repr(self.__value)</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">raise</span> MyError(<span class="string">"2"</span> + <span class="number">2</span>)</span><br><span class="line"><span class="keyword">except</span> MyError <span class="keyword">as</span> e:</span><br><span class="line">    print(<span class="string">'My exception occurred, value:'</span>, e._MyError__value)</span><br><span class="line">    <span class="keyword">raise</span></span><br><span class="line"><span class="keyword">except</span> TypeError <span class="keyword">as</span> err:</span><br><span class="line">    print(<span class="string">r"ERROR!!!"</span>, err)</span><br><span class="line"><span class="comment"># ERROR!!! can only concatenate str (not "int") to str</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">raise</span> MyError(<span class="string">"2"</span> * <span class="number">2</span>)</span><br><span class="line"><span class="keyword">except</span> MyError <span class="keyword">as</span> e:</span><br><span class="line">    print(<span class="string">'My exception occurred, value:'</span>, e._MyError__value)</span><br><span class="line">    <span class="keyword">raise</span></span><br><span class="line"><span class="keyword">except</span> TypeError <span class="keyword">as</span> err:</span><br><span class="line">    print(<span class="string">r"ERROR!!!"</span>, err)</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">My exception occurred, value: 22</span><br><span class="line">---------------------------------------------------------------------------</span><br><span class="line">MyError                                   Traceback (most recent call last)</span><br><span class="line">&lt;ipython-input-37-0e4488420dbd&gt; in &lt;module&gt;</span><br><span class="line">     16 </span><br><span class="line">     17 try:</span><br><span class="line">---&gt; 18     raise MyError("2" * 2)</span><br><span class="line">     19 except MyError as e:</span><br><span class="line">     20     print('My exception occurred, value:', e._MyError__value)</span><br><span class="line"></span><br><span class="line">MyError: '22'</span><br></pre></td></tr></tbody></table></figure>
<h2 id="setter-getter"><a class="markdownIt-Anchor" href="#setter-getter"></a> Setter &amp; Getter</h2>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, name, weight</span>):</span></span><br><span class="line">        self._name = name  <span class="comment">## read only</span></span><br><span class="line">        self._weight = weight</span><br><span class="line">    </span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">name</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self.name</span><br><span class="line">    </span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">weight</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self._weight</span><br><span class="line"></span><br><span class="line"><span class="meta">    @property </span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">kweight</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self._weight/<span class="number">1000</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @weight.setter</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">weight</span>(<span class="params">self, weight</span>):</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> isinstance(weight, int):</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">'weight must be an integer!'</span>)</span><br><span class="line">        <span class="keyword">elif</span> <span class="number">0</span> &lt;= weight &lt;= <span class="number">100</span>:</span><br><span class="line">            self._weight = weight</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"%s's weight is %s now ."</span> % (self._name, self.weight)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">'Too Fat'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">lynx = Animal(<span class="string">"Lorissa"</span>, <span class="string">"85"</span>)</span><br><span class="line"><span class="comment"># lynx.name = "Jonathan" </span></span><br><span class="line"><span class="comment">## AttributeError: can't set attribute</span></span><br><span class="line"><span class="comment"># lynx.weight = 5000</span></span><br><span class="line"><span class="comment">## ValueError: Too Fat</span></span><br><span class="line">lynx.weight = <span class="number">50</span></span><br><span class="line">print(lynx.kweight)</span><br><span class="line"><span class="comment"># 0.05</span></span><br></pre></td></tr></tbody></table></figure>
<h2 id="slots"><a class="markdownIt-Anchor" href="#slots"></a> Slots</h2>
<p>That is to avoiding dynamically created attributes 😻</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span>():</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">dog = Dog()</span><br><span class="line">dog.weight = <span class="number">8</span></span><br><span class="line">dog.size = <span class="string">"big"</span>  <span class="comment">## dynamically created attribute</span></span><br><span class="line">print(<span class="string">'dog.size ='</span>, dog.size)</span><br><span class="line"><span class="comment"># dog.size = big</span></span><br><span class="line">print(dog.__dict__)</span><br><span class="line"><span class="comment"># {'weight': 8, 'size': 'big'}</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span>():</span></span><br><span class="line">    __slots__ = (<span class="string">'name'</span>, <span class="string">'color'</span>,<span class="string">'_weight'</span>)</span><br><span class="line">bird = Animal() </span><br><span class="line">bird.name = <span class="string">'cuckoo'</span> </span><br><span class="line">bird.color = <span class="string">"cornsilk"</span></span><br><span class="line">bird._weight = <span class="number">0.5</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    bird.house = <span class="string">"tree"</span></span><br><span class="line"><span class="keyword">except</span> AttributeError <span class="keyword">as</span> e:</span><br><span class="line">    print(<span class="string">'AttributeError:'</span>, e)</span><br><span class="line">    </span><br><span class="line"><span class="comment"># AttributeError: 'Animal' object has no attribute 'house'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># print(bird.__dict__)</span></span><br><span class="line"><span class="comment">## AttributeError: 'Animal' object has no attribute '__dict__'</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<h2 id="inheritance"><a class="markdownIt-Anchor" href="#inheritance"></a> Inheritance</h2>
<p>Inheritance provides a way to share functionality between classes.</p>
<p>A class that inherits from another class is called a <code>subclass</code>.<br>
A class that is inherited from is called a <code>superclass</code>.<br>
If a class inherits from another with the same attributes or methods, it overrides them.</p>
<blockquote>
<p>is-a、has-a、use-a</p>
</blockquote>
<h3 id="inheritance-2"><a class="markdownIt-Anchor" href="#inheritance-2"></a> Inheritance</h3>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">多重继承 - 一个类有两个或者两个以上的父类</span></span><br><span class="line"><span class="string">MRO - 方法解析顺序 - Method Resolution Order</span></span><br><span class="line"><span class="string">当出现菱形继承（钻石继承）的时候，子类到底继承哪个父类的方法</span></span><br><span class="line"><span class="string">Python 2.x - 深度优先搜索</span></span><br><span class="line"><span class="string">Python 3.x - C3算法 - 类似于广度优先搜索</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>():</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">say_hello</span>(<span class="params">self</span>):</span></span><br><span class="line">        print(<span class="string">'Hello, A'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span>(<span class="params">A</span>):</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span>(<span class="params">A</span>):</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">say_hello</span>(<span class="params">self</span>):</span></span><br><span class="line">        print(<span class="string">'Hello, C'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">D</span>(<span class="params">B, C</span>):</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SetOnceMappingMixin</span>():</span></span><br><span class="line">    <span class="string">"""自定义混入类"""</span></span><br><span class="line">    __slots__ = ()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__setitem__</span>(<span class="params">self, key, value</span>):</span></span><br><span class="line">        <span class="keyword">if</span> key <span class="keyword">in</span> self:</span><br><span class="line">            <span class="keyword">raise</span> KeyError(str(key) + <span class="string">' already set'</span>)</span><br><span class="line">        <span class="keyword">return</span> super().__setitem__(key, value)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SetOnceDict</span>(<span class="params">SetOnceMappingMixin, dict</span>):</span></span><br><span class="line">    <span class="string">"""自定义字典"""</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span>():</span></span><br><span class="line">    print(D.mro())</span><br><span class="line">    <span class="comment"># print(D.__mro__)</span></span><br><span class="line">    D().say_hello()</span><br><span class="line">    print(SetOnceDict.__mro__)</span><br><span class="line">    my_dict= SetOnceDict()</span><br><span class="line">    my_dict[<span class="string">'username'</span>] = <span class="string">'jackfrued'</span></span><br><span class="line">    my_dict[<span class="string">'username'</span>] = <span class="string">'hellokitty'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main()</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<p><strong>Class Animal</strong></p>
<p>Imagine several classes, Cat, Dog, Rabbit and so on.<br>
Although they may differ in some ways (only Dog might have the method bark), they are likely to be similar in others (all having the attributes color and name). This similarity can be expressed by making them all inherit from a superclass Animal.</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span>:</span></span><br><span class="line">    weight = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, name, color</span>):</span></span><br><span class="line">        self.name = name</span><br><span class="line">        self.color = color</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sayhi</span>(<span class="params">self</span>):</span></span><br><span class="line">        print(<span class="string">"Hi,I'm a pretty %s"</span> % self.name)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getweight</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">if</span> Animal.weight &gt;= <span class="number">200</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">'Big Animal'</span></span><br><span class="line">        <span class="keyword">elif</span> Animal.weight &gt;= <span class="number">50</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">'Medium Animal'</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">'Small Animal'</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">setweight</span>(<span class="params">self, weight</span>):</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> isinstance(weight, int):</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">'weight must be an integer!'</span>)</span><br><span class="line">        <span class="keyword">elif</span> <span class="number">0</span> &lt;= weight &lt;= <span class="number">1000</span>:</span><br><span class="line">            Animal.weight = weight</span><br><span class="line">            print(<span class="string">'My new weight is '</span>, Animal.weight)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">'Too Fat.'</span>)</span><br><span class="line">````</span><br><span class="line">**Animal Subclasses**</span><br><span class="line"></span><br><span class="line">```python</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Wolf</span>(<span class="params">Animal</span>):</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">bark</span>(<span class="params">self</span>):</span></span><br><span class="line">        print(<span class="string">"Woof..."</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span>(<span class="params">Wolf</span>):</span>  </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">bark</span>(<span class="params">self</span>):</span>  <span class="comment">## override wolf bark()</span></span><br><span class="line">        print(<span class="string">"Bowwow!"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">original</span>(<span class="params">self</span>):</span></span><br><span class="line">        super().bark()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span>(<span class="params">Animal</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self</span>):</span></span><br><span class="line">        print(<span class="string">"Cat"</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">purrr</span>(<span class="params">self</span>):</span></span><br><span class="line">        print(<span class="string">"Purrr..."</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">meow</span>(<span class="params">self</span>):</span></span><br><span class="line">        print(<span class="string">"Meow..."</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Pig</span>(<span class="params">Animal</span>):</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">oink</span>(<span class="params">self</span>):</span></span><br><span class="line">        print(<span class="string">"Oink!"</span>)</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">## somepig from Charlotte's Web</span></span><br><span class="line">pig = Pig(<span class="string">"somepig"</span>, <span class="string">"pink"</span>)</span><br><span class="line">print(pig.color)</span><br><span class="line"><span class="comment"># pink</span></span><br><span class="line">pig.oink()</span><br><span class="line"><span class="comment"># Oink!</span></span><br></pre></td></tr></tbody></table></figure>
<h3 id="override-superclass"><a class="markdownIt-Anchor" href="#override-superclass"></a> <strong>Override &amp; Superclass</strong></h3>
<p>If a class inherits from another with the same attributes or methods, it overrides(方法的覆盖或重写） them.</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">big_husky = Dog(<span class="string">"luna"</span>, <span class="string">"grey"</span>)</span><br><span class="line"><span class="comment"># Dog</span></span><br><span class="line">big_husky.name</span><br><span class="line"><span class="comment"># luna</span></span><br><span class="line">big_husky.bark()</span><br><span class="line"><span class="comment"># Bowwow!</span></span><br><span class="line">big_husky.original()</span><br><span class="line"><span class="comment"># Woof...</span></span><br><span class="line"></span><br><span class="line">issubclass(Dog, Wolf)</span><br><span class="line"><span class="comment"># True</span></span><br><span class="line">isinstance(Dog,Animal)</span><br><span class="line"><span class="comment"># True</span></span><br><span class="line"></span><br><span class="line">big_husky.original()</span><br><span class="line"><span class="comment"># Woof...</span></span><br><span class="line">big_husky.sayhi()</span><br><span class="line"><span class="comment"># Hi,I'm a pretty luna</span></span><br><span class="line">big_husky.setweight(<span class="number">200</span>)</span><br><span class="line"><span class="comment"># My new weight is 200</span></span><br><span class="line">big_husky.getweight()</span><br><span class="line"><span class="comment"># Big Animal</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Without name &amp; color</span></span><br><span class="line">Kitty=Cat()</span><br><span class="line"><span class="comment"># Cat</span></span><br><span class="line">Kitty.purrr()</span><br><span class="line"><span class="comment"># Purrr...</span></span><br><span class="line">Kitty.setweight(<span class="number">50</span>)</span><br><span class="line"><span class="comment"># My new weight is  50</span></span><br><span class="line">Kitty.getweight()</span><br><span class="line"><span class="comment"># 'Medium Animal'</span></span><br></pre></td></tr></tbody></table></figure>
<h3 id="polymorphism"><a class="markdownIt-Anchor" href="#polymorphism"></a> Polymorphism</h3>
<blockquote>
<p>The fancy word for the ability of multiple object types to implement the same functionality is <strong>polymorphism</strong>.</p>
</blockquote>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span>():</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span>(<span class="params">self</span>):</span></span><br><span class="line">        print(<span class="string">'Animal is running...'</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Wolf</span>(<span class="params">Animal</span>):</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span>(<span class="params">self</span>):</span></span><br><span class="line">        print(<span class="string">'Dog is running...'</span>)</span><br><span class="line">        </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span>(<span class="params">Wolf</span>):</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span>(<span class="params">self</span>):</span></span><br><span class="line">        print(<span class="string">'Cat is running...'</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">run</span>(<span class="params">animal</span>):</span></span><br><span class="line">    animal.run()</span><br><span class="line">    </span><br><span class="line">a = Animal()</span><br><span class="line">w = Wolf()</span><br><span class="line">d = Dog()</span><br><span class="line">run(d)</span><br><span class="line"><span class="comment"># Cat is running...</span></span><br></pre></td></tr></tbody></table></figure>
<h2 id="magic-methods"><a class="markdownIt-Anchor" href="#magic-methods"></a> Magic methods</h2>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>(<span class="params">object</span>):</span></span><br><span class="line">    <span class="string">"""人"""</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, name, age</span>):</span></span><br><span class="line">        self.name = name</span><br><span class="line">        self.age = age</span><br><span class="line"></span><br><span class="line">    <span class="comment"># def __gt__(self, other):</span></span><br><span class="line">    <span class="comment">#     return self.name &gt; other.name</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">f'<span class="subst">{self.name}</span>: <span class="subst">{self.age}</span>'</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__repr__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self.__str__()</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">魔术方法</span></span><br><span class="line"><span class="string">如果要把自定义对象放到set或者用作dict的键</span></span><br><span class="line"><span class="string">那么必须要重写__hash__和__eq__两个魔术方法</span></span><br><span class="line"><span class="string">前者用来计算对象的哈希码，后者用来判断两个对象是否相同</span></span><br><span class="line"><span class="string">哈希码不同的对象一定是不同的对象，但哈希码相同未必是相同的对象（哈希码冲撞）</span></span><br><span class="line"><span class="string">所以在哈希码相同的时候还要通过__eq__来判定对象是否相同</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>():</span></span><br><span class="line">    __slots__ = (<span class="string">'stuid'</span>, <span class="string">'name'</span>, <span class="string">'gender'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, stuid, name</span>):</span></span><br><span class="line">        self.stuid = stuid</span><br><span class="line">        self.name = name</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__hash__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> hash(self.stuid) + hash(self.name)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__eq__</span>(<span class="params">self, other</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self.stuid == other.stuid <span class="keyword">and</span> \</span><br><span class="line">            self.name == other.name</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">f'<span class="subst">{self.stuid}</span>: <span class="subst">{self.name}</span>'</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__repr__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self.__str__()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">School</span>():</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, name</span>):</span></span><br><span class="line">        self.name = name</span><br><span class="line">        self.students = {}</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__setitem__</span>(<span class="params">self, key, student</span>):</span></span><br><span class="line">        self.students[key] = student</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getitem__</span>(<span class="params">self, key</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self.students[key]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span>():</span></span><br><span class="line">    <span class="comment"># students = set()</span></span><br><span class="line">    <span class="comment"># students.add(Student(1001, '王大锤'))</span></span><br><span class="line">    <span class="comment"># students.add(Student(1001, '王大锤'))</span></span><br><span class="line">    <span class="comment"># students.add(Student(1001, '白元芳'))</span></span><br><span class="line">    <span class="comment"># print(len(students))</span></span><br><span class="line">    <span class="comment"># print(students)</span></span><br><span class="line">    stu = Student(<span class="number">1234</span>, <span class="string">'骆昊'</span>)</span><br><span class="line">    stu.gender = <span class="string">'Male'</span></span><br><span class="line">    <span class="comment"># stu.birth = '1980-11-28'</span></span><br><span class="line">    print(stu.name, stu.birth)</span><br><span class="line">    school = School(<span class="string">'千锋教育'</span>)</span><br><span class="line">    school[<span class="number">1001</span>] = Student(<span class="number">1001</span>, <span class="string">'王大锤'</span>)</span><br><span class="line">    school[<span class="number">1002</span>] = Student(<span class="number">1002</span>, <span class="string">'白元芳'</span>)</span><br><span class="line">    school[<span class="number">1003</span>] = Student(<span class="number">1003</span>, <span class="string">'白洁'</span>)</span><br><span class="line">    print(school[<span class="number">1002</span>])</span><br><span class="line">    print(school[<span class="number">1003</span>])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main()</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<p><code>Magic methods</code> are special methods which have double underscores at the beginning and end of their names.</p>
<p>They are also known as dunders.<br>
One common use of them is operator overloading.</p>
<p>This means defining operators for custom classes that allow operators such as + and * to be used on them.</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'ABC'</span>.__len__()</span><br><span class="line"><span class="comment"># 3</span></span><br></pre></td></tr></tbody></table></figure>
<table>
<thead>
<tr>
<th>Methods</th>
<th style="text-align:center">Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>_<em>sub</em>_</td>
<td style="text-align:center">-</td>
</tr>
<tr>
<td>_<em>mul</em>_</td>
<td style="text-align:center">*</td>
</tr>
<tr>
<td>_<em>truediv</em>_</td>
<td style="text-align:center">/</td>
</tr>
<tr>
<td>_<em>floordiv</em>_</td>
<td style="text-align:center">//</td>
</tr>
<tr>
<td>_<em>mod</em>_</td>
<td style="text-align:center">%</td>
</tr>
<tr>
<td>_<em>pow</em>_</td>
<td style="text-align:center">**</td>
</tr>
<tr>
<td>_<em>and</em>_</td>
<td style="text-align:center">&amp;</td>
</tr>
<tr>
<td>_<em>xor</em>_</td>
<td style="text-align:center">^</td>
</tr>
<tr>
<td>_<em>or</em>_</td>
<td style="text-align:center">|</td>
</tr>
<tr>
<td>_<em>lt</em>_</td>
<td style="text-align:center">&lt;</td>
</tr>
<tr>
<td>_<em>le</em>_</td>
<td style="text-align:center">&lt;=</td>
</tr>
<tr>
<td>_<em>eq</em>_</td>
<td style="text-align:center">==</td>
</tr>
<tr>
<td>_<em>ne</em>_</td>
<td style="text-align:center">!=</td>
</tr>
<tr>
<td>_<em>gt</em>_</td>
<td style="text-align:center">&gt;</td>
</tr>
<tr>
<td>_<em>ge</em>_</td>
<td style="text-align:center">&gt;=</td>
</tr>
<tr>
<td>_<em>len</em>_</td>
<td style="text-align:center">len()</td>
</tr>
<tr>
<td>_<em>getitem</em>_</td>
<td style="text-align:center">indexing</td>
</tr>
<tr>
<td>_<em>setitem</em>_</td>
<td style="text-align:center">assigning to indexed values</td>
</tr>
<tr>
<td>_<em>delitem</em>_</td>
<td style="text-align:center">deleting indexed values</td>
</tr>
<tr>
<td>_<em>iter</em>_</td>
<td style="text-align:center">iteration over objects (e.g., in loops)</td>
</tr>
<tr>
<td>_<em>contains</em>_</td>
<td style="text-align:center">in</td>
</tr>
</tbody>
</table>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">VagueList</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, cont</span>):</span></span><br><span class="line">        self.cont = cont</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getitem__</span>(<span class="params">self, index</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self.cont[index + random.randint(<span class="number">-1</span>, <span class="number">1</span>)]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__len__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> random.randint(<span class="number">0</span>, len(self.cont) * <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__repr__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"VagueList({})"</span>.format(self.cont)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__call__</span>(<span class="params">self</span>):</span></span><br><span class="line">        print(<span class="string">'VagueList %s.'</span> % self.cont)</span><br><span class="line">    <span class="comment"># del ' VagueList' object is not callable</span></span><br><span class="line"></span><br><span class="line">vague_list = VagueList([<span class="string">"A"</span>, <span class="string">"B"</span>, <span class="string">"C"</span>, <span class="string">"D"</span>, <span class="string">"E"</span>])</span><br><span class="line">vague_list()</span><br><span class="line"><span class="comment"># VagueList(['A', 'B', 'C', 'D', 'E'])</span></span><br><span class="line">print(vague_list)</span><br><span class="line"><span class="comment"># VagueList(['A', 'B', 'C', 'D', 'E'])</span></span><br><span class="line">print(len(vague_list)) <span class="comment">## # 0-10</span></span><br><span class="line"><span class="comment"># 7</span></span><br><span class="line">print(vague_list[<span class="number">2</span>]) <span class="comment">## # B-D</span></span><br><span class="line"><span class="comment"># D</span></span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Vector</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, a = <span class="number">0</span>, b = <span class="number">0</span></span>):</span></span><br><span class="line">        self.a = a</span><br><span class="line">        self.b = b</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'Vector(%d, %d)'</span> % (self.a, self.b)</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__add__</span>(<span class="params">self, other</span>):</span></span><br><span class="line">        <span class="keyword">return</span> Vector(self.a + other.a, self.b + other.b)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__sub__</span>(<span class="params">self, other</span>):</span></span><br><span class="line">        <span class="keyword">return</span> Vector(self.a - other.a, self.b - other.b)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__del__</span>(<span class="params">self</span>):</span></span><br><span class="line">        class_name = self.__class__.__name__</span><br><span class="line">        print(class_name, <span class="string">"("</span>, self.a, <span class="string">", "</span>, self.b, <span class="string">") Destoryed!"</span>, sep = <span class="string">""</span>)</span><br><span class="line"></span><br><span class="line">v1 = Vector(<span class="number">2</span>, <span class="number">10</span>)</span><br><span class="line">v2 = Vector(<span class="number">5</span>, <span class="number">-2</span>)</span><br><span class="line">v3 = Vector(<span class="number">9</span>, <span class="number">-1</span>)</span><br><span class="line">print(v1 + v2 - v3)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>Vector(2, 10) Destoryed!
Vector(5, -2) Destoryed!
Vector(9, -1) Destoryed!
Vector(7, 8) Destoryed!
Vector(-2, 9)
Vector(-2, 9) Destoryed!
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SpecialString</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, cont</span>):</span></span><br><span class="line">        self.cont = cont</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__truediv__</span>(<span class="params">self, other</span>):</span></span><br><span class="line">        line = <span class="string">"="</span> * len(other.cont)</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"\n"</span>.join([self.cont, line, other.cont])</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__gt__</span>(<span class="params">self, other</span>):</span></span><br><span class="line">        <span class="keyword">for</span> index <span class="keyword">in</span> range(len(other.cont)+<span class="number">1</span>):</span><br><span class="line">            res = other.cont[:index] + <span class="string">"&gt;"</span> + self.cont</span><br><span class="line">            res += <span class="string">"&gt;"</span> + other.cont[index:]</span><br><span class="line">            print(res)</span><br><span class="line">h1 = SpecialString(<span class="string">"Hello"</span>)</span><br><span class="line">h2 = SpecialString(<span class="string">"World!"</span>)</span><br><span class="line">print(h1 / h2)</span><br><span class="line"><span class="comment"># Hello</span></span><br><span class="line"><span class="comment"># ======</span></span><br><span class="line"><span class="comment"># World!</span></span><br><span class="line">h1 &gt; h2</span><br><span class="line"><span class="comment"># &gt;Hello&gt;World!</span></span><br><span class="line"><span class="comment"># W&gt;Hello&gt;orld!</span></span><br><span class="line"><span class="comment"># Wo&gt;Hello&gt;rld!</span></span><br><span class="line"><span class="comment"># Wor&gt;Hello&gt;ld!</span></span><br><span class="line"><span class="comment"># Worl&gt;Hello&gt;d!</span></span><br><span class="line"><span class="comment"># World&gt;Hello&gt;!</span></span><br><span class="line"><span class="comment"># World!&gt;Hello&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<h2 id="types-type"><a class="markdownIt-Anchor" href="#types-type"></a> Types &amp; Type</h2>
<h3 id="types"><a class="markdownIt-Anchor" href="#types"></a> Types</h3>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> types</span><br><span class="line">type(<span class="string">'abc'</span>) == str</span><br><span class="line">type(abs) == types.BuiltinFunctionType</span><br><span class="line">type(<span class="keyword">lambda</span> x: x) == types.LambdaType</span><br><span class="line">type((x <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">10</span>))) == types.GeneratorType</span><br><span class="line"></span><br><span class="line">print(<span class="string">'a is Animal?'</span>, isinstance(a, Animal)) <span class="comment">## True</span></span><br><span class="line">print(<span class="string">'a is Dog?'</span>, isinstance(a, Dog))	<span class="comment">## False</span></span><br><span class="line">print(<span class="string">'a is Wolf?'</span>, isinstance(a, Wolf))	<span class="comment">## False</span></span><br><span class="line"></span><br><span class="line">print(<span class="string">'d is Animal?'</span>, isinstance(d, Animal))	<span class="comment">## True</span></span><br><span class="line">print(<span class="string">'d is Dog?'</span>, isinstance(d, Dog))		<span class="comment">## True</span></span><br><span class="line">print(<span class="string">'d is Wolf?'</span>, isinstance(d, Wolf))		<span class="comment">## True</span></span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">cat</span>():</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">type(cat)</span><br><span class="line"><span class="comment"># type</span></span><br><span class="line">type(cat())</span><br><span class="line"><span class="comment"># __main__.catprint(type(int))</span></span><br><span class="line">kitty = cat()</span><br><span class="line">type(kitty)</span><br><span class="line"><span class="comment"># __main__.cat</span></span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hi</span>(<span class="params">self, name = <span class="string">'rabbit1'</span></span>):</span></span><br><span class="line">    print(<span class="string">'Hello, my name is %s.'</span> % name)</span><br><span class="line"></span><br><span class="line">attrs = {<span class="string">"strengths"</span> :[<span class="string">"Polite"</span>, <span class="string">"Cautious"</span>, <span class="string">"Responsible"</span>], <span class="string">"Weaknesses"</span>:[<span class="string">"Hesitant"</span>, <span class="string">"Timid"</span>, <span class="string">"Foolhardy"</span>]}</span><br><span class="line"></span><br><span class="line">rabbit = type(<span class="string">'Rabbit'</span>, (), dict(attrs, hello = hi))</span><br><span class="line"><span class="comment">#== rabbit = type('Rabbit', (object,), dict(attrs, hello = hi))</span></span><br><span class="line"></span><br><span class="line">Bugs_Bunny = rabbit()</span><br><span class="line">print(type(Bugs_Bunny))</span><br><span class="line"><span class="comment"># &lt;class '__main__.Rabbit'&gt;</span></span><br><span class="line">print(type(rabbit))</span><br><span class="line"><span class="comment"># &lt;class 'type'&gt;</span></span><br><span class="line">Bugs_Bunny.hello(<span class="string">"Bugs Bunny"</span>)</span><br><span class="line"><span class="comment"># Hello, my name is Bugs Bunny.</span></span><br><span class="line">Bugs_Bunny.Weaknesses</span><br><span class="line"><span class="comment"># ['Hesitant', 'Timid', 'Foolhardy']</span></span><br></pre></td></tr></tbody></table></figure>
<h3 id="methodtype"><a class="markdownIt-Anchor" href="#methodtype"></a> <strong>MethodType</strong></h3>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> types <span class="keyword">import</span> MethodType</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span>(<span class="params">object</span>):</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">cat = Animal()</span><br><span class="line">cat.name = <span class="string">'Lucas'</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">set_name</span>(<span class="params">self, name</span>):</span></span><br><span class="line">    self.name = name</span><br><span class="line"></span><br><span class="line">Animal.set_name = MethodType(set_name, Animal)</span><br><span class="line">cat.set_name(<span class="string">"Tom"</span>)</span><br><span class="line"></span><br><span class="line">print(cat.name)</span><br><span class="line">print(Animal.name)</span><br><span class="line"><span class="comment"># Lucas</span></span><br><span class="line"><span class="comment"># Tom</span></span><br></pre></td></tr></tbody></table></figure>
<h2 id="class-static-methods"><a class="markdownIt-Anchor" href="#class-static-methods"></a> Class &amp; Static Methods</h2>
<p><strong>Static Methods</strong></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> math <span class="keyword">import</span> sqrt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Triangle</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, a, b, c</span>):</span></span><br><span class="line">        self._a = a</span><br><span class="line">        self._b = b</span><br><span class="line">        self._c = c</span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">is_valid</span>(<span class="params">a, b, c</span>):</span></span><br><span class="line">        <span class="keyword">return</span> a + b &gt; c <span class="keyword">and</span> b + c &gt; a <span class="keyword">and</span> a + c &gt; b</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">perimeter</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self._a + self._b + self._c</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">area</span>(<span class="params">self</span>):</span></span><br><span class="line">        half = self.perimeter() / <span class="number">2</span></span><br><span class="line">        <span class="keyword">return</span> sqrt(half * (half - self._a) *</span><br><span class="line">                    (half - self._b) * (half - self._c))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">a, b, c = <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> Triangle.is_valid(a, b, c):</span><br><span class="line">    t = Triangle(a, b, c)</span><br><span class="line">    print(t.perimeter())</span><br><span class="line">    <span class="comment"># print(Triangle.perimeter(t))</span></span><br><span class="line">    print(t.area())</span><br><span class="line">    <span class="comment"># print(Triangle.area(t))</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">'Invalid Triangle.'</span>)</span><br></pre></td></tr></tbody></table></figure>
<p><strong>Pizza</strong></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Pizza</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, toppings=None</span>):</span></span><br><span class="line">        self.toppings = toppings</span><br><span class="line">        self._pineapple_allowed = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">pineapple_allowed</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self._pineapple_allowed</span><br><span class="line"></span><br><span class="line"><span class="meta">    @pineapple_allowed.setter</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">pineapple_allowed</span>(<span class="params">self, value</span>):</span></span><br><span class="line">        <span class="keyword">if</span> value:</span><br><span class="line">            password = input(<span class="string">"Enter the password: "</span>)</span><br><span class="line">        <span class="keyword">if</span> password == <span class="string">"pizza!"</span>:</span><br><span class="line">            self._pineapple_allowed = value</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">"Alert! Intruder!"</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod  ## No cls self</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">validate_topping</span>(<span class="params">topping</span>):</span></span><br><span class="line">        <span class="keyword">if</span> topping == <span class="string">"bacon"</span>:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">"No bacon!"</span>)</span><br><span class="line">        <span class="keyword">elif</span> topping == <span class="string">"chicken breast"</span>:</span><br><span class="line">            print(<span class="string">"Congratulations! You got the last chicken breast"</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @classmethod  ## cls needed</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">validate_topping2</span>(<span class="params">cls, topping</span>):</span></span><br><span class="line">        <span class="keyword">if</span> topping == <span class="string">"pineapple"</span>:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">"No pineapples!"</span>)</span><br><span class="line">        <span class="keyword">elif</span> topping == <span class="string">"chicken breast"</span>:</span><br><span class="line">            print(<span class="string">"Congratulations! You got the first chicken breast"</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ingredients = [<span class="string">"cheese"</span>, <span class="string">"onions"</span>, <span class="string">"spam"</span>, <span class="string">"eggs"</span>,<span class="string">"chicken breast"</span>]</span><br><span class="line">pizza = Pizza(ingredients)</span><br><span class="line">all(Pizza.validate_topping(i) <span class="keyword">for</span> i <span class="keyword">in</span> ingredients)</span><br><span class="line"><span class="comment"># Congratulations! you got the last chicken breast</span></span><br><span class="line"><span class="comment"># True</span></span><br><span class="line">all(Pizza.validate_topping2(i) <span class="keyword">for</span> i <span class="keyword">in</span> ingredients)</span><br><span class="line"><span class="comment"># Congratulations! You got the first chicken breast</span></span><br><span class="line"><span class="comment"># True</span></span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pizza.pineapple_allowed = <span class="literal">True</span></span><br><span class="line"><span class="comment">## Enter the password:  pizza</span></span><br><span class="line"><span class="comment"># ValueError: Alert! Intruder!</span></span><br></pre></td></tr></tbody></table></figure>
<h2 id="metaclass"><a class="markdownIt-Anchor" href="#metaclass"></a> MetaClass</h2>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ListMetaclass</span>(<span class="params">type</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__new__</span>(<span class="params">cls, name, bases, attrs</span>):</span></span><br><span class="line">        attrs[<span class="string">'add'</span>] = <span class="keyword">lambda</span> self, value: self.append(value)</span><br><span class="line">        <span class="keyword">return</span> type.__new__(cls, name, bases, attrs)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyList</span>(<span class="params">list, metaclass=ListMetaclass</span>):</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line">L = MyList()</span><br><span class="line">L.add(<span class="number">1</span>)</span><br><span class="line">print(L)</span><br><span class="line"><span class="comment"># [1]</span></span><br></pre></td></tr></tbody></table></figure>
<h2 id="例子"><a class="markdownIt-Anchor" href="#例子"></a> 例子</h2>
<p>假设小偷有一个背包，最多能装20公斤赃物，他闯入一户人家，发现如下表所示的物品。很显然，他不能把所有物品都装进背包，所以必须确定拿走哪些物品，留下哪些物品。</p>
<table>
<thead>
<tr>
<th style="text-align:center">名称</th>
<th style="text-align:center">价格（美元）</th>
<th style="text-align:center">重量（kg）</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">电脑</td>
<td style="text-align:center">200</td>
<td style="text-align:center">20</td>
</tr>
<tr>
<td style="text-align:center">收音机</td>
<td style="text-align:center">20</td>
<td style="text-align:center">4</td>
</tr>
<tr>
<td style="text-align:center">钟</td>
<td style="text-align:center">175</td>
<td style="text-align:center">10</td>
</tr>
<tr>
<td style="text-align:center">花瓶</td>
<td style="text-align:center">50</td>
<td style="text-align:center">2</td>
</tr>
<tr>
<td style="text-align:center">书</td>
<td style="text-align:center">10</td>
<td style="text-align:center">1</td>
</tr>
<tr>
<td style="text-align:center">油画</td>
<td style="text-align:center">90</td>
<td style="text-align:center">9</td>
</tr>
</tbody>
</table>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">贪婪法：在对问题求解时，总是做出在当前看来是最好的选择，不追求最优解，快速找到满意解。</span></span><br><span class="line"><span class="string">输入：</span></span><br><span class="line"><span class="string">20 6</span></span><br><span class="line"><span class="string">电脑 200 20</span></span><br><span class="line"><span class="string">收音机 20 4</span></span><br><span class="line"><span class="string">钟 175 10</span></span><br><span class="line"><span class="string">花瓶 50 2</span></span><br><span class="line"><span class="string">书 10 1</span></span><br><span class="line"><span class="string">油画 90 9</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Thing</span>(<span class="params">object</span>):</span></span><br><span class="line">    <span class="string">"""物品"""</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, name, price, weight</span>):</span></span><br><span class="line">        self.name = name</span><br><span class="line">        self.price = price</span><br><span class="line">        self.weight = weight</span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">value</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">"""价格重量比"""</span></span><br><span class="line">        <span class="keyword">return</span> self.price / self.weight</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">input_thing</span>():</span></span><br><span class="line">    <span class="string">"""输入物品信息"""</span></span><br><span class="line">    name_str, price_str, weight_str = input().split()</span><br><span class="line">    <span class="keyword">return</span> name_str, int(price_str), int(weight_str)</span><br><span class="line"></span><br><span class="line">max_weight, num_of_things = map(int, input().split())</span><br><span class="line">all_things = []</span><br><span class="line"><span class="keyword">for</span> _ <span class="keyword">in</span> range(num_of_things):</span><br><span class="line">    all_things.append(Thing(*input_thing()))</span><br><span class="line">all_things.sort(key=<span class="keyword">lambda</span> x: x.value, reverse=<span class="literal">True</span>)</span><br><span class="line">total_weight = <span class="number">0</span></span><br><span class="line">total_price = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> thing <span class="keyword">in</span> all_things:</span><br><span class="line">    <span class="keyword">if</span> total_weight + thing.weight &lt;= max_weight:</span><br><span class="line">        print(<span class="string">f'小偷拿走了<span class="subst">{thing.name}</span>'</span>)</span><br><span class="line">        total_weight += thing.weight</span><br><span class="line">        total_price += thing.price</span><br><span class="line">print(<span class="string">f'总价值: <span class="subst">{total_price}</span>美元'</span>)</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">20 6</span><br><span class="line">电脑 200 20</span><br><span class="line">收音机 20 4</span><br><span class="line">钟 175 10</span><br><span class="line">花瓶 50 2</span><br><span class="line">书 10 1</span><br><span class="line">油画 90 9</span><br><span class="line">小偷拿走了花瓶</span><br><span class="line">小偷拿走了钟</span><br><span class="line">小偷拿走了书</span><br><span class="line">小偷拿走了收音机</span><br><span class="line">总价值: 255美元</span><br></pre></td></tr></tbody></table></figure>
<h2 id="references"><a class="markdownIt-Anchor" href="#references"></a> REFERENCES</h2>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.python-course.eu/">https://www.python-course.eu/</a></li>
<li><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/06c960020322">https://www.jianshu.com/p/06c960020322</a></li>
</ul>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">Joaxin</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://u.pinsflora.xyz/Pysnista/Intro/py_oop/">https://u.pinsflora.xyz/Pysnista/Intro/py_oop/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Python/">Python</a><a class="post-meta__tags" href="/tags/OOP/">OOP</a></div><div class="post_share"><div class="addtoany"><div class="a2a_kit a2a_kit_size_32 a2a_default_style"><a class="a2a_button_facebook"></a><a class="a2a_button_twitter"></a><a class="a2a_button_wechat"></a><a class="a2a_button_sina_weibo"></a><a class="a2a_button_facebook_messenger"></a><a class="a2a_button_email"></a><a class="a2a_button_copy_link"></a><a class="a2a_dd" target="_blank" rel="noopener" href="https://www.addtoany.com/share"></a></div></div><script async="async" src="https://static.addtoany.com/menu/page.js"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/Pysnista/Algor/Basic/coding_%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95_sort/"><img class="prev-cover" src="https://cdn.jsdelivr.net/gh/joaxin/img_bed/img/cover/cover_books2.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">排序算法</div></div></a></div><div class="next-post pull-right"><a href="/Pysnista/Intro/py_exceptions/"><img class="next-cover" src="https://cdn.jsdelivr.net/gh/joaxin/img_bed/img/cover_posts/py/python_intro_cover.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">Python Introduction - Exceptions</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span> Related Articles</span></div><div class="relatedPosts-list"><div><a href="/Pysnista/Algor/Leetcode_Distance/" title="Leetcode - hamming"><img class="cover" src="https://cdn.jsdelivr.net/gh/joaxin/img_bed/img/cover/cover_red_dim_flower.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2019-11-28</div><div class="title">Leetcode - hamming</div></div></a></div><div><a href="/Pysnista/Algor/Leetcode_Ranges/" title="Leetcode - Ranges"><img class="cover" src="https://cdn.jsdelivr.net/gh/joaxin/img_bed/img/cover/cover_forests.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2019-11-28</div><div class="title">Leetcode - Ranges</div></div></a></div><div><a href="/Pysnista/Algor/Leetcode_Reverse/" title="Leetcode - Reverse"><img class="cover" src="https://cdn.jsdelivr.net/gh/joaxin/img_bed/img/cover/cover_grass_in_the_snow.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2019-11-28</div><div class="title">Leetcode - Reverse</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> Comment</span></div></div><div class="comment-wrap"><div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" src="https://avatars2.githubusercontent.com/u/8346164?s=460&amp;v=4" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">Joaxin</div><div class="author-info__description">When I close my eyes, I'm in my own ♡cean 🐟aves.</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">340</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">Tags</div><div class="length-num">110</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">Categories</div><div class="length-num">34</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/joaxin"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/joaxin" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:lotility@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="fas fa-rss"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>Announcement</span></div><div class="announcement_content">感謝訪問本站，若喜歡請收藏 ^_^</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Catalog</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#classes"><span class="toc-number">1.</span> <span class="toc-text"> Classes</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#setter-getter"><span class="toc-number">2.</span> <span class="toc-text"> Setter &amp; Getter</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#slots"><span class="toc-number">3.</span> <span class="toc-text"> Slots</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#inheritance"><span class="toc-number">4.</span> <span class="toc-text"> Inheritance</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#inheritance-2"><span class="toc-number">4.1.</span> <span class="toc-text"> Inheritance</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#override-superclass"><span class="toc-number">4.2.</span> <span class="toc-text"> Override &amp; Superclass</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#polymorphism"><span class="toc-number">4.3.</span> <span class="toc-text"> Polymorphism</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#magic-methods"><span class="toc-number">5.</span> <span class="toc-text"> Magic methods</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#types-type"><span class="toc-number">6.</span> <span class="toc-text"> Types &amp; Type</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#types"><span class="toc-number">6.1.</span> <span class="toc-text"> Types</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#methodtype"><span class="toc-number">6.2.</span> <span class="toc-text"> MethodType</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#class-static-methods"><span class="toc-number">7.</span> <span class="toc-text"> Class &amp; Static Methods</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#metaclass"><span class="toc-number">8.</span> <span class="toc-text"> MetaClass</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BE%8B%E5%AD%90"><span class="toc-number">9.</span> <span class="toc-text"> 例子</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#references"><span class="toc-number">10.</span> <span class="toc-text"> REFERENCES</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/Lang/es/duo_es/" title="No title"><img src="https://cdn.jsdelivr.net/gh/joaxin/img_bed/img/cover/cover_seeds.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="No title"/></a><div class="content"><a class="title" href="/Lang/es/duo_es/" title="No title">No title</a><time datetime="2020-06-29T03:44:49.224Z" title="Created 2020-06-29 11:44:49">2020-06-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/Lang/kl/duo_kl001_intro/" title="Klingon- Vol.1 - Introduction"><img src="https://cdn.jsdelivr.net/gh/joaxin/img_bed/img/cover/cover_little_girl_phone.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Klingon- Vol.1 - Introduction"/></a><div class="content"><a class="title" href="/Lang/kl/duo_kl001_intro/" title="Klingon- Vol.1 - Introduction">Klingon- Vol.1 - Introduction</a><time datetime="2020-06-26T16:00:00.000Z" title="Created 2020-06-27 00:00:00">2020-06-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/Life/apps/life_apps_android_list/" title="安卓 | 装机必备清单及习惯步骤"><img src="https://i.postimg.cc/KYPmhV8w/android-new-logo.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="安卓 | 装机必备清单及习惯步骤"/></a><div class="content"><a class="title" href="/Life/apps/life_apps_android_list/" title="安卓 | 装机必备清单及习惯步骤">安卓 | 装机必备清单及习惯步骤</a><time datetime="2020-06-20T04:29:10.462Z" title="Created 2020-06-20 12:29:10">2020-06-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/Pysnista/Intro/files/py_pillow/" title="Python - 操作图像"><img src="https://cdn.jsdelivr.net/gh/joaxin/img_bed/img/cover/cover_little_girl_phone.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Python - 操作图像"/></a><div class="content"><a class="title" href="/Pysnista/Intro/files/py_pillow/" title="Python - 操作图像">Python - 操作图像</a><time datetime="2020-05-02T16:00:00.000Z" title="Created 2020-05-03 00:00:00">2020-05-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/Pysnista/Intro/files/py_files_pdf_word/" title="Python - PDF &amp; Word"><img src="https://i.loli.net/2020/07/09/6ALoRXnITgcuvy2.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Python - PDF &amp; Word"/></a><div class="content"><a class="title" href="/Pysnista/Intro/files/py_files_pdf_word/" title="Python - PDF &amp; Word">Python - PDF &amp; Word</a><time datetime="2020-04-12T16:00:00.000Z" title="Created 2020-04-13 00:00:00">2020-04-13</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://cdn.jsdelivr.net/gh/joaxin/img_bed/img/cover_posts/py/python_intro_cover.png')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By Joaxin</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Refine, the Life</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="font-plus" type="button" title="Increase font size"><i class="fas fa-plus"></i></button><button id="font-minus" type="button" title="Decrease font size"><i class="fas fa-minus"></i></button><button id="translateLink" type="button" title="Switch Between Traditional Chinese And Simplified Chinese">繁</button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="chat_btn" type="button" title="rightside.chat_btn"><i class="fas fa-sms"></i></button><a id="to_comment" href="#post-comment" title="Scroll To Comments"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">Local search</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>if (document.getElementsByClassName('mermaid').length) {
  if (window.mermaidJsLoad) mermaid.init()
  else {
    getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(() => {
      window.mermaidJsLoad = true
      mermaid.initialize({
        theme: 'default',
      })
      false && mermaid.init()
    })
  }
}</script></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="fasle"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script>(function(i,s,o,g,r,a,m){i["DaoVoiceObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;a.charset="utf-8";m.parentNode.insertBefore(a,m)})(window,document,"script",('https:' == document.location.protocol ? 'https:' : 'http:') + "//widget.daovoice.io/widget/fae45343.js","daovoice")
</script><script>var isChatBtn = true
daovoice('init', {
  app_id: 'fae45343',},{
  launcher: { 
     disableLauncherIcon: isChatBtn // 悬浮 ICON 是否显示
  },
});
daovoice('update');

if (isChatBtn) {
  var chatBtnFn = () => {
    var chatBtn = document.getElementById("chat_btn")
    chatBtn.addEventListener("click", function(){
      daovoice('show')
    });
  }
  chatBtnFn()
} else {
  if (true) {
    function chatBtnHide () {
      daovoice('update', {},{
        launcher: { 
        disableLauncherIcon: true // 悬浮 ICON 是否显示
        },
      });
    }
    function chatBtnShow () {
      daovoice('update', {},{
        launcher: { 
        disableLauncherIcon: false // 悬浮 ICON 是否显示
        },
      });
    }
  }
}</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>