<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Django Introduction Part 5 - Templates | Pinsflora</title><meta name="keywords" content="Django"><meta name="author" content="Joaxin"><meta name="copyright" content="Joaxin"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Overview After we defined our models and created some initial movie records to work with, it’s time to write the code that presents that information to users. The first thing we need to do is determi">
<meta property="og:type" content="article">
<meta property="og:title" content="Django Introduction Part 5 - Templates">
<meta property="og:url" content="https://u.pinsflora.xyz/Pysnista/Django/dj_intro5_templates/index.html">
<meta property="og:site_name" content="Pinsflora">
<meta property="og:description" content="Overview After we defined our models and created some initial movie records to work with, it’s time to write the code that presents that information to users. The first thing we need to do is determi">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/joaxin/img_bed/img/cover/cover_erol-ahmed-unsplash.jpg">
<meta property="article:published_time" content="2018-01-23T16:00:00.000Z">
<meta property="article:modified_time" content="2020-08-04T16:00:00.000Z">
<meta property="article:author" content="Joaxin">
<meta property="article:tag" content="Django">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/joaxin/img_bed/img/cover/cover_erol-ahmed-unsplash.jpg"><link rel="shortcut icon" href="/img/favicon-32x32.png"><link rel="canonical" href="https://u.pinsflora.xyz/Pysnista/Django/dj_intro5_templates/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><script async="async" src="https://www.googletagmanager.com/gtag/js?id=UA-177831205-1"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-177831205-1');
</script><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: {"limitDay":600,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'days',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"Traditional Chinese Activated Manually","cht_to_chs":"Simplified Chinese Activated Manually","day_to_night":"Dark Mode Activated Manually","night_to_day":"Light Mode Activated Manually","bgLight":"#49b1f5","bgDark":"#2d3035","position":"bottom-left"},
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2020-08-05 00:00:00'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const fontSizeVal = saveToLocal.get('global-font-size')
    if (fontSizeVal !== undefined) {
      document.documentElement.style.setProperty('--global-font-size', fontSizeVal + 'px')
    }
    })(window)</script><meta name="generator" content="Hexo 5.3.0"><link rel="alternate" href="/atom.xml" title="Pinsflora" type="application/atom+xml">
</head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="https://avatars2.githubusercontent.com/u/8346164?s=460&amp;v=4" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">340</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">Tags</div><div class="length-num">110</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">Categories</div><div class="length-num">34</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-list"></i><span> List</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/Galleries"><i class="fa-fw /gallery/"></i><span> 0</span></a></li><li><a class="site-page child" href="/Movie"><i class="fa-fw /movies/"></i><span> 1</span></a></li><li><a class="site-page child" href="/Games"><i class="fa-fw /games/"></i><span> 2</span></a></li><li><a class="site-page child" href="/Tools"><i class="fa-fw /tools/"></i><span> 3</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://cdn.jsdelivr.net/gh/joaxin/img_bed/img/cover/cover_erol-ahmed-unsplash.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Pinsflora</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-list"></i><span> List</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/Galleries"><i class="fa-fw /gallery/"></i><span> 0</span></a></li><li><a class="site-page child" href="/Movie"><i class="fa-fw /movies/"></i><span> 1</span></a></li><li><a class="site-page child" href="/Games"><i class="fa-fw /games/"></i><span> 2</span></a></li><li><a class="site-page child" href="/Tools"><i class="fa-fw /tools/"></i><span> 3</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Django Introduction Part 5 - Templates</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2018-01-23T16:00:00.000Z" title="Created 2018-01-24 00:00:00">2018-01-24</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2020-08-04T16:00:00.000Z" title="Updated 2020-08-05 00:00:00">2020-08-05</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Python/">Python</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Python/Django/">Django</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">Word count:</span><span class="word-count">4.2k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">Reading time:</span><span>26min</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Django Introduction Part 5 - Templates"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post View:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="overview"><a class="markdownIt-Anchor" href="#overview"></a> Overview</h2>
<p>After we defined our models and created some initial movie records to work with, it’s time to write the code that presents that information to users. The first thing we need to do is determine what information we want to display in our pages, and define the URLs to use for returning those resources. Then we’ll create a URL mapper, views, and templates to display the pages.</p>
<h2 id="defining-the-resource-urls"><a class="markdownIt-Anchor" href="#defining-the-resource-urls"></a> Defining the resource URLs</h2>
<p>As this part is essentially read-only for end users, we just need to provide a landing page for the site (a home page), and pages that <em>display</em> list and detail views .</p>
<p>The URLs that we’ll need for our pages are:</p>
<ul>
<li><code>movies/</code> — The home (index) page.</li>
<li><code>movies/list/</code> — A list of all movies.</li>
<li><code>movies/director/</code> — A list of all directors.</li>
<li><code>movies/*&lt;id&gt;*</code> — The detail view for a particular movie, with a field primary key of <code>*&lt;id&gt;*</code> (the default).</li>
<li><code>movies/director/*&lt;id&gt;*</code> — The detail view for the specific director with a primary key field of <em>&lt;id&gt;.</em></li>
</ul>
<p>Whichever approach you use, the URLs should be kept clean, logical, and readable, as <a target="_blank" rel="noopener" href="https://www.w3.org/Provider/Style/URI">recommended by the W3C</a>.</p>
<h2 id="creating-the-list-page"><a class="markdownIt-Anchor" href="#creating-the-list-page"></a> Creating the list page</h2>
<p>The first page we’ll create is the list page . The index page will include some static HTML, along with generated “counts” of different records in the database. To make this work we’ll create a URL mapping, a view, and a template.</p>
<h3 id="url-mapping"><a class="markdownIt-Anchor" href="#url-mapping"></a> URL mapping</h3>
<p>We firstly updated the <strong>yourproject/urls.py</strong> file to ensure that whenever an URL that starts with <code>movies/</code>  is received, the <em>URLConf</em> module <code>movies.urls</code> will process the remaining substring.</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">urlpatterns += [</span><br><span class="line">    path('movies/', include('movies.urls')),</span><br><span class="line">]</span><br></pre></td></tr></tbody></table></figure>
<p>We also created a placeholder file for the <em>URLConf</em> module, named <strong>/movies/urls.py</strong>. Add the following lines to that file:</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> views</span><br><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    <span class="comment"># ex: /movies/</span></span><br><span class="line">    path(<span class="string">''</span>, views.index, name=<span class="string">'index'</span>),</span><br><span class="line">    <span class="comment"># ex: /movies/list/</span></span><br><span class="line">    path(<span class="string">'/list/'</span>, views.movie_list, name=<span class="string">'movie_list'</span>),</span><br><span class="line">    <span class="comment"># ex: /movies/5</span></span><br><span class="line">    path(<span class="string">'&lt;int:movie_id&gt;/'</span>, views.movie_detail, name=<span class="string">'movie_detail'</span>),</span><br><span class="line">...</span><br><span class="line">]</span><br></pre></td></tr></tbody></table></figure>
<p>The <code>path()</code> function also specifies a <code>name</code> parameter, which is a unique identifier for this particular URL mapping. You can use the name to “reverse” the mapper, i.e.  to dynamically create a URL that  points to the resource that the mapper is designed to handle.</p>
<p>For example, we can use the name parameter to link to our home page from any other page by adding the following link in a template:</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"{% url 'index' %}"</span>&gt;</span>Home<span class="tag">&lt;/<span class="name">a</span>&gt;</span>.</span><br></pre></td></tr></tbody></table></figure>
<p>And now let’s add a very simple views to ,these views are slightly different, because they take an argument:</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> HttpResponse</span><br><span class="line">    </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">movie_detail</span>(<span class="params">request, movie_id</span>):</span></span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">"You're looking at movie %s."</span> % movie_id)</span><br><span class="line"></span><br><span class="line"><span class="comment">## OR</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">movie_detail</span>(<span class="params">request, question_id</span>):</span></span><br><span class="line">    response = <span class="string">"You're looking at the results of movie %s."</span></span><br><span class="line">    <span class="keyword">return</span> HttpResponse(response % movie_id)</span><br></pre></td></tr></tbody></table></figure>
<p>Your view can read records from a database, or not. It can use a template syste  or a third-party Python template system such as jinjia2. It can generate a PDF file, output XML, create a ZIP file on the fly, anything you want, using whatever Python libraries you want.</p>
<p>Here’s one stab at a new <code>movie_list()</code> view, which displays the latest 5 movies and separated by commas, according to movie_release_date:</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> .models <span class="keyword">import</span> Movie</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">movie_list</span>(<span class="params">request</span>):</span></span><br><span class="line">    latest_movie_list = Movie.objects.order_by(<span class="string">'-movie_release_date'</span>)[:<span class="number">5</span>]</span><br><span class="line">    output = <span class="string">', '</span>.join([m.movie_title <span class="keyword">for</span> m <span class="keyword">in</span> latest_movie_list])</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(output)</span><br></pre></td></tr></tbody></table></figure>
<p>Then, we need to create a very simple template for render the <code>latest_movie_list</code>. Django will look for templates in there.</p>
<p>Put the following code in that template:</p>
<p><code>movie/templates/movie/movie-list.html</code></p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">{% if latest_movie_list %}</span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    {% for m in latest_movie_list %}</span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/movies/{{ m.id }}/"</span>&gt;</span>{{ m.movie_title }}<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    {% endfor %}</span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">{% else %}</span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>No movies are available.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">{% endif %}</span><br></pre></td></tr></tbody></table></figure>
<p>Remember, when we wrote the link to a movie i, the link was partially hardcoded like this:</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/movies/{{ m.id }}/"</span>&gt;</span>{{ m.movie_title }}<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<p>You can remove a reliance on specific URL paths defined in your url configurations by using the <code>{% url %}</code> template tag:</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"{% url 'movie_detail' m.id %}"</span>&gt;</span>{{ m.movie_title  }}<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<p>Now let’s update our view  to use the template:</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> HttpResponse</span><br><span class="line"><span class="keyword">from</span> django.template <span class="keyword">import</span> loader</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> .models <span class="keyword">import</span> Movie</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">movie_list</span>(<span class="params">request</span>):</span></span><br><span class="line">    latest_movie_list = Movie.objects.order_by(<span class="string">'-movie_release_date'</span>)[:<span class="number">5</span>]</span><br><span class="line">    template = loader.get_template(<span class="string">'movie/movie-list.html'</span>)</span><br><span class="line">    context = {</span><br><span class="line">        <span class="string">'latest_movie_list'</span>: latest_movie_list,</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(template.render(context, request))</span><br></pre></td></tr></tbody></table></figure>
<p>It’s a very common idiom to load a template, fill a context and return an <code>HttpResponse</code>object with the result of the rendered template. Django provides a shortcut.</p>
<p>The <code>render()</code> function takes the request object as its first argument, a template name as its second argument and a dictionary as its optional third argument.Here’s the full rewritten:</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render</span><br><span class="line"><span class="comment"># we no longer need to import loader and HttpResponse</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">movie_list</span>(<span class="params">request</span>):</span></span><br><span class="line">    latest_movie_list = Movie.objects.order_by(<span class="string">'-movie_release_date'</span>)[:<span class="number">5</span>]</span><br><span class="line">    context = {<span class="string">'latest_movie_list'</span>: latest_movie_list}</span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">'movie/movie-list.html'</span>, context)</span><br></pre></td></tr></tbody></table></figure>
<p>Now we want to raising a 404 error:</p>
<p>the page that displays the question text for a given poll. Here’s the view:</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render</span><br><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> Http404</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">movie_detail</span>(<span class="params">request,movie_id</span>):</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        movie = Movie.objects.get(pk=movie_id)</span><br><span class="line">    <span class="keyword">except</span> Movie.DoesNotExist:</span><br><span class="line">        <span class="keyword">raise</span> Http404(<span class="string">"Movie does not exist"</span>)</span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">'movie/movie_detail.html'</span>, {<span class="string">'movie'</span>: movie})</span><br></pre></td></tr></tbody></table></figure>
<p>The new concept here: The view raises the <code>Http404</code> exception if a movie with the requested ID doesn’t exist.</p>
<p>It’s a very common idiom to use <code>get()</code> and raise <code>Http404</code> if the object doesn’t exist. Django provides a shortcut. Here’s the <code>detail()</code>view, rewritten:</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> get_object_or_404, render</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">movie_detail</span>(<span class="params">request,movie_id</span>):</span></span><br><span class="line">    movie = get_object_or_404(Movie, pk=movie_id)</span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">'movie/movie_detail.html'</span>, {<span class="string">'movie'</span>: movie})</span><br></pre></td></tr></tbody></table></figure>
<p>The <code>get_object_or_404()</code> function takes a Django model as its first argument and an arbitrary number of keyword arguments, which it passes to the <code>get()</code> function of the model’s manager. It raises <code>Http404</code> if the object doesn’t exist.</p>
<p>There’s also a <code>get_list_or_404()</code> function, which works just as <code>get_object_or_404()</code> – except using <code>filter()</code> instead of <code>get()</code>. It raises <code>Http404</code> if the list is empty.</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> get_list_or_404</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">movie_list</span>(<span class="params">request</span>):</span></span><br><span class="line">    movie_list = get_list_or_404(Movie, movie_is_fav=<span class="literal">True</span>)</span><br><span class="line"><span class="comment"># This example is equivalent to:</span></span><br><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> Http404</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">movie_list</span>(<span class="params">request</span>):</span></span><br><span class="line">    movie_list = list(Movie.objects.filter(movie_is_fav=<span class="literal">True</span>))</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> movie_list:</span><br><span class="line">        <span class="keyword">raise</span> Http404(<span class="string">"No Movie matches the given query."</span>)</span><br></pre></td></tr></tbody></table></figure>
<h3 id="view-function-based"><a class="markdownIt-Anchor" href="#view-function-based"></a> View (function-based)</h3>
<p>A view is a function that processes an HTTP request, fetches the required data from the database, renders the data in an HTML page using an HTML template, and then returns the generated HTML in an HTTP response to display the page to the user.</p>
<p>For example, in a blog application, you might have the following views:</p>
<ul>
<li>Blog homepage – displays the latest few entries.</li>
<li>Entry “detail” page – permalink page for a single entry.</li>
<li>Year-based archive page – displays all months with entries in the given year.</li>
<li>Month-based archive page – displays all days with entries in the given month.</li>
<li>Day-based archive page – displays all entries in the given day.</li>
<li>Comment action – handles posting comments to a given entry.</li>
</ul>
<p>Open <strong>yourapps/views.py</strong> and note that the file already imports the render() shortcut function to generate HTML file using a template and data:</p>
<p>Paste the following lines at the bottom of the file:</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render, redirect,get_object_or_404</span><br><span class="line"><span class="keyword">from</span> django.db.models <span class="keyword">import</span> Q</span><br><span class="line"><span class="keyword">from</span> django.views.generic <span class="keyword">import</span> View</span><br><span class="line"><span class="comment"># imports the model classes that we'll use to access data in all our views.</span></span><br><span class="line"><span class="keyword">from</span> .models <span class="keyword">import</span> Movie, Director, Rating</span><br><span class="line"><span class="keyword">from</span> taggit.models <span class="keyword">import</span> Tag</span><br><span class="line"><span class="keyword">from</span> django.core.paginator <span class="keyword">import</span> Paginator, EmptyPage, PageNotAnInteger</span><br><span class="line"><span class="keyword">from</span> django.db.models <span class="keyword">import</span> Q</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">movie_list</span>(<span class="params">request, tag_slug=None</span>):</span></span><br><span class="line">    <span class="comment"># Fetches the number of records using the `objects.all()`attribute on the model classes.</span></span><br><span class="line">    <span class="comment"># Generate counts of some of the main objects</span></span><br><span class="line">    num_movies = Movie.objects.all().count()</span><br><span class="line">    <span class="comment"># The 'all()' is implied by default.  </span></span><br><span class="line">    num_ratings = Rating.objects.count()  </span><br><span class="line">    <span class="comment"># movie watched</span></span><br><span class="line">    num_movies_watched= Rating.objects.filter(rating_status__exact=<span class="string">'h'</span>).count()</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># if you are using django-taggit in your project</span></span><br><span class="line">    <span class="comment"># https://pypi.org/project/django-taggit/</span></span><br><span class="line">    <span class="keyword">if</span> tag_slug:</span><br><span class="line">        tag = get_object_or_404(Tag, slug=tag_slug)</span><br><span class="line">        object_list = Movie.objects.filter(tags__in=[tag])</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        object_list = Movie.objects.all()</span><br><span class="line">        tag = <span class="literal">None</span></span><br><span class="line">        </span><br><span class="line">    <span class="comment"># query, We'll talk more about this later</span></span><br><span class="line">    query = request.GET.get(<span class="string">"q"</span>)</span><br><span class="line">    <span class="keyword">if</span> query:</span><br><span class="line">        object_list = object_list.filter(</span><br><span class="line">        Q(movie_title__icontains=query) |</span><br><span class="line">        Q(director__director_name__icontains=query) |</span><br><span class="line">        Q(movie_summary__icontains=query) |</span><br><span class="line">        Q(movie_release_date_year__icontains=query) |</span><br><span class="line">        Q(tags__name__icontains=query)</span><br><span class="line">    ).distinct()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># paginator, We'll talk more about this later</span></span><br><span class="line">    paginator = Paginator(object_list,<span class="number">25</span>)</span><br><span class="line">    page = request.GET.get(<span class="string">'page'</span>)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        movies = paginator.page(page)</span><br><span class="line">    <span class="keyword">except</span> PageNotAnInteger:</span><br><span class="line">        movies = paginator.page(<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">except</span> EmptyPage:</span><br><span class="line">        <span class="comment"># last page</span></span><br><span class="line">        movies = paginator.page(paginator.num_pages)</span><br><span class="line"></span><br><span class="line">    context = {</span><br><span class="line">        <span class="string">'page'</span>: page,</span><br><span class="line">        <span class="string">'movies'</span>: movies,</span><br><span class="line">        <span class="string">'tag'</span>: tag,</span><br><span class="line">        <span class="string">'num_movies'</span>: num_movies,</span><br><span class="line">        <span class="string">'num_ratings'</span>: num_ratings,</span><br><span class="line">        <span class="string">'num_movies_watched'</span>: num_movies_watched,</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">'movies/movie_list.html'</span>, context)</span><br></pre></td></tr></tbody></table></figure>
<p>At the end of the view function we call the <code>render()</code> function to create an HTML page and return the page as a response. This shortcut function wraps a number of other functions to simplify a very common use case. The <code>render()</code> function accepts the following parameters:</p>
<ul>
<li>the original <code>request</code> object, which is an <code>HttpRequest</code>.</li>
<li>an HTML template with placeholders for the data.</li>
<li>a <code>context</code> variable, which is a Python dictionary, containing the data to insert into the placeholders.</li>
</ul>
<p>We’ll talk more about templates and the <code>context</code> variable in the next section.</p>
<h2 id="staticfiles"><a class="markdownIt-Anchor" href="#staticfiles"></a> Staticfiles</h2>
<p>Django does not serve static files like CSS, JavaScript, and images by default, but it can be useful for the development web server to do so while you’re creating your site. As a final addition to this URL mapper, you can enable the serving of static files during development by appending the following lines.</p>
<p>Open <code>fragments/urls.py</code>:</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="keyword">from</span> django.conf <span class="keyword">import</span> settings</span><br><span class="line"><span class="keyword">from</span> django.conf.urls.static <span class="keyword">import</span> static</span><br><span class="line">urlpatterns = [</span><br><span class="line">...</span><br><span class="line">] + static(settings.STATIC_URL, document_root=settings.STATIC_ROOT)</span><br><span class="line"></span><br><span class="line"><span class="comment"># This helper function works only in debug mode and only if the given prefix is local (e.g. /static/) and not a URL (e.g. http://static.example.com/).</span></span><br></pre></td></tr></tbody></table></figure>
<p>In addition, we included the import line (<code>from django.urls import include</code>) with the code that uses it (so it is easy to see what we’ve added), but it is common to include all your import lines at the top of a Python file.</p>
<p>Aside from the HTML generated by the server, web applications generally need to serve additional files — such as images, JavaScript, or CSS — necessary to render the complete web page. In Django, we refer to these files as “static files”.</p>
<p>For small projects, this isn’t a big deal, because you can just keep the static files somewhere your web server can find it. However, in bigger projects – especially those comprised of multiple apps – dealing with the multiple sets of static files provided by each application starts to get tricky.</p>
<p>That’s what <code>django.contrib.staticfiles</code> is for: it collects static files from each of your applications (and any other places you specify) into a single location that can easily be served in production.</p>
<p><code>First</code>, create a directory called <code>static</code> in your project directory. Django will look for static files there, Django’s <code>STATICFILES_FINDERS</code> setting contains a list of finders that know how to discover static files from various sources.</p>
<figure class="highlight django"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="template-tag">{% <span class="name"><span class="name">load</span></span> static %}</span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">href</span>=<span class="string">"</span></span></span><span class="template-tag">{% <span class="name"><span class="name">static</span></span> 'movie/css/style.css' %}</span><span class="xml"><span class="tag"><span class="string">"</span>&gt;</span></span></span><br></pre></td></tr></tbody></table></figure>
<p>The <code>{% static %}</code> template tag generates the absolute URL of static files,which means <code>&lt;link rel="stylesheet" type="text/css" href="/static/ratings/css/style.css"&gt;</code>, you will find this file in <code>http://127.0.0.1:8080/static/movie/css/style.css</code></p>
<p>That’s all you need to do for development.</p>
<p>Next, we’ll create a subdirectory for images. Create an <code>images</code> subdirectory in the <code>movie/static/movie/images</code> directory.  In other words, put your image in <code>movie/static/movie/images/yourname.jpg</code>.</p>
<figure class="highlight css"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> {</span><br><span class="line">    <span class="attribute">background</span>: white <span class="built_in">url</span>(<span class="string">"images/demo.jpg"</span>) no-repeat <span class="number">0px</span> <span class="number">0px</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h2 id="template"><a class="markdownIt-Anchor" href="#template"></a> Template</h2>
<p>A template is a text file that defines the structure or layout of a file (such as an HTML page), it uses placeholders to represent actual content.</p>
<p>Django will automatically look for templates in a directory named ‘<strong>templates</strong>’ in your application.</p>
<h3 id="referencing-static-files-in-templates"><a class="markdownIt-Anchor" href="#referencing-static-files-in-templates"></a> Referencing static files in templates</h3>
<p>Your project is likely to use static resources, including JavaScript, CSS, and images. Because the location of these files might not be known (or might change), Django allows you to specify the location in your templates relative to the <code>STATIC_URL</code> global setting. The default skeleton website sets the value of <code>STATIC_URL</code> to ‘<code>/static/</code>’, but you might choose to host these on a content delivery network or elsewhere.</p>
<p>Within the template you first call the <code>load</code> template tag specifying “static” to add the template library, as shown in the code sample below. You can then use the <code>static</code> template tag and specify the relative URL to the required file.</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Add additional CSS in static file --&gt;</span> </span><br><span class="line">{% load static %} </span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"{% static 'css/styles.css' %}"</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<h3 id="base-templates"><a class="markdownIt-Anchor" href="#base-templates"></a> Base templates</h3>
<p>The index template will need standard HTML markup for the head and body, along with navigation sections to link to the other pages of the site.</p>
<p>Much of the HTML and navigation structure will be the same in every page of our site. Instead of duplicating <code>boilerplate</code> code on every page, you can use the Django templating language to declare a base template, and then extend it to replace just the bits that are different for each specific page.</p>
<p>The sample below includes common HTML with sections for a title, a sidebar, and main contents marked with the named <code>block</code> and <code>endblock</code> template tags, shown in bold. You can leave the blocks empty, or include default content to use when rendering pages derived from the template.</p>
<p>Create a new file <strong>movie_base.html</strong> in <strong>/movie/templates/movie</strong> and paste the following code to the file:</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  {% block title %}<span class="tag">&lt;<span class="name">title</span>&gt;</span>My Movies<span class="tag">&lt;/<span class="name">title</span>&gt;</span>{% endblock %}</span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">"https://cdn.bootcss.com/twitter-bootstrap/4.5.1/css/bootstrap.min.css"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- Add additional CSS in static file --&gt;</span></span><br><span class="line">  {% load static %}</span><br><span class="line">   <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">"{% static 'css/movie.css' %}"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">type</span>=<span class="string">"text/css"</span> /&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"{% static 'js/movie.js' %}"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container-fluid"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-sm-2"</span>&gt;</span></span><br><span class="line">      {% block sidebar %}</span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"sidebar-nav"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span>&gt;</span>All Movies<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span>&gt;</span>All Directors<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">          ...</span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">     {% endblock %}</span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-sm-10 "</span>&gt;</span>{% block content %}{% endblock %}<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<blockquote>
<p>The template includes CSS from <a target="_blank" rel="noopener" href="http://getbootstrap.com/">Bootstrap</a> to improve the layout and presentation of the HTML page. Using Bootstrap (or another client-side web framework) is a quick way to create an attractive page that displays well on different screen sizes.</p>
</blockquote>
<p>The base template also references a local css file (<strong>movie.css</strong>) that provides additional styling. Create a <strong>movie.css</strong> file and paste the following code in the file:</p>
<figure class="highlight css"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.sidebar-nav</span> {</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">list-style</span>: none;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h3 id="extending-templates"><a class="markdownIt-Anchor" href="#extending-templates"></a> Extending templates</h3>
<p>Create a new HTML file <strong>movie_list.html</strong> in and paste the following code in the file. This code extends our base template on the first line, and then replaces the default <code>content</code> block for the template.</p>
<p>The template uses the for and <code>endfor</code> template tags to loop through the movie list, as shown below. Each iteration populates the <code>book</code> template variable with information for the current list item.</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">{% for movie in movies %}</span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span> <span class="comment">&lt;!-- code here get information from each movieitem --&gt;</span> <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">{% endfor %}</span><br></pre></td></tr></tbody></table></figure>
<p>The code inside the loop creates a list item for each moviethat shows both the title (as a link to the yet-to-be-created detail view) and the director, and we access the <em>fields</em> of the associated movierecord using the “dot notation” in django.</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"{{ movie.get_absolute_url }}"</span>&gt;</span>{{ movie.movie_title }}<span class="tag">&lt;/<span class="name">a</span>&gt;</span> ({{movie.movie_director}})</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">{% extends 'movie/movie_base.html' %}</span><br><span class="line">{% block content %}</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"card-columns text-center"</span>&gt;</span></span><br><span class="line">        {% for movie in movies %}</span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"card p-3"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"text-center play"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">"card-img-top"</span> <span class="attr">src</span>=<span class="string">"{{ movie.movie_poster.url }}"</span> <span class="attr">alt</span>=<span class="string">"Card image"</span> <span class="attr">style</span>=<span class="string">"margin-top: 15px"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"card-body text-center"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"btn btn-light"</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>{{ movie.movie_title }}({{ movie.movie_title_CN}})<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"card-text"</span>&gt;</span><span class="tag">&lt;<span class="name">small</span> <span class="attr">class</span>=<span class="string">"text-muted"</span>&gt;</span>{{ movie.movie_release_date }}<span class="tag">&lt;/<span class="name">small</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"tags"</span>&gt;</span></span><br><span class="line">                    {% for tag in movie.movie_genres.all %}</span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"{% url 'movie:movie_list_by_tag' tag.slug %}"</span> <span class="attr">class</span>=<span class="string">"badge badge-light"</span>&gt;</span></span><br><span class="line">                        {{ tag.name }}</span><br><span class="line">                    <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    {% if not forloop.last %}, {% endif %} {% endfor %}</span><br><span class="line">                <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"card-text"</span>&gt;</span></span><br><span class="line">                     {{ movie.movie_summary|truncatewords:30|linebreaks }}<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        {% empty %}</span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"{% url 'movie:movie_list' %}"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-primary"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"fas fa-send"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span>No results.</span><br><span class="line">            <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        {% endfor %}</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    {% include 'pagination.html' with page=movies %}</span><br><span class="line">{% endblock %}</span><br></pre></td></tr></tbody></table></figure>
<p>We can also use the <code>if</code>, <code>else</code>, and <code>endif</code> template tags to check whether the <code>movies</code> has been defined and is not empty.</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">{% extends <span class="string">'movie/movie_base.html'</span> %}</span><br><span class="line">{% block content %}</span><br><span class="line">    {% <span class="keyword">if</span> movies %}</span><br><span class="line">	...</span><br><span class="line">    {% include <span class="string">'pagination.html'</span> <span class="keyword">with</span> page=movies %}</span><br><span class="line">    {% <span class="keyword">else</span> %}</span><br><span class="line">    	&lt;p&gt;There are no movies here.&lt;/p&gt;</span><br><span class="line">    {% endif %} </span><br><span class="line">{% endblock %}</span><br></pre></td></tr></tbody></table></figure>
<p>The base template below introduced the <code>url</code> template tag.</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"{% url 'movie:movie_list' %}"</span>&gt;</span>Home<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<p>This tag accepts the name of a <code>path()</code> function called in your <strong><a target="_blank" rel="noopener" href="http://urls.py">urls.py</a></strong> and the values for any arguments that the associated view will receive from that function, and returns a URL that you can use to link to the resource.</p>
<p>The movie detail in the template above has an empty URL because we’ve not yet created a detail page. Once that exists, you should update the URL like this:</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"{% url 'movie-detail' movie.pk %}"</span>&gt;</span>{{ movie.title }}<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/joaxin/img_bed/img/py/dj/movie-list-test.png" alt="movie-list"></p>
<h3 id="configuring-where-to-find-the-templates"><a class="markdownIt-Anchor" href="#configuring-where-to-find-the-templates"></a> Configuring where to find the templates</h3>
<p>You need to point Django to search for your templates in the templates folder. To do that, add the templates dir to the TEMPLATES object by editing the <strong><a target="_blank" rel="noopener" href="http://settings.py">settings.py</a></strong> file as shown in bold in the following code sample:</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">TEMPLATES = [</span><br><span class="line">    {</span><br><span class="line">        <span class="string">'BACKEND'</span>: <span class="string">'django.template.backends.django.DjangoTemplates'</span>,</span><br><span class="line">        <span class="string">'DIRS'</span>: [</span><br><span class="line">            os.path.join(BASE_DIR, <span class="string">'templates'</span>),</span><br><span class="line">        ],</span><br><span class="line">        <span class="string">'APP_DIRS'</span>: <span class="literal">True</span>,</span><br><span class="line">        <span class="string">'OPTIONS'</span>: {</span><br><span class="line">            <span class="string">'context_processors'</span>: [</span><br><span class="line">                <span class="string">'django.template.context_processors.debug'</span>,</span><br><span class="line">                <span class="string">'django.template.context_processors.request'</span>,</span><br><span class="line">                <span class="string">'django.contrib.auth.context_processors.auth'</span>,</span><br><span class="line">                <span class="string">'django.contrib.messages.context_processors.messages'</span>,</span><br><span class="line">            ],</span><br><span class="line">        },</span><br><span class="line">    },</span><br><span class="line">]</span><br></pre></td></tr></tbody></table></figure>
<h2 id="templatetags"><a class="markdownIt-Anchor" href="#templatetags"></a> TemplateTags</h2>
<h3 id="cycle"><a class="markdownIt-Anchor" href="#cycle"></a> Cycle</h3>
<p>Produces one of its arguments each time this tag is encountered. The first argument is produced on the first encounter, the second argument on the second encounter, and so forth. Once all arguments are exhausted, the tag cycles to the first argument and produces it again.</p>
<p>This tag is particularly useful in a loop:</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">{% for o in some_list %}</span><br><span class="line">    &lt;tr class="{% cycle 'row1' 'row2' %}"&gt;</span><br><span class="line">        ...</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line">{% endfor %}</span><br></pre></td></tr></tbody></table></figure>
<p>The first iteration produces HTML that refers to class <code>row1</code>, the second to <code>row2</code>, the third to <code>row1</code> again, and so on for each iteration of the loop.</p>
<p>You can use variables, too. For example, if you have two template variables, <code>rowvalue1</code> and <code>rowvalue2</code>, you can alternate between their values like this:</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">{% for o in some_list %}</span><br><span class="line">    &lt;tr class="{% cycle rowvalue1 rowvalue2 %}"&gt;</span><br><span class="line">        ...</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line">{% endfor %}</span><br></pre></td></tr></tbody></table></figure>
<p>Variables included in the cycle will be escaped. You can disable auto-escaping with:</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">{% for o in some_list %}</span><br><span class="line">    &lt;tr class="{% autoescape off %}{% cycle rowvalue1 rowvalue2 %}{% endautoescape %}"&gt;</span><br><span class="line">        ...</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line">{% endfor %}</span><br></pre></td></tr></tbody></table></figure>
<p>You can mix variables and strings:</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">{% for o in some_list %}</span><br><span class="line">    &lt;tr class="{% cycle 'row1' rowvalue2 'row3' %}"&gt;</span><br><span class="line">        ...</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line">{% endfor %}</span><br></pre></td></tr></tbody></table></figure>
<p>In some cases you might want to refer to the current value of a cycle without advancing to the next value. To do this, give the <code>{% cycle %}</code> tag a name, using “as”, like this:</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">{% cycle 'row1' 'row2' as rowcolors %}</span><br></pre></td></tr></tbody></table></figure>
<p>From then on, you can insert the current value of the cycle wherever you’d like in your template by referencing the cycle name as a context variable. If you want to move the cycle to the next value independently of the original <code>cycle</code> tag, you can use another <code>cycle</code> tag and specify the name of the variable. So, the following template:</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;tr&gt;</span><br><span class="line">    &lt;td class="{% cycle 'row1' 'row2' as rowcolors %}"&gt;...&lt;/td&gt;</span><br><span class="line">    &lt;td class="{{ rowcolors }}"&gt;...&lt;/td&gt;</span><br><span class="line">&lt;/tr&gt;</span><br><span class="line">&lt;tr&gt;</span><br><span class="line">    &lt;td class="{% cycle rowcolors %}"&gt;...&lt;/td&gt;</span><br><span class="line">    &lt;td class="{{ rowcolors }}"&gt;...&lt;/td&gt;</span><br><span class="line">&lt;/tr&gt;</span><br></pre></td></tr></tbody></table></figure>
<p>would output:</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;tr&gt;</span><br><span class="line">    &lt;td class="row1"&gt;...&lt;/td&gt;</span><br><span class="line">    &lt;td class="row1"&gt;...&lt;/td&gt;</span><br><span class="line">&lt;/tr&gt;</span><br><span class="line">&lt;tr&gt;</span><br><span class="line">    &lt;td class="row2"&gt;...&lt;/td&gt;</span><br><span class="line">    &lt;td class="row2"&gt;...&lt;/td&gt;</span><br><span class="line">&lt;/tr&gt;</span><br></pre></td></tr></tbody></table></figure>
<p>You can use any number of values in a <code>cycle</code> tag, separated by spaces. Values enclosed in single quotes (<code>'</code>) or double quotes (<code>"</code>) are treated as string literals, while values without quotes are treated as template variables.</p>
<p>By default, when you use the <code>as</code> keyword with the cycle tag, the usage of <code>{% cycle %}</code> that initiates the cycle will itself produce the first value in the cycle. This could be a problem if you want to use the value in a nested loop or an included template. If you only want to declare the cycle but not produce the first value, you can add a <code>silent</code> keyword as the last keyword in the tag. For example:</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">{% for obj in some_list %}</span><br><span class="line">    {% cycle 'row1' 'row2' as rowcolors silent %}</span><br><span class="line">    &lt;tr class="{{ rowcolors }}"&gt;{% include "subtemplate.html" %}&lt;/tr&gt;</span><br><span class="line">{% endfor %}</span><br></pre></td></tr></tbody></table></figure>
<p>This will output a list of <code>&lt;tr&gt;</code> elements with <code>class</code> alternating between <code>row1</code> and <code>row2</code>. The subtemplate will have access to <code>rowcolors</code> in its context and the value will match the class of the <code>&lt;tr&gt;</code> that encloses it. If the <code>silent</code> keyword were to be omitted, <code>row1</code> and <code>row2</code> would be emitted as normal text, outside the <code>&lt;tr&gt;</code> element.</p>
<p>When the silent keyword is used on a cycle definition, the silence automatically applies to all subsequent uses of that specific cycle tag. The following template would output <em>nothing</em>, even though the second call to <code>{% cycle %}</code> doesn’t specify <code>silent</code>:</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">{% cycle 'row1' 'row2' as rowcolors silent %}</span><br><span class="line">{% cycle rowcolors %}</span><br></pre></td></tr></tbody></table></figure>
<p>You can use the <a target="_blank" rel="noopener" href="https://docs.djangoproject.com/en/3.1/ref/templates/builtins/#std:templatetag-resetcycle"><code>resetcycle</code></a> tag to make a <code>{% cycle %}</code> tag restart from its first value when it’s next encountered.</p>
<h3 id="linebreaks"><a class="markdownIt-Anchor" href="#linebreaks"></a> linebreaks</h3>
<p>Replaces line breaks in plain text with appropriate HTML; a single newline becomes an HTML line break (<code>&lt;br&gt;</code>) and a new line followed by a blank line becomes a paragraph break (<code>&lt;/p&gt;</code>).</p>
<p>For example:</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">{{ value|linebreaks }}</span><br></pre></td></tr></tbody></table></figure>
<p>If <code>value</code> is <code>Joel\nis a slug</code>, the output will be <code>&lt;p&gt;Joel&lt;br&gt;is a slug&lt;/p&gt;</code>.</p>
<h3 id="truncatewords"><a class="markdownIt-Anchor" href="#truncatewords"></a> Truncatewords</h3>
<p>Truncates a string after a certain number of words.</p>
<p><strong>Argument:</strong> Number of words to truncate after</p>
<p>For example:</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">{{ value|truncatewords:2 }}</span><br></pre></td></tr></tbody></table></figure>
<p>If <code>value</code> is <code>"Joel is a slug"</code>, the output will be <code>"Joel is …"</code>.</p>
<p>Newlines within the string will be removed.</p>
<p><code>truncatewords_html</code> is similar to <code>truncatewords</code>, except that it is aware of HTML tags. Any tags that are opened in the string and not closed before the truncation point, are closed immediately after the truncation.</p>
<p>This is less efficient than <code>truncatewords</code>, so should only be used when it is being passed HTML text.</p>
<p>For example:</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">{{ value|truncatewords_html:2 }}</span><br></pre></td></tr></tbody></table></figure>
<p>If <code>value</code> is <code>"&lt;p&gt;Joel is a slug&lt;/p&gt;"</code>, the output will be <code>"&lt;p&gt;Joel is …&lt;/p&gt;"</code>.</p>
<p>Newlines in the HTML content will be preserved</p>
<h2 id="references"><a class="markdownIt-Anchor" href="#references"></a> REFERENCES</h2>
<ul>
<li><a target="_blank" rel="noopener" href="https://docs.djangoproject.com/en/3.1/topics/http/views/">https://docs.djangoproject.com/en/3.1/topics/http/views/</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.djangoproject.com/en/3.1/topics/templates/">https://docs.djangoproject.com/en/3.1/topics/templates/</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.djangoproject.com/en/3.1/howto/static-files/">https://docs.djangoproject.com/en/3.1/howto/static-files/</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.djangoproject.com/en/3.1/ref/templates/builtins/">https://docs.djangoproject.com/en/3.1/ref/templates/builtins/</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.djangoproject.com/en/3.1/ref/request-response/">https://docs.djangoproject.com/en/3.1/ref/request-response/</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.djangoproject.com/en/3.1/ref/templates/builtins/">https://docs.djangoproject.com/en/3.1/ref/templates/builtins/</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.djangoproject.com/en/3.1/howto/custom-template-tags/#writing-custom-template-filters">https://docs.djangoproject.com/en/3.1/howto/custom-template-tags/#writing-custom-template-filters</a></li>
</ul>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">Joaxin</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://u.pinsflora.xyz/Pysnista/Django/dj_intro5_templates/">https://u.pinsflora.xyz/Pysnista/Django/dj_intro5_templates/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Django/">Django</a></div><div class="post_share"><div class="addtoany"><div class="a2a_kit a2a_kit_size_32 a2a_default_style"><a class="a2a_button_facebook"></a><a class="a2a_button_twitter"></a><a class="a2a_button_wechat"></a><a class="a2a_button_sina_weibo"></a><a class="a2a_button_facebook_messenger"></a><a class="a2a_button_email"></a><a class="a2a_button_copy_link"></a><a class="a2a_dd" target="_blank" rel="noopener" href="https://www.addtoany.com/share"></a></div></div><script async="async" src="https://static.addtoany.com/menu/page.js"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/Pysnista/Django/dj_intro2_models/"><img class="prev-cover" src="https://cdn.jsdelivr.net/gh/joaxin/img_bed/img/cover_posts/py/django_cover.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">Django Introduction Part 2 - Models</div></div></a></div><div class="next-post pull-right"><a href="/Pysnista/Django/dj_intro8_Users/"><img class="next-cover" src="https://cdn.jsdelivr.net/gh/joaxin/img_bed/img/cover/cover_forests.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">Django Introduction Part9 - User authentication and permissions</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span> Related Articles</span></div><div class="relatedPosts-list"><div><a href="/Pysnista/Django/dj_FAQ/" title="Django FAQ"><img class="cover" src="https://cdn.jsdelivr.net/gh/joaxin/img_bed/img/cover/cover_grass_in_the_snow.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2020-09-05</div><div class="title">Django FAQ</div></div></a></div><div><a href="/Pysnista/Django/dj_intro3_dbs/" title="Django Introduction Part3 - Database"><img class="cover" src="https://cdn.jsdelivr.net/gh/joaxin/img_bed/img/cover/cover_writting_letter.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2020-09-05</div><div class="title">Django Introduction Part3 - Database</div></div></a></div><div><a href="/Pysnista/Django/dj_intro4_admin/" title="Django Introduction Part4 - Admin"><img class="cover" src="https://cdn.jsdelivr.net/gh/joaxin/img_bed/img/cover/cover_tree_dawnlights.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2020-08-05</div><div class="title">Django Introduction Part4 - Admin</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> Comment</span></div></div><div class="comment-wrap"><div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" src="https://avatars2.githubusercontent.com/u/8346164?s=460&amp;v=4" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">Joaxin</div><div class="author-info__description">When I close my eyes, I'm in my own ♡cean 🐟aves.</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">340</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">Tags</div><div class="length-num">110</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">Categories</div><div class="length-num">34</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/joaxin"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/joaxin" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:lotility@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="fas fa-rss"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>Announcement</span></div><div class="announcement_content">感謝訪問本站，若喜歡請收藏 ^_^</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Catalog</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#overview"><span class="toc-number">1.</span> <span class="toc-text"> Overview</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#defining-the-resource-urls"><span class="toc-number">2.</span> <span class="toc-text"> Defining the resource URLs</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#creating-the-list-page"><span class="toc-number">3.</span> <span class="toc-text"> Creating the list page</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#url-mapping"><span class="toc-number">3.1.</span> <span class="toc-text"> URL mapping</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#view-function-based"><span class="toc-number">3.2.</span> <span class="toc-text"> View (function-based)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#staticfiles"><span class="toc-number">4.</span> <span class="toc-text"> Staticfiles</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#template"><span class="toc-number">5.</span> <span class="toc-text"> Template</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#referencing-static-files-in-templates"><span class="toc-number">5.1.</span> <span class="toc-text"> Referencing static files in templates</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#base-templates"><span class="toc-number">5.2.</span> <span class="toc-text"> Base templates</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#extending-templates"><span class="toc-number">5.3.</span> <span class="toc-text"> Extending templates</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#configuring-where-to-find-the-templates"><span class="toc-number">5.4.</span> <span class="toc-text"> Configuring where to find the templates</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#templatetags"><span class="toc-number">6.</span> <span class="toc-text"> TemplateTags</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#cycle"><span class="toc-number">6.1.</span> <span class="toc-text"> Cycle</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#linebreaks"><span class="toc-number">6.2.</span> <span class="toc-text"> linebreaks</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#truncatewords"><span class="toc-number">6.3.</span> <span class="toc-text"> Truncatewords</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#references"><span class="toc-number">7.</span> <span class="toc-text"> REFERENCES</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/Lang/es/duo_es/" title="No title"><img src="https://cdn.jsdelivr.net/gh/joaxin/img_bed/img/cover/cover_seeds.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="No title"/></a><div class="content"><a class="title" href="/Lang/es/duo_es/" title="No title">No title</a><time datetime="2020-06-29T03:44:49.224Z" title="Created 2020-06-29 11:44:49">2020-06-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/Lang/kl/duo_kl001_intro/" title="Klingon- Vol.1 - Introduction"><img src="https://cdn.jsdelivr.net/gh/joaxin/img_bed/img/cover/cover_little_girl_phone.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Klingon- Vol.1 - Introduction"/></a><div class="content"><a class="title" href="/Lang/kl/duo_kl001_intro/" title="Klingon- Vol.1 - Introduction">Klingon- Vol.1 - Introduction</a><time datetime="2020-06-26T16:00:00.000Z" title="Created 2020-06-27 00:00:00">2020-06-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/Life/apps/life_apps_android_list/" title="安卓 | 装机必备清单及习惯步骤"><img src="https://i.postimg.cc/KYPmhV8w/android-new-logo.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="安卓 | 装机必备清单及习惯步骤"/></a><div class="content"><a class="title" href="/Life/apps/life_apps_android_list/" title="安卓 | 装机必备清单及习惯步骤">安卓 | 装机必备清单及习惯步骤</a><time datetime="2020-06-20T04:29:10.462Z" title="Created 2020-06-20 12:29:10">2020-06-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/Pysnista/Intro/files/py_pillow/" title="Python - 操作图像"><img src="https://cdn.jsdelivr.net/gh/joaxin/img_bed/img/cover/cover_little_girl_phone.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Python - 操作图像"/></a><div class="content"><a class="title" href="/Pysnista/Intro/files/py_pillow/" title="Python - 操作图像">Python - 操作图像</a><time datetime="2020-05-02T16:00:00.000Z" title="Created 2020-05-03 00:00:00">2020-05-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/Pysnista/Intro/files/py_files_pdf_word/" title="Python - PDF &amp; Word"><img src="https://i.loli.net/2020/07/09/6ALoRXnITgcuvy2.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Python - PDF &amp; Word"/></a><div class="content"><a class="title" href="/Pysnista/Intro/files/py_files_pdf_word/" title="Python - PDF &amp; Word">Python - PDF &amp; Word</a><time datetime="2020-04-12T16:00:00.000Z" title="Created 2020-04-13 00:00:00">2020-04-13</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://cdn.jsdelivr.net/gh/joaxin/img_bed/img/cover/cover_erol-ahmed-unsplash.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By Joaxin</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Refine, the Life</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="font-plus" type="button" title="Increase font size"><i class="fas fa-plus"></i></button><button id="font-minus" type="button" title="Decrease font size"><i class="fas fa-minus"></i></button><button id="translateLink" type="button" title="Switch Between Traditional Chinese And Simplified Chinese">繁</button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="chat_btn" type="button" title="rightside.chat_btn"><i class="fas fa-sms"></i></button><a id="to_comment" href="#post-comment" title="Scroll To Comments"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">Local search</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>if (document.getElementsByClassName('mermaid').length) {
  if (window.mermaidJsLoad) mermaid.init()
  else {
    getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(() => {
      window.mermaidJsLoad = true
      mermaid.initialize({
        theme: 'default',
      })
      false && mermaid.init()
    })
  }
}</script></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="fasle"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script>(function(i,s,o,g,r,a,m){i["DaoVoiceObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;a.charset="utf-8";m.parentNode.insertBefore(a,m)})(window,document,"script",('https:' == document.location.protocol ? 'https:' : 'http:') + "//widget.daovoice.io/widget/fae45343.js","daovoice")
</script><script>var isChatBtn = true
daovoice('init', {
  app_id: 'fae45343',},{
  launcher: { 
     disableLauncherIcon: isChatBtn // 悬浮 ICON 是否显示
  },
});
daovoice('update');

if (isChatBtn) {
  var chatBtnFn = () => {
    var chatBtn = document.getElementById("chat_btn")
    chatBtn.addEventListener("click", function(){
      daovoice('show')
    });
  }
  chatBtnFn()
} else {
  if (true) {
    function chatBtnHide () {
      daovoice('update', {},{
        launcher: { 
        disableLauncherIcon: true // 悬浮 ICON 是否显示
        },
      });
    }
    function chatBtnShow () {
      daovoice('update', {},{
        launcher: { 
        disableLauncherIcon: false // 悬浮 ICON 是否显示
        },
      });
    }
  }
}</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>