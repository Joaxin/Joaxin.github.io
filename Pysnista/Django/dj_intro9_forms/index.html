<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Django Introduction Part9 - Working with forms | Pinsflora</title><meta name="keywords" content="Django"><meta name="author" content="Joaxin"><meta name="copyright" content="Joaxin"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="In this article, we&#39;re going to show you a few of the ways you can create and work with forms, and in particular, how the generic editing form views can significantly reduce the amount of work you nee">
<meta property="og:type" content="article">
<meta property="og:title" content="Django Introduction Part9 - Working with forms">
<meta property="og:url" content="https://u.pinsflora.xyz/Pysnista/Django/dj_intro9_forms/index.html">
<meta property="og:site_name" content="Pinsflora">
<meta property="og:description" content="In this article, we&#39;re going to show you a few of the ways you can create and work with forms, and in particular, how the generic editing form views can significantly reduce the amount of work you nee">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/joaxin/img_bed/img/cover/cover_erol-ahmed-unsplash.jpg">
<meta property="article:published_time" content="2018-01-23T16:00:00.000Z">
<meta property="article:modified_time" content="2020-09-04T16:00:00.000Z">
<meta property="article:author" content="Joaxin">
<meta property="article:tag" content="Django">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/joaxin/img_bed/img/cover/cover_erol-ahmed-unsplash.jpg"><link rel="shortcut icon" href="/img/favicon-32x32.png"><link rel="canonical" href="https://u.pinsflora.xyz/Pysnista/Django/dj_intro9_forms/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><script async="async" src="https://www.googletagmanager.com/gtag/js?id=UA-177831205-1"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-177831205-1');
</script><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: {"limitDay":600,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'days',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"Traditional Chinese Activated Manually","cht_to_chs":"Simplified Chinese Activated Manually","day_to_night":"Dark Mode Activated Manually","night_to_day":"Light Mode Activated Manually","bgLight":"#49b1f5","bgDark":"#2d3035","position":"bottom-left"},
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2020-09-05 00:00:00'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const fontSizeVal = saveToLocal.get('global-font-size')
    if (fontSizeVal !== undefined) {
      document.documentElement.style.setProperty('--global-font-size', fontSizeVal + 'px')
    }
    })(window)</script><meta name="generator" content="Hexo 5.3.0"><link rel="alternate" href="/atom.xml" title="Pinsflora" type="application/atom+xml">
</head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="https://avatars2.githubusercontent.com/u/8346164?s=460&amp;v=4" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">340</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">Tags</div><div class="length-num">110</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">Categories</div><div class="length-num">34</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-list"></i><span> List</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/Galleries"><i class="fa-fw /gallery/"></i><span> 0</span></a></li><li><a class="site-page child" href="/Movie"><i class="fa-fw /movies/"></i><span> 1</span></a></li><li><a class="site-page child" href="/Games"><i class="fa-fw /games/"></i><span> 2</span></a></li><li><a class="site-page child" href="/Tools"><i class="fa-fw /tools/"></i><span> 3</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://cdn.jsdelivr.net/gh/joaxin/img_bed/img/cover/cover_erol-ahmed-unsplash.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Pinsflora</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-list"></i><span> List</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/Galleries"><i class="fa-fw /gallery/"></i><span> 0</span></a></li><li><a class="site-page child" href="/Movie"><i class="fa-fw /movies/"></i><span> 1</span></a></li><li><a class="site-page child" href="/Games"><i class="fa-fw /games/"></i><span> 2</span></a></li><li><a class="site-page child" href="/Tools"><i class="fa-fw /tools/"></i><span> 3</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Django Introduction Part9 - Working with forms</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2018-01-23T16:00:00.000Z" title="Created 2018-01-24 00:00:00">2018-01-24</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2020-09-04T16:00:00.000Z" title="Updated 2020-09-05 00:00:00">2020-09-05</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Python/">Python</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Python/Django/">Django</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">Word count:</span><span class="word-count">6.6k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">Reading time:</span><span>40min</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Django Introduction Part9 - Working with forms"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post View:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>An HTML Form is a group of one or more fields/widgets on a web page, which can be used to collect information from users for submission to a server. Forms are a flexible mechanism for collecting user input because there are suitable widgets for entering many different types of data, including text boxes, checkboxes, radio buttons, date pickers, etc.</p>
<p>Forms are also a relatively secure way of sharing data with the server, as they allow us to send data in <code>POST</code> requests with cross-site request forgery(CSRF)  protection.</p>
<p>Working with forms can be complicated! Developers need to write HTML for the form, validate and properly sanitise entered data on the server (and possibly also in the browser), repost the form with error messages to inform users of any invalid fields, handle the data when it has successfully been submitted, and finally respond to the user in some way to indicate success.</p>
<h1 id="form-fields"><a class="markdownIt-Anchor" href="#form-fields"></a> Form fields¶</h1>
<p>The <code>Form</code> class is the heart of Django’s form handling system. It specifies the fields in the form, their layout, display widgets, labels, initial values, valid values, and (once validated) the error messages associated with invalid fields. The class also provides methods for rendering itself in templates using predefined formats (tables, lists, etc.) or for getting the value of any element (enabling fine-grained manual rendering).</p>
<h2 id="declaring-a-form"><a class="markdownIt-Anchor" href="#declaring-a-form"></a> Declaring a Form</h2>
<p>The declaration syntax for a <code>Form</code> is very similar to that for declaring a <code>Model</code>, and shares the same field types (and some similar parameters). This makes sense because in both cases we need to ensure that each field handles the right types of data, is constrained to valid data, and has a description for display/documentation.</p>
<p>Form data is stored in an application’s <code>forms.py</code> file,to create a <code>Form</code>, we import the <code>forms</code> library, derive from the <code>Form</code> class, and declare the form’s fields. A very basic email form class would be like this :</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django <span class="keyword">import</span> forms</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">EmailCommentsForm</span>(<span class="params">forms.Form</span>):</span></span><br><span class="line">    name = forms.CharField(max_length=<span class="number">50</span>)</span><br><span class="line">    email = forms.EmailField(help_text=<span class="string">"Enter a valid email address."</span>)</span><br><span class="line">    comments = forms.CharField(required=<span class="literal">False</span>, widget=forms.Textarea)</span><br></pre></td></tr></tbody></table></figure>
<p>Although the primary way you’ll use <code>Field</code> classes is in <code>Form</code> classes, you can also instantiate them and use them directly to get a better idea of how they work. Each <code>Field</code> instance has a <code>clean()</code> method, which takes a single argument and either raises a <code>django.core.exceptions.ValidationError</code> exception or returns the clean value:</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django <span class="keyword">import</span> forms</span><br><span class="line">f = forms.EmailField()</span><br><span class="line">f.clean(<span class="string">'foo@example.com'</span>)</span><br><span class="line"><span class="comment"># 'foo@example.com'</span></span><br><span class="line">f.clean(<span class="string">'invalid email address'</span>)</span><br><span class="line"><span class="comment"># Traceback (most recent call last):</span></span><br><span class="line"><span class="comment"># ...</span></span><br><span class="line"><span class="comment"># ValidationError: ['Enter a valid email address.']</span></span><br></pre></td></tr></tbody></table></figure>
<h2 id="core-field-arguments"><a class="markdownIt-Anchor" href="#core-field-arguments"></a> Core field arguments</h2>
<p>The arguments that are common to most fields are listed below :</p>
<ul>
<li>
<p>required: If <code>True</code>, the field may not be left blank or given a <code>None</code> value. Fields are required by default, so you would set <code>required=False</code> to allow blank values in the form.</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django <span class="keyword">import</span> forms</span><br><span class="line">f = forms.CharField()</span><br><span class="line">f.clean(<span class="string">'foo'</span>)</span><br><span class="line"><span class="comment"># 'foo'</span></span><br><span class="line">f.clean(<span class="string">''</span>)</span><br><span class="line">f.clean(<span class="literal">None</span>)</span><br><span class="line"><span class="comment"># Traceback (most recent call last):</span></span><br><span class="line"><span class="comment"># ...</span></span><br><span class="line"><span class="comment"># ValidationError: ['This field is required.']</span></span><br><span class="line">f.clean(<span class="string">' '</span>)</span><br><span class="line"><span class="comment"># ' '</span></span><br><span class="line">f.clean(<span class="literal">True</span>)</span><br><span class="line"><span class="comment"># 'True'</span></span><br><span class="line"></span><br><span class="line">f2 = forms.CharField(required=<span class="literal">False</span>)</span><br><span class="line">f2.clean(<span class="string">''</span>)</span><br><span class="line"><span class="comment"># ''</span></span><br><span class="line">f2.clean(<span class="literal">None</span>)</span><br><span class="line"><span class="comment"># ''</span></span><br></pre></td></tr></tbody></table></figure>
</li>
<li>
<p>label: The label to use when rendering the field in HTML. If a label is not specified, Django will generate one from the field name by capitalizing the first letter and replacing underscores with spaces .</p>
<p>Here’s a full example <code>Form</code> that implements <code>label</code> for two of its fields. We’ve specified <code>auto_id=False</code> to simplify the output:</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django <span class="keyword">import</span> forms</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CommentForm</span>(<span class="params">forms.Form</span>):</span></span><br><span class="line">    name = forms.CharField(label=<span class="string">'Your name'</span>)</span><br><span class="line">    url = forms.URLField(label=<span class="string">'Your website'</span>, required=<span class="literal">False</span>)</span><br><span class="line">    comment = forms.CharField()</span><br><span class="line">f = CommentForm(auto_id=<span class="literal">False</span>)</span><br><span class="line">print(f)</span><br><span class="line"><span class="comment"># &lt;tr&gt;&lt;th&gt;Your name:&lt;/th&gt;&lt;td&gt;&lt;input type="text" name="name" required&gt;&lt;/td&gt;&lt;/tr&gt;</span></span><br><span class="line"><span class="comment"># &lt;tr&gt;&lt;th&gt;Your website:&lt;/th&gt;&lt;td&gt;&lt;input type="url" name="url"&gt;&lt;/td&gt;&lt;/tr&gt;</span></span><br><span class="line"><span class="comment"># &lt;tr&gt;&lt;th&gt;Comment:&lt;/th&gt;&lt;td&gt;&lt;input type="text" name="comment" required&gt;&lt;/td&gt;&lt;/tr&gt;</span></span><br></pre></td></tr></tbody></table></figure>
</li>
<li>
<p>label_suffix: By default a colon is displayed after the label . This argument allows you to specify a different suffix containing other character.</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ContactForm</span>(<span class="params">forms.Form</span>):</span></span><br><span class="line">    age = forms.IntegerField()</span><br><span class="line">    nationality = forms.CharField()</span><br><span class="line">    captcha_answer = forms.IntegerField(label=<span class="string">'2 + 2'</span>, label_suffix=<span class="string">' ='</span>)</span><br><span class="line">f = ContactForm(label_suffix=<span class="string">'?'</span>)</span><br><span class="line">print(f.as_p())</span><br><span class="line"><span class="comment"># &lt;p&gt;&lt;label for="id_age"&gt;Age?&lt;/label&gt; &lt;input id="id_age" name="age" type="number" required&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="comment"># &lt;p&gt;&lt;label for="id_nationality"&gt;Nationality?&lt;/label&gt; &lt;input id="id_nationality" name="nationality" type="text" required&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="comment"># &lt;p&gt;&lt;label for="id_captcha_answer"&gt;2 + 2 =&lt;/label&gt; &lt;input id="id_captcha_answer" name="captcha_answer" type="number" required&gt;&lt;/p&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<p>Use the form separately in templates:</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">{{ f.as_p }}</span><br><span class="line"></span><br><span class="line">{% for field in f %}</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        {{ field.errors }}</span><br><span class="line">        {{ field.label_tag }} {{ field }}</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">{% endfor %}</span><br></pre></td></tr></tbody></table></figure>
</li>
<li>
<p>initial: The initial value for the field when the form is displayed.</p>
<p>The use-case for this is when you want to display an “empty” form in which a field is initialized to a particular value. For example:</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django <span class="keyword">import</span> forms</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CommentForm</span>(<span class="params">forms.Form</span>):</span></span><br><span class="line">    name = forms.CharField(initial=<span class="string">'Your name'</span>)</span><br><span class="line">    url = forms.URLField(initial=<span class="string">'http://'</span>)</span><br><span class="line">    comment = forms.CharField()</span><br><span class="line">f = CommentForm(auto_id=<span class="literal">False</span>)</span><br><span class="line">print(f)</span><br><span class="line"><span class="comment"># &lt;tr&gt;&lt;th&gt;Name:&lt;/th&gt;&lt;td&gt;&lt;input type="text" name="name" value="Your name" required&gt;&lt;/td&gt;&lt;/tr&gt;</span></span><br><span class="line"><span class="comment"># &lt;tr&gt;&lt;th&gt;Url:&lt;/th&gt;&lt;td&gt;&lt;input type="url" name="url" value="http://" required&gt;&lt;/td&gt;&lt;/tr&gt;</span></span><br><span class="line"><span class="comment"># &lt;tr&gt;&lt;th&gt;Comment:&lt;/th&gt;&lt;td&gt;&lt;input type="text" name="comment" required&gt;&lt;/td&gt;&lt;/tr&gt;</span></span><br><span class="line">f.is_bound</span><br><span class="line"><span class="comment"># False</span></span><br></pre></td></tr></tbody></table></figure>
<p>You may be thinking, why not just pass a dictionary of the initial values as data when displaying the form? Well, if you do that, you’ll trigger validation, and the HTML output will include any validation errors:</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CommentForm</span>(<span class="params">forms.Form</span>):</span></span><br><span class="line">    name = forms.CharField()</span><br><span class="line">    url = forms.URLField()</span><br><span class="line">    comment = forms.CharField()</span><br><span class="line">default_data = {<span class="string">'name'</span>: <span class="string">'Your name'</span>, <span class="string">'url'</span>: <span class="string">'http://'</span>}</span><br><span class="line">f = CommentForm(default_data, auto_id=<span class="literal">False</span>)</span><br><span class="line">print(f)</span><br><span class="line"><span class="comment"># &lt;tr&gt;&lt;th&gt;Name:&lt;/th&gt;&lt;td&gt;&lt;input type="text" name="name" value="Your name" required&gt;&lt;/td&gt;&lt;/tr&gt;</span></span><br><span class="line"><span class="comment"># &lt;tr&gt;&lt;th&gt;Url:&lt;/th&gt;&lt;td&gt;&lt;ul class="errorlist"&gt;&lt;li&gt;Enter a valid URL.&lt;/li&gt;&lt;/ul&gt;&lt;input type="url" # name="url" value="http://" required&gt;&lt;/td&gt;&lt;/tr&gt;</span></span><br><span class="line"><span class="comment"># &lt;tr&gt;&lt;th&gt;Comment:&lt;/th&gt;&lt;td&gt;&lt;ul class="errorlist"&gt;&lt;li&gt;This field is required.&lt;/li&gt;&lt;/ul&gt;&lt;input # type="text" name="comment" required&gt;&lt;/td&gt;&lt;/tr&gt;</span></span><br><span class="line">f.is_bound</span><br><span class="line"><span class="comment"># True</span></span><br></pre></td></tr></tbody></table></figure>
<p>This is why <code>initial</code> values are only displayed for unbound forms. For bound forms, the HTML output will use the bound data.</p>
<blockquote>
<p>A Form instance is either bound to a set of data, or unbound.</p>
</blockquote>
<blockquote>
<p>If it’s <strong>bound</strong> to a set of data, it’s capable of validating that data and rendering the form as HTML with the data displayed in the HTML.<br>
If it’s <strong>unbound</strong>, it cannot do validation (because there’s no data to validate!), but it can still render the blank form as HTML.</p>
</blockquote>
<p>Also note that <code>initial</code> values are <em>not</em> used as “fallback” data in validation if a particular field’s value is not given. <code>initial</code> values are <em>only</em> intended for initial form display:</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CommentForm</span>(<span class="params">forms.Form</span>):</span></span><br><span class="line">    name = forms.CharField(initial=<span class="string">'Your name'</span>)</span><br><span class="line">    url = forms.URLField(initial=<span class="string">'http://'</span>)</span><br><span class="line">    comment = forms.CharField()</span><br><span class="line">data = {<span class="string">'name'</span>: <span class="string">''</span>, <span class="string">'url'</span>: <span class="string">''</span>, <span class="string">'comment'</span>: <span class="string">'Foo'</span>}</span><br><span class="line">f = CommentForm(data)</span><br><span class="line">f.is_valid()</span><br><span class="line"><span class="comment"># False</span></span><br><span class="line"><span class="comment">## The form does *not* fall back to using the initial values.</span></span><br></pre></td></tr></tbody></table></figure>
<p>Access the errors attribute to get a dictionary of error messages</p>
<p>The form’s data will be validated the first time either you call is_valid() or access errors.</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">f.errors</span><br><span class="line"><span class="comment"># {'url': ['This field is required.'], 'name': ['This field is required.']}</span></span><br><span class="line">f.errors.as_data()</span><br><span class="line"><span class="comment"># {'name': [ValidationError(['This field is required.'])], 'url': [ValidationError(['This field is required.'])], 'comment': [ValidationError(['This field is required.'])]}</span></span><br><span class="line">f.errors.as_json()</span><br><span class="line"><span class="comment"># '{"name": [{"message": "This field is required.", "code": "required"}], "url": [{"message": "This field is required.", "code": "required"}], "comment": [{"message": "This field is required.", "code": "required"}]}'</span></span><br></pre></td></tr></tbody></table></figure>
<p>Instead of a constant, you can also pass any callable:</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DateForm</span>(<span class="params">forms.Form</span>):</span></span><br><span class="line">    day = forms.DateField(initial=datetime.date.today)</span><br><span class="line">print(DateForm())</span><br><span class="line"><span class="comment"># &lt;tr&gt;&lt;th&gt;Day:&lt;/th&gt;&lt;td&gt;&lt;input type="text" name="day" value="12/23/2008" required&gt;&lt;td&gt;&lt;/tr&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<p>The callable will be evaluated only when the unbound form is displayed, not when it is defined.</p>
</li>
<li>
<p>widget: The display widget to use.</p>
<p>The <code>widget</code> argument lets you specify a <code>Widget</code> class to use when rendering this <code>Field</code>. See <a target="_blank" rel="noopener" href="https://docs.djangoproject.com/en/3.1/ref/forms/widgets/">Widgets</a> for more information.</p>
</li>
<li>
<p>help_text : Additional text that can be displayed in forms to explain how to use the field.</p>
<p>Here’s a full example <code>Form</code> that implements <code>help_text</code> for two of its fields. We’ve specified <code>auto_id=False</code> to simplify the output:</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django <span class="keyword">import</span> forms</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HelpTextContactForm</span>(<span class="params">forms.Form</span>):</span></span><br><span class="line">     subject = forms.CharField(max_length=<span class="number">100</span>, help_text=<span class="string">'100 characters max.'</span>)</span><br><span class="line">     message = forms.CharField()</span><br><span class="line">     sender = forms.EmailField(help_text=<span class="string">'A valid email address, please.'</span>)</span><br><span class="line">     cc_myself = forms.BooleanField(required=<span class="literal">False</span>)</span><br><span class="line">f = HelpTextContactForm(auto_id=<span class="literal">False</span>)</span><br><span class="line">print(f.as_table())</span><br><span class="line"><span class="comment"># &lt;tr&gt;&lt;th&gt;Subject:&lt;/th&gt;&lt;td&gt;&lt;input type="text" name="subject" maxlength="100" required&gt;&lt;br&gt;&lt;span class="helptext"&gt;100 characters max.&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;</span></span><br><span class="line"><span class="comment"># &lt;tr&gt;&lt;th&gt;Message:&lt;/th&gt;&lt;td&gt;&lt;input type="text" name="message" required&gt;&lt;/td&gt;&lt;/tr&gt;</span></span><br><span class="line"><span class="comment"># &lt;tr&gt;&lt;th&gt;Sender:&lt;/th&gt;&lt;td&gt;&lt;input type="email" name="sender" required&gt;&lt;br&gt;A valid email address, please.&lt;/td&gt;&lt;/tr&gt;</span></span><br><span class="line"><span class="comment"># &lt;tr&gt;&lt;th&gt;Cc myself:&lt;/th&gt;&lt;td&gt;&lt;input type="checkbox" name="cc_myself"&gt;&lt;/td&gt;&lt;/tr&gt;</span></span><br><span class="line">print(f.as_ul())</span><br><span class="line"><span class="comment"># &lt;li&gt;Subject: &lt;input type="text" name="subject" maxlength="100" required&gt; &lt;span class="helptext"&gt;100 characters max.&lt;/span&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="comment"># &lt;li&gt;Message: &lt;input type="text" name="message" required&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="comment"># &lt;li&gt;Sender: &lt;input type="email" name="sender" required&gt; A valid email address, please.&lt;/li&gt;</span></span><br><span class="line"><span class="comment"># &lt;li&gt;Cc myself: &lt;input type="checkbox" name="cc_myself"&gt;&lt;/li&gt;</span></span><br><span class="line">print(f.as_p())</span><br><span class="line"><span class="comment"># &lt;p&gt;Subject: &lt;input type="text" name="subject" maxlength="100" required&gt; &lt;span class="helptext"&gt;100 characters max.&lt;/span&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="comment"># &lt;p&gt;Message: &lt;input type="text" name="message" required&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="comment"># &lt;p&gt;Sender: &lt;input type="email" name="sender" required&gt; A valid email address, please.&lt;/p&gt;</span></span><br><span class="line"><span class="comment"># &lt;p&gt;Cc myself: &lt;input type="checkbox" name="cc_myself"&gt;&lt;/p&gt;</span></span><br><span class="line"></span><br><span class="line">data = {<span class="string">'subject'</span>: <span class="string">'hello'</span>,</span><br><span class="line">         <span class="string">'message'</span>: <span class="string">'Hi there'</span>,</span><br><span class="line">         <span class="string">'sender'</span>: <span class="string">'foo@example.com'</span>,</span><br><span class="line">         <span class="string">'cc_myself'</span>: <span class="literal">True</span>}</span><br><span class="line">f = HelpTextContactForm(data)</span><br><span class="line">f.is_valid()</span><br><span class="line"><span class="comment"># True</span></span><br></pre></td></tr></tbody></table></figure>
</li>
<li>
<p>error_messages: A list of error messages for the field. You can override these with your own messages if needed.</p>
<p>The <code>error_messages</code> argument lets you override the default messages that the field will raise. Pass in a dictionary with keys matching the error messages you want to override.</p>
<p>And here is a custom error message:</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">name = forms.CharField(error_messages={<span class="string">'required'</span>: <span class="string">'Please enter your name'</span>})</span><br><span class="line">name.clean(<span class="string">''</span>)</span><br><span class="line"><span class="comment"># Traceback (most recent call last):</span></span><br><span class="line"><span class="comment">#   ...</span></span><br><span class="line"><span class="comment"># ValidationError: ['Please enter your name']</span></span><br></pre></td></tr></tbody></table></figure>
</li>
<li>
<p>validators: A list of functions that will be called on the field when it is validated.</p>
<p>See the <a target="_blank" rel="noopener" href="https://docs.djangoproject.com/en/3.1/ref/validators/">validators documentation</a> for more information.</p>
</li>
<li>
<p>localize: Enables the localization of form data input .</p>
<p>See the <a target="_blank" rel="noopener" href="https://docs.djangoproject.com/en/3.1/topics/i18n/formatting/">format localization</a> documentation for more information.</p>
</li>
<li>
<p>disabled: The field is displayed but its value cannot be edited if this is <code>True</code>. The default is <code>False</code>.</p>
</li>
</ul>
<p>The <code>has_changed()</code> method is used to determine if the field value has changed from the initial value. Returns <code>True</code> or <code>False</code>.</p>
<p>See the <a target="_blank" rel="noopener" href="https://docs.djangoproject.com/en/3.1/ref/forms/api/#django.forms.Form.has_changed"><code>Form.has_changed()</code></a> documentation for more information.</p>
<h2 id="built-in-field-classes"><a class="markdownIt-Anchor" href="#built-in-field-classes"></a> Built-in Field classes</h2>
<p>Naturally, the <code>forms</code> library comes with a set of <code>Field</code> classes that represent common validation needs. This section documents each built-in field.</p>
<p>For each field, we describe the default widget used if you don’t specify <code>widget</code>. We also specify the value returned when you provide an empty value.</p>
<h3 id="booleanfield"><a class="markdownIt-Anchor" href="#booleanfield"></a> BooleanField</h3>
<ul>
<li>
<p>Default widget: <code>CheckboxInput</code></p>
<ul>
<li><code>input_type</code>: <code>'checkbox'</code></li>
<li><code>template_name</code>: <code>'django/forms/widgets/checkbox.html'</code></li>
<li>Renders as: <code>&lt;input type="checkbox" ...&gt;</code></li>
</ul>
<p>Takes one optional argument:</p>
<ul>
<li>
<p><code>check_test</code></p>
<p>A callable that takes the value of the <code>CheckboxInput</code> and returns <code>True</code> if the checkbox should be checked for that value.</p>
</li>
</ul>
</li>
<li>
<p>Empty value: <code>False</code></p>
</li>
<li>
<p>Normalizes to: A Python <code>True</code> or <code>False</code> value.</p>
</li>
<li>
<p>Validates that the value is <code>True</code> (e.g. the check box is checked) if the field has <code>required=True</code>.</p>
</li>
<li>
<p>Error message keys: <code>required</code></p>
</li>
</ul>
<blockquote>
<p>If you want to include a boolean in your form that can be either <code>True</code> or <code>False</code> (e.g. a checked or unchecked checkbox), you must remember to pass in <code>required=False</code> when creating the <code>BooleanField</code>.</p>
</blockquote>
<h3 id="charfield"><a class="markdownIt-Anchor" href="#charfield"></a> CharField</h3>
<ul>
<li>Default widget: <code>TextInput</code>
<ul>
<li><code>input_type</code>: <code>'text'</code></li>
<li><code>template_name</code>: <code>'django/forms/widgets/text.html'</code></li>
<li>Renders as: <code>&lt;input type="text" ...&gt;</code></li>
</ul>
</li>
<li>Empty value: Whatever you’ve given as <code>empty_value</code>.</li>
<li>Normalizes to: A string.</li>
<li>Uses <code>MaxLengthValidator</code> and <code>MinLengthValidator</code> if <code>max_length</code> and <code>min_length</code> are provided. Otherwise, all inputs are valid.</li>
<li>Error message keys: <code>required</code>, <code>max_length</code>, <code>min_length</code></li>
</ul>
<p>Has four optional arguments for validation:</p>
<ul>
<li>
<p><code>max_length</code> / <code>min_length</code></p>
<p>If provided, these arguments ensure that the string is at most or at least the given length.</p>
</li>
<li>
<p><code>strip</code></p>
<p>If <code>True</code> , the value will be stripped of leading and trailing whitespace.</p>
</li>
<li>
<p><code>empty_value</code></p>
<p>The value to use to represent “empty”. Defaults to an empty string.</p>
</li>
</ul>
<h3 id="choicefield"><a class="markdownIt-Anchor" href="#choicefield"></a> ChoiceField</h3>
<ul>
<li>Default widget: <code>Select</code>
<ul>
<li><code>template_name</code>: <code>'django/forms/widgets/select.html'</code></li>
<li><code>option_template_name</code>: <code>'django/forms/widgets/select_option.html'</code></li>
<li>Renders as: <code>&lt;select&gt;&lt;option ...&gt;...&lt;/select&gt;</code></li>
</ul>
</li>
<li>Empty value: <code>''</code> (an empty string)</li>
<li>Normalizes to: A string.</li>
<li>Validates that the given value exists in the list of choices.</li>
<li>Error message keys: <code>required</code>, <code>invalid_choice</code></li>
</ul>
<p>The <code>invalid_choice</code> error message may contain <code>%(value)s</code>, which will be replaced with the selected choice.</p>
<p>Also see  <a target="_blank" rel="noopener" href="https://docs.djangoproject.com/en/3.1/ref/forms/fields/#typedchoicefield"><code>TypedChoiceField</code></a>, <a target="_blank" rel="noopener" href="https://docs.djangoproject.com/en/3.1/ref/forms/fields/#multiplechoicefield"><code>MultipleChoiceField</code></a>, <a target="_blank" rel="noopener" href="https://docs.djangoproject.com/en/3.1/ref/forms/fields/#typedmultiplechoicefield"><code>TypedMultipleChoiceField</code></a></p>
<h3 id="datefielddatetimefieldtimefield"><a class="markdownIt-Anchor" href="#datefielddatetimefieldtimefield"></a> DateField/DateTimeField/TimeField</h3>
<ul>
<li>Default widget: <code>DateInput</code>
<ul>
<li><code>input_type</code>: <code>'text'</code></li>
<li><code>template_name</code>: <code>'django/forms/widgets/date.html(datetime.html/time.html)'</code></li>
<li>Renders as: <code>&lt;input type="text" ...&gt;</code></li>
</ul>
</li>
<li>Empty value: <code>None</code></li>
<li>Normalizes to: A Python <code>datetime.date/datetime.datetime</code> object.</li>
<li>Validates that the given value is a datetime format.</li>
<li>Error message keys: <code>required</code>, <code>invalid</code></li>
</ul>
<p>Takes one optional argument:</p>
<ul>
<li>
<p><code>input_formats</code></p>
<p>A list of formats used to attempt to convert a string to a valid <code>datetime.date</code> object.e.g. YYYY-MM-DD (2016-11-06), MM/DD/YYYY (02/26/2016), MM/DD/YY (10/25/16), and will be rendered using the default widget.</p>
</li>
</ul>
<p>Also see  <a target="_blank" rel="noopener" href="https://docs.djangoproject.com/en/3.1/ref/forms/fields/#splitdatetimefield"><code>SplitDateTimeField</code></a>.</p>
<h3 id="decimalfield"><a class="markdownIt-Anchor" href="#decimalfield"></a> DecimalField</h3>
<ul>
<li>Default widget: <code>NumberInput</code>when <code>Field.localize</code> is <code>False</code>, else <code>TextInput</code>.
<ul>
<li><code>input_type</code>: <code>'number'</code></li>
<li><code>template_name</code>: <code>'django/forms/widgets/number.html'</code></li>
<li>Renders as: <code>&lt;input type="number" ...&gt;</code></li>
</ul>
</li>
<li>Empty value: <code>None</code></li>
<li>Normalizes to: A Python <code>decimal</code>.</li>
<li>Validates that the given value is a decimal. Uses <code>MaxValueValidator</code> and <code>MinValueValidator</code> if <code>max_value</code> and <code>min_value</code> are provided. Leading and trailing whitespace is ignored.</li>
<li>Error message keys: <code>required</code>, <code>invalid</code>, <code>max_value</code>, <code>min_value</code>, <code>max_digits</code>, <code>max_decimal_places</code>, <code>max_whole_digits</code></li>
</ul>
<p>The <code>max_value</code> and <code>min_value</code> error messages may contain <code>%(limit_value)s</code>, which will be substituted by the appropriate limit. Similarly, the <code>max_digits</code>, <code>max_decimal_places</code> and <code>max_whole_digits</code> error messages may contain <code>%(max)s</code>.</p>
<p>Takes four optional arguments:</p>
<ul>
<li><code>max_value</code>/<code>min_value</code></li>
</ul>
<p>These control the range of values permitted in the field, and should be given as <code>decimal.Decimal</code> values.</p>
<ul>
<li>
<p><code>max_digits</code></p>
<p>The maximum number of digits (those before the decimal point plus those after the decimal point, with leading zeros stripped) permitted in the value.</p>
</li>
<li>
<p><code>decimal_places</code></p>
<p>The maximum number of decimal places permitted.</p>
</li>
</ul>
<p>Also see <a target="_blank" rel="noopener" href="https://docs.djangoproject.com/en/3.1/ref/forms/widgets/#numberinput">https://docs.djangoproject.com/en/3.1/ref/forms/widgets/#numberinput</a> and <a target="_blank" rel="noopener" href="https://docs.djangoproject.com/en/3.1/ref/forms/fields/#integerfield">https://docs.djangoproject.com/en/3.1/ref/forms/fields/#integerfield</a></p>
<h3 id="durationfield"><a class="markdownIt-Anchor" href="#durationfield"></a> DurationField</h3>
<p>See <a target="_blank" rel="noopener" href="https://docs.djangoproject.com/en/3.1/ref/forms/fields/#durationfield">https://docs.djangoproject.com/en/3.1/ref/forms/fields/#durationfield</a></p>
<h3 id="emailfield"><a class="markdownIt-Anchor" href="#emailfield"></a> EmailField</h3>
<ul>
<li>Default widget: <code>EmailInput</code>
<ul>
<li><code>input_type</code>: <code>'email'</code></li>
<li><code>template_name</code>: <code>'django/forms/widgets/email.html'</code></li>
<li>Renders as: <code>&lt;input type="email" ...&gt;</code></li>
</ul>
</li>
<li>Empty value: Whatever you’ve given as <code>empty_value</code>.</li>
<li>Normalizes to: A string.</li>
<li>Uses <a target="_blank" rel="noopener" href="https://docs.djangoproject.com/en/3.1/ref/validators/#django.core.validators.EmailValidator"><code>EmailValidator</code></a> to validate that the given value is a valid email address, using a moderately complex regular expression.</li>
<li>Error message keys: <code>required</code>, <code>invalid</code></li>
</ul>
<p>Has three optional arguments <code>max_length</code>, <code>min_length</code>, and <code>empty_value</code> which work just as they do for <code>CharField</code>.</p>
<h3 id="filefield"><a class="markdownIt-Anchor" href="#filefield"></a> FileField</h3>
<ul>
<li>Default widget: <code>ClearableFileInput</code>
<ul>
<li><code>template_name</code>: <code>'django/forms/widgets/clearable_file_input.html'</code></li>
<li>Renders as: <code>&lt;input type="file" ...&gt;</code> with an additional checkbox input to clear the field’s value, if the field is not required and has initial data.</li>
</ul>
</li>
<li>Empty value: <code>None</code></li>
<li>Normalizes to: An <code>UploadedFile</code> object that wraps the file content and file name into a single object.</li>
<li>Can validate that non-empty file data has been bound to the form.</li>
<li>Error message keys: <code>required</code>, <code>invalid</code>, <code>missing</code>, <code>empty</code>, <code>max_length</code></li>
</ul>
<p>Has two optional arguments for validation, <code>max_length</code> and <code>allow_empty_file</code>. If provided, these ensure that the file name is at most the given length, and that validation will succeed even if the file content is empty.</p>
<p>To learn more about the <code>UploadedFile</code> object, see the <a target="_blank" rel="noopener" href="https://docs.djangoproject.com/en/3.1/topics/http/file-uploads/">file uploads documentation</a>.</p>
<p>When you use a <code>FileField</code> in a form, you must also remember to <a target="_blank" rel="noopener" href="https://docs.djangoproject.com/en/3.1/ref/forms/api/#binding-uploaded-files">bind the file data to the form</a>.</p>
<p>The <code>max_length</code> error refers to the length of the filename. In the error message for that key, <code>%(max)d</code> will be replaced with the maximum filename length and <code>%(length)d</code> will be replaced with the current filename length.</p>
<h3 id="filepathfield"><a class="markdownIt-Anchor" href="#filepathfield"></a> FilePathField</h3>
<p>See <a target="_blank" rel="noopener" href="https://docs.djangoproject.com/en/3.1/ref/forms/fields/#filepathfield">https://docs.djangoproject.com/en/3.1/ref/forms/fields/#filepathfield</a></p>
<h3 id="imagefield"><a class="markdownIt-Anchor" href="#imagefield"></a> ImageField</h3>
<ul>
<li>Default widget: <code>ClearableFileInput</code></li>
<li>Empty value: <code>None</code></li>
<li>Normalizes to: An <code>UploadedFile</code> object that wraps the file content and file name into a single object.</li>
<li>Validates that file data has been bound to the form. Also uses <a target="_blank" rel="noopener" href="https://docs.djangoproject.com/en/3.1/ref/validators/#django.core.validators.FileExtensionValidator"><code>FileExtensionValidator</code></a> to validate that the file extension is supported by Pillow.</li>
<li>Error message keys: <code>required</code>, <code>invalid</code>, <code>missing</code>, <code>empty</code>, <code>invalid_image</code></li>
</ul>
<p>Using an <code>ImageField</code> requires that <a target="_blank" rel="noopener" href="https://pillow.readthedocs.io/en/latest/">Pillow</a> is installed with support for the image formats you use. If you encounter a <code>corrupt image</code> error when you upload an image, it usually means that Pillow doesn’t understand its format. To fix this, install the appropriate library and reinstall Pillow.</p>
<p>After the field has been cleaned and validated, the <code>UploadedFile</code> object will have an additional <code>image</code> attribute containing the Pillow <a target="_blank" rel="noopener" href="https://pillow.readthedocs.io/en/latest/reference/Image.html">Image</a> instance used to check if the file was a valid image. Pillow closes the underlying file descriptor after verifying an image, so whilst non-image data attributes, such as <code>format</code>, <code>height</code>, and <code>width</code>, are available, methods that access the underlying image data, such as <code>getdata()</code> or <code>getpixel()</code>, cannot be used without reopening the file. For example:</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">from</span> django <span class="keyword">import</span> forms</span><br><span class="line"><span class="keyword">from</span> django.core.files.uploadedfile <span class="keyword">import</span> SimpleUploadedFile</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ImageForm</span>(<span class="params">forms.Form</span>):</span></span><br><span class="line">    img = forms.ImageField()</span><br><span class="line">file_data = {<span class="string">'img'</span>: SimpleUploadedFile(<span class="string">'test.png'</span>, &lt;file data&gt;)}</span><br><span class="line">form = ImageForm({}, file_data)</span><br><span class="line"><span class="comment">## Pillow closes the underlying file descriptor.</span></span><br><span class="line">form.is_valid()</span><br><span class="line"><span class="comment"># True</span></span><br><span class="line">image_field = form.cleaned_data[<span class="string">'img'</span>]</span><br><span class="line">image_field.image</span><br><span class="line"><span class="comment"># &lt;PIL.PngImagePlugin.PngImageFile image mode=RGBA size=191x287 at 0x7F5985045C18&gt;</span></span><br><span class="line">image_field.image.width</span><br><span class="line"><span class="comment"># 191</span></span><br><span class="line">image_field.image.height</span><br><span class="line"><span class="comment"># 287</span></span><br><span class="line">image_field.image.format</span><br><span class="line"><span class="comment"># 'PNG'</span></span><br><span class="line">image_field.image.getdata()</span><br><span class="line"><span class="comment"># Raises AttributeError: 'NoneType' object has no attribute 'seek'.</span></span><br><span class="line">image = Image.open(image_field)</span><br><span class="line">image.getdata()</span><br><span class="line"><span class="comment"># &lt;ImagingCore object at 0x7f5984f874b0&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<p>Additionally, <code>UploadedFile.content_type</code> will be updated with the image’s content type if Pillow can determine it, otherwise it will be set to <code>None</code>.</p>
<h3 id="jsonfield"><a class="markdownIt-Anchor" href="#jsonfield"></a> JSONField</h3>
<p>See <a target="_blank" rel="noopener" href="https://docs.djangoproject.com/en/3.1/ref/forms/fields/#jsonfield">https://docs.djangoproject.com/en/3.1/ref/forms/fields/#jsonfield</a></p>
<h3 id="genericipaddressfield"><a class="markdownIt-Anchor" href="#genericipaddressfield"></a> GenericIPAddressField</h3>
<p>See <a target="_blank" rel="noopener" href="https://docs.djangoproject.com/en/3.1/ref/forms/fields/#genericipaddressfield">https://docs.djangoproject.com/en/3.1/ref/forms/fields/#genericipaddressfield</a></p>
<h3 id="nullbooleanfield"><a class="markdownIt-Anchor" href="#nullbooleanfield"></a> NullBooleanField</h3>
<ul>
<li>
<p>Default widget: <code>NullBooleanSelect</code></p>
<ul>
<li><code>template_name</code>: <code>'django/forms/widgets/select.html'</code></li>
<li><code>option_template_name</code>: <code>'django/forms/widgets/select_option.html'</code></li>
</ul>
<p>Select widget with options ‘Unknown’, ‘Yes’ and ‘No’</p>
</li>
<li>
<p>Empty value: <code>None</code></p>
</li>
<li>
<p>Normalizes to: A Python <code>True</code>, <code>False</code> or <code>None</code> value.</p>
</li>
<li>
<p>Validates nothing (i.e., it never raises a <code>ValidationError</code>).</p>
</li>
</ul>
<p><code>NullBooleanField</code> may be used with widgets such as <code>Select</code>or <code>RadioSelect</code>by providing the widget <code>choices</code>:</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">NullBooleanField(</span><br><span class="line">    widget=Select(</span><br><span class="line">        choices=[</span><br><span class="line">            (<span class="string">''</span>, <span class="string">'Unknown'</span>),</span><br><span class="line">            (<span class="literal">True</span>, <span class="string">'Yes'</span>),</span><br><span class="line">            (<span class="literal">False</span>, <span class="string">'No'</span>),</span><br><span class="line">        ]</span><br><span class="line">    )</span><br><span class="line">)</span><br></pre></td></tr></tbody></table></figure>
<h3 id="regexfield"><a class="markdownIt-Anchor" href="#regexfield"></a> RegexField</h3>
<ul>
<li>Default widget: <code>TextInput</code></li>
<li>Empty value: Whatever you’ve given as <code>empty_value</code>.</li>
<li>Normalizes to: A string.</li>
<li>Uses <a target="_blank" rel="noopener" href="https://docs.djangoproject.com/en/3.1/ref/validators/#django.core.validators.RegexValidator"><code>RegexValidator</code></a> to validate that the given value matches a certain regular expression.</li>
<li>Error message keys: <code>required</code>, <code>invalid</code></li>
</ul>
<p>Takes one required argument:</p>
<ul>
<li><code>regex</code>: A regular expression specified either as a string or a compiled regular expression object.</li>
</ul>
<p>Also takes <code>max_length</code>, <code>min_length</code>, <code>strip</code>, and <code>empty_value</code> which work just as they do for <a target="_blank" rel="noopener" href="https://docs.djangoproject.com/en/3.1/ref/forms/fields/#django.forms.CharField"><code>CharField</code></a>.</p>
<ul>
<li><code>strip</code>:Defaults to <code>False</code>. If enabled, stripping will be applied before the regex validation.</li>
</ul>
<h3 id="slugfield"><a class="markdownIt-Anchor" href="#slugfield"></a> SlugField</h3>
<ul>
<li>Default widget: <code>TextInput</code></li>
<li>Empty value: Whatever you’ve given as <code>empty_value</code>.</li>
<li>Normalizes to: A string.</li>
<li>Uses <a target="_blank" rel="noopener" href="https://docs.djangoproject.com/en/3.1/ref/validators/#django.core.validators.validate_slug"><code>validate_slug</code></a> or <a target="_blank" rel="noopener" href="https://docs.djangoproject.com/en/3.1/ref/validators/#django.core.validators.validate_unicode_slug"><code>validate_unicode_slug</code></a> to validate that the given value contains only letters, numbers, underscores, and hyphens.</li>
<li>Error messages: <code>required</code>, <code>invalid</code></li>
</ul>
<p>This field is intended for use in representing a model <a target="_blank" rel="noopener" href="https://docs.djangoproject.com/en/3.1/ref/models/fields/#django.db.models.SlugField"><code>SlugField</code></a> in forms.</p>
<p>Takes two optional parameters:</p>
<ul>
<li>
<p><code>allow_unicode</code>: A boolean instructing the field to accept Unicode letters in addition to ASCII letters. Defaults to <code>False</code>.</p>
</li>
<li>
<p><code>empty_value</code>: the  value to use to represent “empty”. Defaults to an empty string.</p>
</li>
</ul>
<h3 id="urlfield"><a class="markdownIt-Anchor" href="#urlfield"></a> URLField</h3>
<ul>
<li>Default widget: <code>URLInput</code>
<ul>
<li><code>input_type</code>: <code>'url'</code></li>
<li><code>template_name</code>: <code>'django/forms/widgets/url.html'</code></li>
<li>Renders as: <code>&lt;input type="url" ...&gt;</code></li>
</ul>
</li>
<li>Empty value: Whatever you’ve given as <code>empty_value</code>.</li>
<li>Normalizes to: A string.</li>
<li>Uses <a target="_blank" rel="noopener" href="https://docs.djangoproject.com/en/3.1/ref/validators/#django.core.validators.URLValidator"><code>URLValidator</code></a> to validate that the given value is a valid URL.</li>
<li>Error message keys: <code>required</code>, <code>invalid</code></li>
</ul>
<p>Has three optional arguments <code>max_length</code>, <code>min_length</code>, and <code>empty_value</code> which work just as they do for <code>CharField</code>.</p>
<h3 id="uuidfield"><a class="markdownIt-Anchor" href="#uuidfield"></a> UUIDField</h3>
<p>See <a target="_blank" rel="noopener" href="https://docs.djangoproject.com/en/3.1/ref/forms/fields/#uuidfield">https://docs.djangoproject.com/en/3.1/ref/forms/fields/#uuidfield</a></p>
<h3 id="combofield"><a class="markdownIt-Anchor" href="#combofield"></a> ComboField</h3>
<ul>
<li>Default widget: <code>TextInput</code></li>
<li>Empty value: <code>''</code> (an empty string)</li>
<li>Normalizes to: A string.</li>
<li>Validates the given value against each of the fields specified as an argument to the <code>ComboField</code>.</li>
<li>Error message keys: <code>required</code>, <code>invalid</code></li>
</ul>
<p>Takes one extra required argument:</p>
<ul>
<li>
<p><code>fields</code></p>
<p>The list of fields that should be used to validate the field’s value (in the order in which they are provided).</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.forms <span class="keyword">import</span> ComboField</span><br><span class="line">f = ComboField(fields=[CharField(max_length=<span class="number">20</span>), EmailField()])</span><br><span class="line">f.clean(<span class="string">'test@example.com'</span>)</span><br><span class="line"><span class="string">'test@example.com'</span></span><br><span class="line">f.clean(<span class="string">'longemailaddress@example.com'</span>)</span><br><span class="line"><span class="comment"># Traceback (most recent call last):</span></span><br><span class="line"><span class="comment"># ...</span></span><br><span class="line"><span class="comment"># ValidationError: ['Ensure this value has at most 20 characters (it has 28).']</span></span><br></pre></td></tr></tbody></table></figure>
</li>
</ul>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<h3 id="multivaluefield"><a class="markdownIt-Anchor" href="#multivaluefield"></a> MultiValueField</h3>
<p>See <a target="_blank" rel="noopener" href="https://docs.djangoproject.com/en/3.1/ref/forms/fields/#multivaluefield">https://docs.djangoproject.com/en/3.1/ref/forms/fields/#multivaluefield</a></p>
<h3 id="modelchoicefield"><a class="markdownIt-Anchor" href="#modelchoicefield"></a> ModelChoiceField</h3>
<ul>
<li>Default widget: <code>Select</code></li>
<li>Empty value: <code>None</code></li>
<li>Normalizes to: A model instance.</li>
<li>Validates that the given id exists in the queryset.</li>
<li>Error message keys: <code>required</code>, <code>invalid_choice</code></li>
</ul>
<p>Allows the selection of a single model object, suitable for representing a foreign key.</p>
<blockquote>
<p>Note that the default widget for <code>ModelChoiceField</code> becomes impractical when the number of entries increases. You should avoid using it for more than 100 items.</p>
</blockquote>
<p>A single argument is required:</p>
<ul>
<li>
<p><code>queryset</code></p>
<p>A <code>QuerySet</code> of model objects from which the choices for the field are derived and which is used to validate the user’s selection. It’s evaluated when the form is rendered.</p>
</li>
</ul>
<p><code>ModelChoiceField</code> also takes two optional arguments:</p>
<ul>
<li>
<p><code>empty_label</code></p>
<p>By default the <code>&lt;select&gt;</code> widget used by <code>ModelChoiceField</code> will have an empty choice at the top of the list. You can change the text of this label (which is <code>"---------"</code> by default) with the <code>empty_label</code> attribute, or you can disable the empty label entirely by setting <code>empty_label</code> to <code>None</code>:</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># A custom empty label</span></span><br><span class="line">field1 = forms.ModelChoiceField(queryset=..., empty_label=<span class="string">"(Nothing)"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># No empty label</span></span><br><span class="line">field2 = forms.ModelChoiceField(queryset=..., empty_label=<span class="literal">None</span>)</span><br></pre></td></tr></tbody></table></figure>
</li>
</ul>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  Note that if a `ModelChoiceField` is required and has a default initial value, no empty choice is created (regardless of the value of `empty_label`).</span><br><span class="line"></span><br><span class="line">- `to_field_name`</span><br><span class="line"></span><br><span class="line">  This optional argument is used to specify the field to use as the value of the choices in the field’s widget. Be sure it’s a unique field for the model, otherwise the selected value could match more than one object. By default it is set to `None`, in which case the primary key of each object will be used. For example:</span><br><span class="line"></span><br><span class="line">  ```python</span><br><span class="line">  # No custom to_field_name</span><br><span class="line">  field1 = forms.ModelChoiceField(queryset=...)</span><br><span class="line">  </span><br><span class="line">  # to_field_name provided</span><br><span class="line">  field2 = forms.ModelChoiceField(queryset=..., to_field_name="name")</span><br></pre></td></tr></tbody></table></figure>
<p>would yield:</p>
  <figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"id_field1"</span> <span class="attr">name</span>=<span class="string">"field1"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"obj1.pk"</span>&gt;</span>Object1<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"obj2.pk"</span>&gt;</span>Object2<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">...</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"id_field2"</span> <span class="attr">name</span>=<span class="string">"field2"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"obj1.name"</span>&gt;</span>Object1<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"obj2.name"</span>&gt;</span>Object2<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">...</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<p><code>ModelChoiceField</code> also has the attribute:</p>
<ul>
<li>
<p><code>iterator</code></p>
<p>The iterator class used to generate field choices from <code>queryset</code>. By default, <code>ModelChoiceIterator</code>.</p>
</li>
</ul>
<p>The <code>__str__()</code> method of the model will be called to generate string representations of the objects for use in the field’s choices. To provide customized representations, subclass <code>ModelChoiceField</code> and override <code>label_from_instance</code>. This method will receive a model object and should return a string suitable for representing it. For example:</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.forms <span class="keyword">import</span> ModelChoiceField</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyModelChoiceField</span>(<span class="params">ModelChoiceField</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">label_from_instance</span>(<span class="params">self, obj</span>):</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"My Object #%i"</span> % obj.id</span><br></pre></td></tr></tbody></table></figure>
<p>Also see <a target="_blank" rel="noopener" href="https://docs.djangoproject.com/en/3.1/ref/forms/fields/#modelmultiplechoicefield">https://docs.djangoproject.com/en/3.1/ref/forms/fields/#modelmultiplechoicefield</a>.</p>
<h1 id="using-a-form-and-function-view"><a class="markdownIt-Anchor" href="#using-a-form-and-function-view"></a> Using a Form and function view¶</h1>
<h2 id="validation"><a class="markdownIt-Anchor" href="#validation"></a> Validation</h2>
<p>Django provides numerous places where you can validate your data. The easiest way to validate a single field is to override the method <code>clean_**&lt;fieldname&gt;**()</code> for the field you want to check.</p>
<p>The example will use a function-based view and a <code>Form</code> class.</p>
<p>Update your <code>forms.py</code> file so it looks like this:</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> django <span class="keyword">import</span> forms</span><br><span class="line"><span class="keyword">from</span> django.core.exceptions <span class="keyword">import</span> ValidationError</span><br><span class="line"><span class="keyword">from</span> django.utils.translation <span class="keyword">import</span> ugettext_lazy <span class="keyword">as</span> _</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ChangeDateForm</span>(<span class="params">forms.Form</span>):</span></span><br><span class="line">    new_date = forms.DateField(help_text=<span class="string">"Enter a new date between now and 4 weeks (default 3)."</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">clean_new_date</span>(<span class="params">self</span>):</span></span><br><span class="line">        data = self.cleaned_data[<span class="string">'new_date'</span>]</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># Check if a date is not in the past. </span></span><br><span class="line">        <span class="keyword">if</span> data &lt; datetime.date.today():</span><br><span class="line">            <span class="keyword">raise</span> ValidationError(_(<span class="string">'Invalid date - new date in past'</span>))</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Check if a date is in the allowed range (+4 weeks from today).</span></span><br><span class="line">        <span class="keyword">if</span> data &gt; datetime.date.today() + datetime.timedelta(weeks=<span class="number">4</span>):</span><br><span class="line">            <span class="keyword">raise</span> ValidationError(_(<span class="string">'Invalid date - new date more than 4 weeks ahead'</span>))</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Remember to always return the cleaned data.</span></span><br><span class="line">        <span class="keyword">return</span> data</span><br></pre></td></tr></tbody></table></figure>
<p>There are two important things to note. The first is that we get our data using <code>self.cleaned_data['new_date']</code> and that we return this data whether or not we change it at the end of the function. This step gets us the data “cleaned” and sanitized of potentially unsafe input using the default validators, and converted into the correct standard type for the data (in this case a Python <code>datetime.datetime</code> object).</p>
<p>The second point is that if a value falls outside our range we raise a <code>ValidationError</code>, specifying the error text that we want to display in the form if an invalid value is entered. The example above also wraps this text in one of <a target="_blank" rel="noopener" href="https://docs.djangoproject.com/en/3.1/topics/i18n/translation/">Django’s translation functions</a> <code>ugettext_lazy()</code> (imported as <code>_()</code>), which is good practice if you want to translate your site later.</p>
<h2 id="view"><a class="markdownIt-Anchor" href="#view"></a> View</h2>
<p>For forms that use a <code>POST</code> request to submit information to the server, the most common pattern is for the view to test against the <code>POST</code> request type (<code>if request.method == 'POST':</code>) to identify form validation requests and <code>GET</code> (using an <code>else</code> condition) to identify the initial form creation request.</p>
<p>If you want to submit your data using a <code>GET</code> request then a typical approach for identifying whether this is the first or subsequent view invocation is to read the form data (e.g. to read a hidden value in the form).</p>
<p>By convention, we use the <code>POST</code>request approach. The code fragment below shows the (very standard) pattern for this sort of function view.</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> .forms <span class="keyword">import</span> RatingModelForm</span><br><span class="line"><span class="keyword">from</span> django.contrib.auth.decorators <span class="keyword">import</span> login_required</span><br><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render, get_object_or_404</span><br><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> HttpResponseRedirect</span><br><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> reverse</span><br><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line"><span class="meta">@login_required</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">MovieRatingUpdate</span>(<span class="params">request, pk</span>):</span></span><br><span class="line">    <span class="comment"># get the current `Rating` (),if this does not exist, the view will immediately exit and the page will display a "not found" error</span></span><br><span class="line">    r = get_object_or_404(Rating, pk=pk)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># If this is a POST request then process the Form data</span></span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">'POST'</span>:</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Create a form instance and populate it with data from the request (binding):</span></span><br><span class="line">        form = RatingModelForm(request.POST)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Check if the form is valid:</span></span><br><span class="line">        <span class="keyword">if</span> form.is_valid():</span><br><span class="line">            <span class="comment"># process the data in form.cleaned_data as required (here we just write it to the model due_back field)</span></span><br><span class="line">            r.rating_date = form.cleaned_data[<span class="string">'rating_date'</span>]</span><br><span class="line">            r.rating_movie = form.cleaned_data[<span class="string">'rating_movie'</span>]</span><br><span class="line">            r.rating_status = form.cleaned_data[<span class="string">'rating_status'</span>]</span><br><span class="line">            r.rating_comment = form.cleaned_data[<span class="string">'rating_comment'</span>]</span><br><span class="line">            r.save()</span><br><span class="line"></span><br><span class="line">            <span class="comment"># redirect to a new URL:</span></span><br><span class="line">            <span class="keyword">return</span> HttpResponseRedirect(reverse(<span class="string">'movie:my-watched'</span>) )</span><br><span class="line"></span><br><span class="line">    <span class="comment"># If this is a GET (or any other method) create the default form.</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        form = RatingModelForm(instance=r)</span><br><span class="line">        <span class="comment"># rating_date_initial = datetime.date.today()</span></span><br><span class="line">        <span class="comment"># form = RatingModelForm(initial={'rating_date': rating_date_initial})</span></span><br><span class="line"></span><br><span class="line">    context = {</span><br><span class="line">        <span class="string">'form'</span>: form,</span><br><span class="line">        <span class="string">'r'</span>: r,</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">'movie/movie_ratings_edit.html'</span>, context)</span><br></pre></td></tr></tbody></table></figure>
<p>First, we import our form (<code>RatingModelForm</code>) and a number of other useful objects/methods used in the body of the view function:</p>
<ul>
<li><code>get_object_or_404()</code>: Returns a specified object from a model based on its primary key value, and raises an <code>Http404</code> exception (not found) if the record does not exist.</li>
<li><code>HttpResponseRedirect</code>: This creates a redirect to a specified URL (HTTP status code 302).</li>
<li><code>reverse()</code>: This generates a URL from a URL configuration name and a set of arguments. It is the Python equivalent of the <code>url</code> tag that we’ve been using in our templates.</li>
</ul>
<blockquote>
<p>Important: While you can also access the form data directly through the request (for example, <code>request.POST['rating_date']</code> or <code>request.GET['rating_date']</code> if using a GET request), this is NOT recommended. The cleaned data is sanitized, validated, and converted into Python-friendly types.</p>
</blockquote>
<p>That’s everything needed for the form handling itself, but we still need to restrict access to the view to MovieRatingUpdate. We should probably create a new permission in <code>Rating</code>("<code>can_edit</code>"), but, to keep things simple here, we just use the <code>@permission_required</code> function decorator with our existing <code>can_edit_rating</code>permission.</p>
<p>The final view is therefore as shown below. Please copy this into the bottom of <strong><a target="_blank" rel="noopener" href="http://views.py">views.py</a></strong>.</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> django.contrib.auth.decorators <span class="keyword">import</span> permission_required</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="meta">@permission_required('movie.can_edit_rating')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">MovieRatingUpdate</span>(<span class="params">request, pk</span>):</span></span><br><span class="line">...</span><br></pre></td></tr></tbody></table></figure>
<h2 id="the-template"><a class="markdownIt-Anchor" href="#the-template"></a> The template</h2>
<p>Create the template referenced in the view (<strong>book_renew_librarian.html</strong>) and copy the code below into it:</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">{% extends 'movie/movie_base.html' %}</span><br><span class="line">{% load movie_tags %}</span><br><span class="line">{% load crispy_forms_tags %}</span><br><span class="line">{% block sidebar %}</span><br><span class="line">{% endblock %}</span><br><span class="line">{% block content %}</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row justify-content-center align-items-center"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">"col-6"</span>&gt;</span></span><br><span class="line">...</span><br><span class="line">        <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">  {% if error_message %}<span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">strong</span>&gt;</span>{{ error_message }}<span class="tag">&lt;/<span class="name">strong</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span>{% endif %}</span><br><span class="line">  <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">""</span> <span class="attr">method</span>=<span class="string">"post"</span> <span class="attr">class</span>=<span class="string">"col-6"</span>&gt;</span></span><br><span class="line">    {% csrf_token %}</span><br><span class="line">     {{ form|crispy }}</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"Submit"</span>  <span class="attr">class</span>=<span class="string">"btn btn-primary"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">  {{ form.media }}</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">{% endblock %}</span><br><span class="line"></span><br><span class="line">{% block js %}</span><br><span class="line">{% endblock js %}</span><br></pre></td></tr></tbody></table></figure>
<p>The form code is relatively simple and we use crispy_forms to beautify the forms .</p>
<p>First we declare the <code>form</code> tags, specifying where the form is to be submitted (<code>action</code>) and the <code>method</code> for submitting the data (in this case an “HTTP POST”) .</p>
<p>The <code>{% csrf_token %}</code> added just inside the form tags is part of Django’s cross-site forgery protection. Add the <code>{% csrf_token %}</code> to every Django template you create that uses <code>POST</code> to submit data. This will reduce the chance of forms being hijacked by malicious users.</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://www.owasp.org/index.php/Cross-Site_Request_Forgery_(CSRF)">https://www.owasp.org/index.php/Cross-Site_Request_Forgery_(CSRF)</a></p>
</blockquote>
<blockquote>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Use novalidate attribute to break up the default Browser Validation--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">""</span> <span class="attr">novalidate</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>
</blockquote>
<p>It is also possible to have complete control over the rendering of each part of the form, by indexing its properties using dot notation. So, for example, we can access a number of separate items for our <code>renewal_date</code> field:</p>
<ul>
<li><code>{{ form.rating_date}}:</code> The whole field.</li>
<li><code>{{ form.rating_date.errors }}</code>: The list of errors.</li>
<li><code>{{ form.rating_date.id_for_label }}</code>: The id of the label.</li>
<li><code>{{ form.rating_date.help_text }}</code>: The field help text.</li>
</ul>
<h2 id="modelforms"><a class="markdownIt-Anchor" href="#modelforms"></a> ModelForms</h2>
<p>Creating a <code>Form</code> class using the approach described above is very flexible, allowing you to create whatever sort of form page you like and associate it with any model or models.</p>
<p>However, if you just need a form to map the fields of a <em>single</em> model then your model will already define most of the information that you need in your form: fields, labels, help text, etc. Rather than recreating the model definitions in your form, it is easier to use the ModelForm helper class to create the form from your model.</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RatingModelForm</span>(<span class="params">ModelForm</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">clean_rating_date</span>(<span class="params">self</span>):</span></span><br><span class="line">       data = self.cleaned_data[<span class="string">'rating_date'</span>]</span><br><span class="line">       </span><br><span class="line">       <span class="keyword">if</span> data &gt; datetime.date.today():</span><br><span class="line">           <span class="keyword">raise</span> ValidationError(_(<span class="string">'Invalid date - The date is in the future.'</span>))</span><br><span class="line"></span><br><span class="line">       <span class="comment"># Remember to always return the cleaned data.</span></span><br><span class="line">       <span class="keyword">return</span> data</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        model = Rating</span><br><span class="line">        <span class="comment"># you can include all fields using `fields = '__all__'`, or you can use `exclude` (instead of `fields`) to specify the fields *not* to include from the model</span></span><br><span class="line">        fields = [<span class="string">'rating_movie'</span>,<span class="string">'rating_date'</span>,<span class="string">'rating_status'</span>,<span class="string">'rating_comment'</span>]</span><br><span class="line">        labels = {<span class="string">'rating_date'</span>: _(<span class="string">'Movie watched date'</span>)}</span><br><span class="line">        help_texts = {<span class="string">'rating_date'</span>: _(<span class="string">'Enter a valid Movie watched date (default today).'</span>)}</span><br></pre></td></tr></tbody></table></figure>
<p>The rest of the information comes from the model field definitions (e.g. labels, widgets, help text, error messages).</p>
<p>If these aren’t quite right, then we can override them in our <code>class Meta</code>, specifying a dictionary containing the field to change and its new value.</p>
<h1 id="generic-editing-views"><a class="markdownIt-Anchor" href="#generic-editing-views"></a> Generic editing views¶</h1>
<p>The form handling algorithm we used in our function view example above represents an extremely common pattern in form editing views. Django abstracts much of this “boilerplate” for you, by creating generic editing views for creating, editing, and deleting views based on models. Not only do these handle the “view” behavior, but they automatically create the form class (a <code>ModelForm</code>) for you from the model.</p>
<p>In this section we’re going to use generic editing views to create pages to add functionality to create, edit, and delete <code>Director</code> records — effectively providing a basic reimplementation of parts of the Admin site (this could be useful if you need to offer admin functionality in a more flexible way that can be provided by the admin site).</p>
<h3 id="views"><a class="markdownIt-Anchor" href="#views"></a> Views</h3>
<p>Open the views file <strong><a target="_blank" rel="noopener" href="http://views.py">views.py</a></strong> and append the following code block to the bottom of it:</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.views.generic.edit <span class="keyword">import</span> CreateView, UpdateView, DeleteView</span><br><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> reverse_lazy</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DirectorCreate</span>(<span class="params">LoginRequiredMixin, CreateView</span>):</span></span><br><span class="line">    model = Director</span><br><span class="line">    fields = <span class="string">'__all__'</span></span><br><span class="line">    initial = {<span class="string">'director_date_edited'</span>: datetime.datetime.now()}</span><br><span class="line">    template_name = <span class="string">'movie/movie_director_form.html'</span></span><br><span class="line">    success_msg = <span class="string">'director successfully created.'</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DirectorUpdate</span>(<span class="params">LoginRequiredMixin, UpdateView</span>):</span></span><br><span class="line">    model = Director</span><br><span class="line">    fields = <span class="string">'__all__'</span></span><br><span class="line">    template_name = <span class="string">'movie/movie_director_form.html'</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DirectorDelete</span>(<span class="params">LoginRequiredMixin, DeleteView</span>):</span></span><br><span class="line">    model = Director</span><br><span class="line">    success_url = reverse_lazy(<span class="string">'movie:directors'</span>)</span><br><span class="line">    template_name = <span class="string">'movie/movie_director_del_confirm.html'</span></span><br></pre></td></tr></tbody></table></figure>
<p>That seems not good for DirectorCreate, because we define the director_date_edited as required in <a target="_blank" rel="noopener" href="http://model.py">model.py</a>:</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">director_date_edited = models.DateTimeField(<span class="string">'date edited'</span>,default=timezone.now())</span><br><span class="line"><span class="comment">## Change to ==&gt;</span></span><br><span class="line">director_date_edited = models.DateTimeField(<span class="string">'date edited'</span>,blank = <span class="literal">True</span>, null = <span class="literal">True</span>)</span><br></pre></td></tr></tbody></table></figure>
<p>Then, modify the DirectorCreate, thats it!</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DirectorCreate</span>(<span class="params">LoginRequiredMixin, CreateView</span>):</span></span><br><span class="line">    model = Director</span><br><span class="line">    fields = <span class="string">'__all__'</span></span><br><span class="line">    exclude =[<span class="string">'director_date_edited'</span>]</span><br><span class="line">    template_name = <span class="string">'movie/movie_director_form.html'</span></span><br><span class="line">    success_msg = <span class="string">'director successfully created.'</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">form_valid</span>(<span class="params">self, form</span>):</span></span><br><span class="line">         self.object = form.save(commit=<span class="literal">False</span>)</span><br><span class="line">         self.object.director_date_edited = datetime.datetime.now()</span><br><span class="line">         self.object.save()</span><br><span class="line">         <span class="keyword">return</span> super(DirectorCreate, self).form_valid(form)</span><br></pre></td></tr></tbody></table></figure>
<p>As you can see, to create, update, or delete the views you need to derive from <code>CreateView</code>, <code>UpdateView</code>, and <code>DeleteView</code> (respectively) and then define the associated model.</p>
<p>You can specify an alternative redirect location by explicitly declaring parameter <code>success_url</code> (as done for the <code>DirectorDelete</code> class).</p>
<p>The <code>DirectorDelete</code> class doesn’t need to display any of the fields, so these don’t need to be specified. You do however need to specify the <code>success_url</code>, because there is no obvious default value for Django to use. In this case, we use the <code>reverse_lazy()</code> function to redirect to our directors list after an author has been deleted — <code>reverse_lazy()</code> is a lazily executed version of <code>reverse()</code>, used here because we’re providing a URL to a class-based view attribute.</p>
<h3 id="templates"><a class="markdownIt-Anchor" href="#templates"></a> Templates</h3>
<p>The “create” and “update” views use the same template by default, which will be named after your model: <em>model_name</em>**_form.html** (you can change the suffix to something other than <strong>_form</strong> using the <code>template_name_suffix</code> field in your view, e.g. <code>template_name_suffix = 'movie_director_form.html' or 'template_name = 'movie/movie_director_form.html'</code>)</p>
<p>Create the template file <strong>movie_director_form.html</strong> and copy in the text below.</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">{% extends 'movie/movie_base.html' %}</span><br><span class="line">{% load movie_tags %}</span><br><span class="line">{% load crispy_forms_tags %}</span><br><span class="line">{% block title %}</span><br><span class="line">    Directors</span><br><span class="line">{% endblock %}</span><br><span class="line">{% block content %}</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container h-100"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row justify-content-center align-items-center h-100 "</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">"post"</span> <span class="attr">enctype</span>=<span class="string">"multipart/form-data"</span>&gt;</span></span><br><span class="line">    {% csrf_token %}</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-row"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group col-md-6 mb-0"</span>&gt;</span></span><br><span class="line">        {{ form.director_name|as_crispy_field }}</span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group col-md-6 mb-0"</span>&gt;</span></span><br><span class="line">        {{ form.director_name2|as_crispy_field }}</span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-row"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group col-md-6 mb-0"</span>&gt;</span></span><br><span class="line">        {{ form.director_name_CN|as_crispy_field }}</span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group col-md-6 mb-0"</span>&gt;</span></span><br><span class="line">        {{ form.director_name_CN2|as_crispy_field }}</span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    {{ form.director_picture|as_crispy_field }}  </span><br><span class="line">    {{ form.director_biography|as_crispy_field }}</span><br><span class="line">...</span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">class</span>=<span class="string">"btn btn-primary"</span>&gt;</span>Submit<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">{% endblock %}</span><br></pre></td></tr></tbody></table></figure>
<p>This is similar to our previous forms and renders the fields using a table. Note also how again we declare the <code>{% csrf_token %}</code> to ensure that our forms are resistant to CSRF attacks.</p>
<p>The “delete” view expects to find a template named with the format <em>model_name</em>**_confirm_delete.html** (again, you can change the suffix using <code>template_name_suffix</code> in your view).</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">{% extends 'movie/movie_base.html' %}</span><br><span class="line">{% load i18n %}</span><br><span class="line">{% load movie_tags %}</span><br><span class="line"></span><br><span class="line">{% block title %}</span><br><span class="line">    {{ super }} Directors | Delete</span><br><span class="line">{% endblock %}</span><br><span class="line">{% block content %}</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Delete Director<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Are you sure you want to delete the director: {{ director }} ?<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">""</span> <span class="attr">method</span>=<span class="string">"POST"</span>  <span class="attr">id</span>=<span class="string">'director-delete'</span>&gt;</span></span><br><span class="line">  {% csrf_token %}</span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span>  <span class="attr">class</span>=<span class="string">"btn btn-danger"</span> <span class="attr">type</span> = <span class="string">"submit"</span>&gt;</span>Yes, delete.<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line">{% endblock %}</span><br></pre></td></tr></tbody></table></figure>
<h3 id="url-configurations"><a class="markdownIt-Anchor" href="#url-configurations"></a> URL configurations</h3>
<p>Open your URL configuration file and add the following configuration to the bottom of the file:</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">urlpatterns += [  </span><br><span class="line">    path(<span class="string">'director/create/'</span>, views.DirectorCreate.as_view(), name=<span class="string">'director_create'</span>),</span><br><span class="line">    path(<span class="string">'director/&lt;int:pk&gt;/update/'</span>, views.DirectorUpdate.as_view(), name=<span class="string">'director_update'</span>),</span><br><span class="line">    path(<span class="string">'director/&lt;int:pk&gt;/delete/'</span>, views.DirectorDelete.as_view(), name=<span class="string">'director_delete'</span>),</span><br><span class="line">]</span><br></pre></td></tr></tbody></table></figure>
<p>There is nothing particularly new here! You can see that the views are classes, and must hence be called via <code>.as_view()</code>, and you should be able to recognize the URL patterns in each case. We must use <code>pk</code> as the name for our captured primary key value, as this is the parameter name expected by the view classes.</p>
<h2 id="references"><a class="markdownIt-Anchor" href="#references"></a> REFERENCES</h2>
<ul>
<li><a target="_blank" rel="noopener" href="https://docs.djangoproject.com/en/3.1/intro/tutorial04/#write-a-simple-form">https://docs.djangoproject.com/en/3.1/intro/tutorial04/#write-a-simple-form</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.djangoproject.com/en/3.1/topics/forms/">https://docs.djangoproject.com/en/3.1/topics/forms/</a>
<ul>
<li><a target="_blank" rel="noopener" href="https://docs.djangoproject.com/en/3.1/topics/forms/modelforms/">https://docs.djangoproject.com/en/3.1/topics/forms/modelforms/</a></li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://docs.djangoproject.com/en/3.1/ref/forms/widgets/">https://docs.djangoproject.com/en/3.1/ref/forms/widgets/</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.djangoproject.com/en/3.1/ref/forms/api/">https://docs.djangoproject.com/en/3.1/ref/forms/api/</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.djangoproject.com/en/3.1/ref/forms/fields/">https://docs.djangoproject.com/en/3.1/ref/forms/fields/</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.djangoproject.com/en/3.1/ref/forms/validation/">https://docs.djangoproject.com/en/3.1/ref/forms/validation/</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.djangoproject.com/en/3.1/topics/class-based-views/generic-editing/">https://docs.djangoproject.com/en/3.1/topics/class-based-views/generic-editing/</a></li>
</ul>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">Joaxin</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://u.pinsflora.xyz/Pysnista/Django/dj_intro9_forms/">https://u.pinsflora.xyz/Pysnista/Django/dj_intro9_forms/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Django/">Django</a></div><div class="post_share"><div class="addtoany"><div class="a2a_kit a2a_kit_size_32 a2a_default_style"><a class="a2a_button_facebook"></a><a class="a2a_button_twitter"></a><a class="a2a_button_wechat"></a><a class="a2a_button_sina_weibo"></a><a class="a2a_button_facebook_messenger"></a><a class="a2a_button_email"></a><a class="a2a_button_copy_link"></a><a class="a2a_dd" target="_blank" rel="noopener" href="https://www.addtoany.com/share"></a></div></div><script async="async" src="https://static.addtoany.com/menu/page.js"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/Pysnista/Django/dj_intro10_testing/"><img class="prev-cover" src="https://cdn.jsdelivr.net/gh/joaxin/img_bed/img/cover/cover_writting_letter.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">Django Introduction Part10 - Testing a Django web application</div></div></a></div><div class="next-post pull-right"><a href="/Reverie/html/R_stats_anova/"><img class="next-cover" src="https://cdn.jsdelivr.net/gh/joaxin/img_bed/img/cover_posts/r/R_stats_anova.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">R ANOVA</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span> Related Articles</span></div><div class="relatedPosts-list"><div><a href="/Pysnista/Django/dj_FAQ/" title="Django FAQ"><img class="cover" src="https://cdn.jsdelivr.net/gh/joaxin/img_bed/img/cover/cover_grass_in_the_snow.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2020-09-05</div><div class="title">Django FAQ</div></div></a></div><div><a href="/Pysnista/Django/dj_intro3_dbs/" title="Django Introduction Part3 - Database"><img class="cover" src="https://cdn.jsdelivr.net/gh/joaxin/img_bed/img/cover/cover_writting_letter.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2020-09-05</div><div class="title">Django Introduction Part3 - Database</div></div></a></div><div><a href="/Pysnista/Django/dj_intro4_admin/" title="Django Introduction Part4 - Admin"><img class="cover" src="https://cdn.jsdelivr.net/gh/joaxin/img_bed/img/cover/cover_tree_dawnlights.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2020-08-05</div><div class="title">Django Introduction Part4 - Admin</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> Comment</span></div></div><div class="comment-wrap"><div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" src="https://avatars2.githubusercontent.com/u/8346164?s=460&amp;v=4" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">Joaxin</div><div class="author-info__description">When I close my eyes, I'm in my own ♡cean 🐟aves.</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">340</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">Tags</div><div class="length-num">110</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">Categories</div><div class="length-num">34</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/joaxin"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/joaxin" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:lotility@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="fas fa-rss"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>Announcement</span></div><div class="announcement_content">感謝訪問本站，若喜歡請收藏 ^_^</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Catalog</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#form-fields"><span class="toc-number">1.</span> <span class="toc-text"> Form fields¶</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#declaring-a-form"><span class="toc-number">1.1.</span> <span class="toc-text"> Declaring a Form</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#core-field-arguments"><span class="toc-number">1.2.</span> <span class="toc-text"> Core field arguments</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#built-in-field-classes"><span class="toc-number">1.3.</span> <span class="toc-text"> Built-in Field classes</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#booleanfield"><span class="toc-number">1.3.1.</span> <span class="toc-text"> BooleanField</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#charfield"><span class="toc-number">1.3.2.</span> <span class="toc-text"> CharField</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#choicefield"><span class="toc-number">1.3.3.</span> <span class="toc-text"> ChoiceField</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#datefielddatetimefieldtimefield"><span class="toc-number">1.3.4.</span> <span class="toc-text"> DateField&#x2F;DateTimeField&#x2F;TimeField</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#decimalfield"><span class="toc-number">1.3.5.</span> <span class="toc-text"> DecimalField</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#durationfield"><span class="toc-number">1.3.6.</span> <span class="toc-text"> DurationField</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#emailfield"><span class="toc-number">1.3.7.</span> <span class="toc-text"> EmailField</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#filefield"><span class="toc-number">1.3.8.</span> <span class="toc-text"> FileField</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#filepathfield"><span class="toc-number">1.3.9.</span> <span class="toc-text"> FilePathField</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#imagefield"><span class="toc-number">1.3.10.</span> <span class="toc-text"> ImageField</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#jsonfield"><span class="toc-number">1.3.11.</span> <span class="toc-text"> JSONField</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#genericipaddressfield"><span class="toc-number">1.3.12.</span> <span class="toc-text"> GenericIPAddressField</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#nullbooleanfield"><span class="toc-number">1.3.13.</span> <span class="toc-text"> NullBooleanField</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#regexfield"><span class="toc-number">1.3.14.</span> <span class="toc-text"> RegexField</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#slugfield"><span class="toc-number">1.3.15.</span> <span class="toc-text"> SlugField</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#urlfield"><span class="toc-number">1.3.16.</span> <span class="toc-text"> URLField</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#uuidfield"><span class="toc-number">1.3.17.</span> <span class="toc-text"> UUIDField</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#combofield"><span class="toc-number">1.3.18.</span> <span class="toc-text"> ComboField</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#multivaluefield"><span class="toc-number">1.3.19.</span> <span class="toc-text"> MultiValueField</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#modelchoicefield"><span class="toc-number">1.3.20.</span> <span class="toc-text"> ModelChoiceField</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#using-a-form-and-function-view"><span class="toc-number">2.</span> <span class="toc-text"> Using a Form and function view¶</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#validation"><span class="toc-number">2.1.</span> <span class="toc-text"> Validation</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#view"><span class="toc-number">2.2.</span> <span class="toc-text"> View</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#the-template"><span class="toc-number">2.3.</span> <span class="toc-text"> The template</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#modelforms"><span class="toc-number">2.4.</span> <span class="toc-text"> ModelForms</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#generic-editing-views"><span class="toc-number">3.</span> <span class="toc-text"> Generic editing views¶</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#views"><span class="toc-number">3.0.1.</span> <span class="toc-text"> Views</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#templates"><span class="toc-number">3.0.2.</span> <span class="toc-text"> Templates</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#url-configurations"><span class="toc-number">3.0.3.</span> <span class="toc-text"> URL configurations</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#references"><span class="toc-number">3.1.</span> <span class="toc-text"> REFERENCES</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/Lang/es/duo_es/" title="No title"><img src="https://cdn.jsdelivr.net/gh/joaxin/img_bed/img/cover/cover_seeds.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="No title"/></a><div class="content"><a class="title" href="/Lang/es/duo_es/" title="No title">No title</a><time datetime="2020-06-29T03:44:49.224Z" title="Created 2020-06-29 11:44:49">2020-06-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/Lang/kl/duo_kl001_intro/" title="Klingon- Vol.1 - Introduction"><img src="https://cdn.jsdelivr.net/gh/joaxin/img_bed/img/cover/cover_little_girl_phone.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Klingon- Vol.1 - Introduction"/></a><div class="content"><a class="title" href="/Lang/kl/duo_kl001_intro/" title="Klingon- Vol.1 - Introduction">Klingon- Vol.1 - Introduction</a><time datetime="2020-06-26T16:00:00.000Z" title="Created 2020-06-27 00:00:00">2020-06-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/Life/apps/life_apps_android_list/" title="安卓 | 装机必备清单及习惯步骤"><img src="https://i.postimg.cc/KYPmhV8w/android-new-logo.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="安卓 | 装机必备清单及习惯步骤"/></a><div class="content"><a class="title" href="/Life/apps/life_apps_android_list/" title="安卓 | 装机必备清单及习惯步骤">安卓 | 装机必备清单及习惯步骤</a><time datetime="2020-06-20T04:29:10.462Z" title="Created 2020-06-20 12:29:10">2020-06-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/Pysnista/Intro/files/py_pillow/" title="Python - 操作图像"><img src="https://cdn.jsdelivr.net/gh/joaxin/img_bed/img/cover/cover_little_girl_phone.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Python - 操作图像"/></a><div class="content"><a class="title" href="/Pysnista/Intro/files/py_pillow/" title="Python - 操作图像">Python - 操作图像</a><time datetime="2020-05-02T16:00:00.000Z" title="Created 2020-05-03 00:00:00">2020-05-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/Pysnista/Intro/files/py_files_pdf_word/" title="Python - PDF &amp; Word"><img src="https://i.loli.net/2020/07/09/6ALoRXnITgcuvy2.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Python - PDF &amp; Word"/></a><div class="content"><a class="title" href="/Pysnista/Intro/files/py_files_pdf_word/" title="Python - PDF &amp; Word">Python - PDF &amp; Word</a><time datetime="2020-04-12T16:00:00.000Z" title="Created 2020-04-13 00:00:00">2020-04-13</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://cdn.jsdelivr.net/gh/joaxin/img_bed/img/cover/cover_erol-ahmed-unsplash.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By Joaxin</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Refine, the Life</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="font-plus" type="button" title="Increase font size"><i class="fas fa-plus"></i></button><button id="font-minus" type="button" title="Decrease font size"><i class="fas fa-minus"></i></button><button id="translateLink" type="button" title="Switch Between Traditional Chinese And Simplified Chinese">繁</button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="chat_btn" type="button" title="rightside.chat_btn"><i class="fas fa-sms"></i></button><a id="to_comment" href="#post-comment" title="Scroll To Comments"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">Local search</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>if (document.getElementsByClassName('mermaid').length) {
  if (window.mermaidJsLoad) mermaid.init()
  else {
    getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(() => {
      window.mermaidJsLoad = true
      mermaid.initialize({
        theme: 'default',
      })
      false && mermaid.init()
    })
  }
}</script></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="fasle"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script>(function(i,s,o,g,r,a,m){i["DaoVoiceObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;a.charset="utf-8";m.parentNode.insertBefore(a,m)})(window,document,"script",('https:' == document.location.protocol ? 'https:' : 'http:') + "//widget.daovoice.io/widget/fae45343.js","daovoice")
</script><script>var isChatBtn = true
daovoice('init', {
  app_id: 'fae45343',},{
  launcher: { 
     disableLauncherIcon: isChatBtn // 悬浮 ICON 是否显示
  },
});
daovoice('update');

if (isChatBtn) {
  var chatBtnFn = () => {
    var chatBtn = document.getElementById("chat_btn")
    chatBtn.addEventListener("click", function(){
      daovoice('show')
    });
  }
  chatBtnFn()
} else {
  if (true) {
    function chatBtnHide () {
      daovoice('update', {},{
        launcher: { 
        disableLauncherIcon: true // 悬浮 ICON 是否显示
        },
      });
    }
    function chatBtnShow () {
      daovoice('update', {},{
        launcher: { 
        disableLauncherIcon: false // 悬浮 ICON 是否显示
        },
      });
    }
  }
}</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>