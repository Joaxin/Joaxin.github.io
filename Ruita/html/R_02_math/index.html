<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>R Math | Pinsflora</title><meta name="description" content="R的基础数学用法"><meta name="keywords" content="Math"><meta name="author" content="Joaxin"><meta name="copyright" content="Joaxin"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="canonical" href="https://u.pinsflora.com/Ruita/html/R_02_math/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta property="og:type" content="article"><meta property="og:title" content="R Math"><meta property="og:url" content="https://u.pinsflora.com/Ruita/html/R_02_math/"><meta property="og:site_name" content="Pinsflora"><meta property="og:description" content="R的基础数学用法"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/joaxin/img_bed/img/cover_posts/r/R_math01.jpg"><meta property="article:published_time" content="2018-01-04T16:00:00.000Z"><meta property="article:modified_time" content="2018-04-20T16:00:00.000Z"><meta name="twitter:card" content="summary"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css"><script async="async" src="https://www.googletagmanager.com/gtag/js?id=UA-177831205-1"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-177831205-1');
</script><script>var GLOBAL_CONFIG = { 
  root: '/',
  hexoversion: '5.1.1',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: {"limitDay":500,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  bookmark: {
    message_prev: 'Press',
    message_next: 'to bookmark this page'
  },
  runtime: 'days',
  date_suffix: {"one_hour":"Just","hours":"hours ago","day":"days ago"},
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: {"bookmark":{"message_prev":"Press","message_next":"to bookmark this page"},"chs_to_cht":"Traditional Chinese Activated Manually","cht_to_chs":"Simplified Chinese Activated Manually","day_to_night":"Dark Mode Activated Manually","night_to_day":"Light Mode Activated Manually","bgLight":"#49b1f5","bgDark":"#2d3035","position":"bottom-left"},
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  baiduPush: false,
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
};

var saveToLocal = {
  set: function setWithExpiry(key, value, ttl) {
    const now = new Date()
    const expiryDay = ttl * 86400000
    const item = {
      value: value,
      expiry: now.getTime() + expiryDay,
    }
    localStorage.setItem(key, JSON.stringify(item))
    },

  get: function getWithExpiry(key) {
    const itemStr = localStorage.getItem(key)

    if (!itemStr) {
      return undefined
    }
    const item = JSON.parse(itemStr)
    const now = new Date()

    if (now.getTime() > item.expiry) {
      localStorage.removeItem(key)
      return undefined
    }
    return item.value
  }
}</script><script id="config_change">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isSidebar: true,
  postUpdate: '2018-04-21 00:00:00'
}</script><noscript><style type="text/css">
#nav {
  opacity: 1
}
.justified-gallery img {
  opacity: 1
}
</style></noscript><script>var activateDarkMode = function () {
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
  }
}
var activateLightMode = function () {
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
  }
}

var autoChangeMode = 'false'
var t = saveToLocal.get('theme')
if (autoChangeMode === '1') {
  var isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
  var isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
  var isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined) {
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport) {
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour <= 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
    }
    window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
      if (saveToLocal.get('theme') === undefined) {
        e.matches ? activateDarkMode() : activateLightMode()
      }
    })
  } else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else if (autoChangeMode === '2') {
  now = new Date()
  hour = now.getHours()
  isNight = hour <= 6 || hour >= 18
  if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else {
  if (t === 'dark') activateDarkMode()
  else if (t === 'light') activateLightMode()
}</script><meta name="generator" content="Hexo 5.1.1"><link rel="alternate" href="/atom.xml" title="Pinsflora" type="application/atom+xml">
</head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="https://avatars2.githubusercontent.com/u/8346164?s=460&amp;v=4" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">Articles</div><div class="length_num">272</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">Tags</div><div class="length_num">98</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">Categories</div><div class="length_num">31</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-list"></i><span> List</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/gallery/"><i class="fa-fw fas fa-file-image-o"></i><span> Galleries</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-film"></i><span> Movie</span></a></li><li><a class="site-page" href="/games/"><i class="fa-fw fas fa-gamepad"></i><span> Games</span></a></li><li><a class="site-page" href="/tools/"><i class="fa-fw fas fa-wrench"></i><span> Tools</span></a></li></ul></div></div></div></div><div id="body-wrap"><div id="web_bg" data-type="photo"></div><div id="sidebar"><i class="fas fa-arrow-right on" id="toggle-sidebar"></i><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#basic"><span class="toc-number">1.</span> <span class="toc-text">Basic</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#sequence"><span class="toc-number">1.1.</span> <span class="toc-text">Sequence</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#simple-calculation"><span class="toc-number">1.2.</span> <span class="toc-text">Simple Calculation</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#set"><span class="toc-number">1.3.</span> <span class="toc-text">Set</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#quantile"><span class="toc-number">1.4.</span> <span class="toc-text">Quantile</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#logarithm"><span class="toc-number">1.5.</span> <span class="toc-text">Logarithm</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#floor-ceiling-trunc"><span class="toc-number">1.6.</span> <span class="toc-text">Floor Ceiling Trunc</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#formatting"><span class="toc-number">1.7.</span> <span class="toc-text">Formatting</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#interval"><span class="toc-number">1.8.</span> <span class="toc-text">Interval</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#formula"><span class="toc-number">1.9.</span> <span class="toc-text">Formula</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#piecewise-function"><span class="toc-number">1.10.</span> <span class="toc-text">Piecewise function</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#complex"><span class="toc-number">1.11.</span> <span class="toc-text">Complex</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#large-integers"><span class="toc-number">1.12.</span> <span class="toc-text">Large Integers</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#examples-1"><span class="toc-number">2.</span> <span class="toc-text">Examples 1</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#simple-calculator"><span class="toc-number">2.1.</span> <span class="toc-text">Simple Calculator</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#triangle"><span class="toc-number">2.2.</span> <span class="toc-text">Triangle</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#isprime"><span class="toc-number">2.3.</span> <span class="toc-text">isPrime</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#factorial"><span class="toc-number">2.4.</span> <span class="toc-text">Factorial</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#armstrong-numbernarcissistic-number"><span class="toc-number">2.5.</span> <span class="toc-text">Armstrong number(narcissistic number)</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#examples-2"><span class="toc-number">3.</span> <span class="toc-text">Examples 2</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#bisect"><span class="toc-number">3.1.</span> <span class="toc-text">Bisect</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#newton"><span class="toc-number">3.2.</span> <span class="toc-text">Newton</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#differences"><span class="toc-number">3.3.</span> <span class="toc-text">Differences</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#integral"><span class="toc-number">3.4.</span> <span class="toc-text">Integral</span></a></li></ol></li></ol></div></div></div><header class="post-bg" id="page-header" style="background-image: url(https://cdn.jsdelivr.net/gh/joaxin/img_bed/img/cover_posts/r/R_math01.jpg)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Pinsflora</a></span><span id="menus"><div id="search_button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-list"></i><span> List</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/gallery/"><i class="fa-fw fas fa-file-image-o"></i><span> Galleries</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-film"></i><span> Movie</span></a></li><li><a class="site-page" href="/games/"><i class="fa-fw fas fa-gamepad"></i><span> Games</span></a></li><li><a class="site-page" href="/tools/"><i class="fa-fw fas fa-wrench"></i><span> Tools</span></a></li></ul></div></div><span class="close" id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><div id="post-title"><div class="posttitle">R Math</div></div><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2018-01-04T16:00:00.000Z" title="Created 2018-01-05 00:00:00">2018-01-05</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2018-04-20T16:00:00.000Z" title="Updated 2018-04-21 00:00:00">2018-04-21</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/R/">R</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/R/Introduction/">Introduction</a></span></div><div class="meta-secondline"> <span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">Word count:</span><span class="word-count">3.8k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">Reading time:</span><span>23min</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post View:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"></span></div></div></div></header><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>






<title>R Math</title>



</head>
<body>

<div class="toc" id="TOC">
<ul>
<li><a href="#basic">Basic</a><ul>
<li><a href="#sequence">Sequence</a></li>
<li><a href="#simple-calculation">Simple Calculation</a></li>
<li><a href="#set">Set</a></li>
<li><a href="#quantile">Quantile</a></li>
<li><a href="#logarithm">Logarithm</a></li>
<li><a href="#floor-ceiling-trunc">Floor Ceiling Trunc</a></li>
<li><a href="#formatting">Formatting</a></li>
<li><a href="#interval">Interval</a></li>
<li><a href="#formula">Formula</a></li>
<li><a href="#piecewise-function">Piecewise function</a></li>
<li><a href="#complex">Complex</a></li>
<li><a href="#large-integers">Large Integers</a></li>
</ul></li>
<li><a href="#examples-1">Examples 1</a><ul>
<li><a href="#simple-calculator">Simple Calculator</a></li>
<li><a href="#triangle">Triangle</a></li>
<li><a href="#isprime">isPrime</a></li>
<li><a href="#factorial">Factorial</a></li>
<li><a href="#armstrong-numbernarcissistic-number">Armstrong number(narcissistic number)</a></li>
</ul></li>
<li><a href="#examples-2">Examples 2</a><ul>
<li><a href="#bisect">Bisect</a></li>
<li><a href="#newton">Newton</a></li>
<li><a href="#differences">Differences</a></li>
<li><a href="#integral">Integral</a></li>
</ul></li>
</ul>
</div>
<div id="content-wrapper">
<div class="inner clearfix">
<section id="main-content">
<div class="section level1" id="basic">
<h1>Basic</h1>
<div class="section level2" id="sequence">
<h2>Sequence</h2>
<figure class="highlight R"><table><tbody><tr><td class="code"><pre class="sourceCode r"><span class="number">1</span><span class="string">:</span><span class="number">5</span> <span class="string">-</span><span class="string"> </span><span class="number">1</span>
<span class="comment"># 0 1 2 3 4</span>
<span class="number">5</span><span class="string">:</span><span class="number">1</span>
<span class="comment"># 5 4 3 2 1</span>
pi<span class="string">:</span><span class="number">10</span>
<span class="comment"># 3.14159265359 4.14159265359 5.14159265359 6.14159265359</span>
<span class="comment"># 7.14159265359 8.14159265359 9.14159265359</span>

<span class="keyword">seq</span>(<span class="number">10</span>)
<span class="keyword">seq_len</span>(<span class="number">10</span>)
<span class="comment"># 1  2  3  4  5  6  7  8  9 10</span>
<span class="keyword">seq.int</span>(pi<span class="string">:</span><span class="number">10</span>)
<span class="comment"># 1 2 3 4 5 6 7</span>
<span class="keyword">seq</span>(<span class="number">1</span>, <span class="number">20</span>, <span class="dt">by=</span><span class="number">3</span>)
<span class="comment"># 1  4  7 10 13 16 19</span>
<span class="keyword">seq</span>(<span class="dt">from =</span> <span class="number">1</span>, <span class="dt">by =</span> .<span class="number">2</span>, <span class="dt">length =</span> <span class="number">10</span>)
<span class="comment"># 1.0 1.2 1.4 1.6 1.8 2.0 2.2 2.4 2.6 2.8</span>

my_seq =<span class="string"> </span><span class="keyword">seq</span>(<span class="number">5</span>, <span class="number">10</span>,<span class="dt">length=</span><span class="number">30</span>)
<span class="comment">#== my_seq = seq(from = 5, to = 10,length = 30)</span>
<span class="comment">#  [1]  5.000000  5.172414  5.344828  5.517241  5.689655  5.862069  6.034483  6.206897</span>
<span class="comment">#  [9]  6.379310  6.551724  6.724138  6.896552  7.068966  7.241379  7.413793  7.586207</span>
<span class="comment"># [17]  7.758621  7.931034  8.103448  8.275862  8.448276  8.620690  8.793103  8.965517</span>
<span class="comment"># [25]  9.137931  9.310345  9.482759  9.655172  9.827586 10.000000</span>
<span class="keyword">seq</span>(<span class="dt">along.with =</span> my_seq) 
##== 1:30
<span class="keyword">seq_along</span>(my_seq) 
##== 1:30</pre></td></tr></tbody></table></figure>
<figure class="highlight R"><table><tbody><tr><td class="code"><pre class="sourceCode r"><span class="keyword">rep</span>(<span class="number">4</span><span class="string">:</span><span class="number">5</span>, <span class="number">4</span>) 
##== rep(4:5,times=4)
<span class="comment"># 4 5 4 5 4 5 4 5</span>
<span class="keyword">rep</span>(<span class="number">1</span><span class="string">:</span><span class="number">5</span>, <span class="dt">each =</span> <span class="number">4</span>)
<span class="comment"># 1 1 1 1 2 2 2 2 3 3 3 3 4 4 4 4 5 5 5 5</span>
<span class="keyword">rep</span>(<span class="number">1</span><span class="string">:</span><span class="number">5</span>, <span class="dt">len =</span> <span class="number">12</span>)
<span class="comment"># 1 2 3 4 5 1 2 3 4 5 1 2</span>
<span class="keyword">rep</span>(letters[<span class="number">1</span><span class="string">:</span><span class="number">4</span>], <span class="number">1</span><span class="string">:</span><span class="number">4</span>)
<span class="comment"># [1] "a" "b" "b" "c" "c" "c" "d" "d" "d" "d"</span>
<span class="keyword">rep.int</span>(<span class="number">1</span><span class="string">:</span><span class="number">4</span>, <span class="number">2</span>)
## at least twice as fast when x has names
<span class="comment"># 1 2 3 4 1 2 3 4</span>
<span class="keyword">rep_len</span>(<span class="keyword">seq</span>(<span class="number">1</span>, <span class="number">100</span>, <span class="dt">by=</span><span class="number">3</span>), <span class="number">9</span>)
<span class="comment"># 1  4  7 10 13 16 19 22 25</span></pre></td></tr></tbody></table></figure>
<figure class="highlight R"><table><tbody><tr><td class="code"><pre class="sourceCode r"><span class="keyword">sequence</span>(<span class="number">3</span><span class="string">:</span><span class="number">7</span>)
<span class="comment"># [1] 1 2 3 1 2 3 4 1 2 3 4 5 1 2 3 4 5 6 1 2 3 4 5 6 7</span>

## gl: Generate factor levels: levels, times, total
<span class="keyword">gl</span>(<span class="number">3</span>, <span class="number">10</span>)
<span class="comment">#  1 1 1 1 1 1 1 1 1 1 2 2 2 2 2 2 2 2 2 2 3 3 3 3 3 3 3 3 3 3</span>
<span class="comment"># Levels: 1 2 3</span>
<span class="keyword">gl</span>(<span class="number">3</span>, <span class="number">10</span>, <span class="number">60</span>, <span class="dt">labels =</span> <span class="keyword">c</span>(<span class="string">"A"</span>, <span class="string">"B"</span>,<span class="string">"C"</span>))
<span class="comment"># A A A A A A A A A A B B B B B B B B B B C C C C C C C C C C A A A A A A A A A</span>
<span class="comment"># A B B B B B B B B B B C C C C C C C C C C</span>
<span class="comment"># Levels: A B C</span>

<span class="keyword">interaction</span>(<span class="keyword">gl</span>(<span class="number">2</span>, <span class="number">5</span>), <span class="keyword">gl</span>(<span class="number">5</span>, <span class="number">2</span>))
<span class="comment"># 1.1 1.1 1.2 1.2 1.3 2.3 2.4 2.4 2.5 2.5</span>
<span class="comment"># Levels: 1.1 2.1 1.2 2.2 1.3 2.3 1.4 2.4 1.5 2.5</span>

<span class="keyword">expand.grid</span>(<span class="keyword">c</span>(<span class="number">1</span><span class="string">:</span><span class="number">3</span>),<span class="keyword">c</span>(<span class="number">2</span><span class="string">:</span><span class="number">4</span>))
<span class="comment">#   Var1 Var2</span>
<span class="comment"># 1    1    2</span>
<span class="comment"># 2    2    2</span>
<span class="comment"># 3    3    2</span>
<span class="comment"># 4    1    3</span>
<span class="comment"># 5    2    3</span>
<span class="comment"># 6    3    3</span>
<span class="comment"># 7    1    4</span>
<span class="comment"># 8    2    4</span>
<span class="comment"># 9    3    4</span></pre></td></tr></tbody></table></figure>
</div>
<div class="section level2" id="simple-calculation">
<h2>Simple Calculation</h2>
<p>Avaiable triangle functions:</p>
<p><code>sin cos tan cot sec csc asin acos atan sinh cosh tanh</code></p>
<figure class="highlight R"><table><tbody><tr><td class="code"><pre class="sourceCode r">.<span class="number">5</span> <span class="string">+</span><span class="string"> </span><span class="string">-</span><span class="number">2</span><span class="string">:</span><span class="number">4</span>
<span class="comment"># -1.5 -0.5  0.5  1.5  2.5  3.5  4.5</span>
<span class="number">2</span><span class="string">^</span>(<span class="number">1</span><span class="string">/</span><span class="number">2</span>)
<span class="comment"># 1.414214</span>
<span class="keyword">sqrt</span>(<span class="number">2</span>)<span class="string">+</span><span class="keyword">abs</span>(<span class="string">-</span><span class="keyword">sin</span>(pi))
<span class="comment"># 1.41421356237</span>
<span class="keyword">sqrt</span>(<span class="string">-</span><span class="number">2</span><span class="string">+</span>0i)
<span class="comment"># 0+1.414214i</span>
<span class="keyword">factorial</span>(<span class="number">0</span>)
<span class="comment"># 1</span>
<span class="keyword">factorial</span>(<span class="number">10</span>)
<span class="comment"># 3628800</span>
<span class="keyword">choose</span>(<span class="number">10</span>,<span class="number">4</span>)
<span class="comment"># 210</span>
<span class="keyword">choose</span>(<span class="number">10</span>,<span class="number">1</span><span class="string">:</span><span class="number">10</span>)
<span class="comment"># 10  45 120 210 252 210 120  45  10   1</span>
<span class="keyword">combn</span>(<span class="number">5</span>,<span class="number">3</span>)
<span class="comment"># 1    1    1    1    1    1    2    2    2     3</span>
<span class="comment"># 2    2    2    3    3    4    3    3    4     4</span>
<span class="comment"># 3    4    5    4    5    5    4    5    5     5</span></pre></td></tr></tbody></table></figure>
<figure class="highlight R"><table><tbody><tr><td class="code"><pre class="sourceCode r">x &lt;-<span class="string"> </span><span class="string">-</span><span class="number">1</span><span class="string">:</span><span class="number">12</span>
<span class="number">2</span> <span class="string">*</span><span class="string"> </span>x <span class="string">+</span><span class="string"> </span>x <span class="string">^</span><span class="string"> </span><span class="number">2</span>
<span class="comment">#== 2 * x + x**2</span>
<span class="comment"># -1   0   3   8  15  24  35  48  63  80  99 120 143 168</span>
<span class="keyword">c</span>(<span class="number">1</span>,<span class="number">2</span>) <span class="string">*</span><span class="string"> </span>x
<span class="comment"># -1  0  1  4  3  8  5 12  7 16  9 20 11 24</span>

## Quotient 
x <span class="string">%%</span><span class="string"> </span><span class="number">5</span>
<span class="comment"># 4 0 1 2 3 4 0 1 2 3 4 0 1 2</span>

## Modulus
x <span class="string">%/%</span><span class="string"> </span><span class="number">5</span>
<span class="comment"># -1  0  0  0  0  0  1  1  1  1  1  2  2  2</span>

<span class="keyword">min</span>(x);<span class="keyword">max</span>(x);<span class="keyword">range</span>(x);<span class="keyword">median</span>(x);<span class="keyword">length</span>(x)
<span class="comment"># -1</span>
<span class="comment"># 12</span>
<span class="comment"># -1 12</span>
<span class="comment"># 5.5</span>
<span class="comment"># 14</span>
<span class="keyword">which</span>(x <span class="string">&lt;</span><span class="string"> </span><span class="number">2</span>)
<span class="comment"># 1 2 3</span>
<span class="keyword">which.max</span>(x);<span class="keyword">which.min</span>(x);<span class="keyword">range</span>(x)
<span class="comment"># 14</span>
<span class="comment"># 1</span>
<span class="comment"># -1 12</span>
<span class="keyword">mean</span>(x)
<span class="keyword">weighted.mean</span>(x, <span class="keyword">rep</span>(<span class="number">1</span>,<span class="keyword">length</span>(x)))
<span class="comment"># 5.5</span>
<span class="keyword">weighted.mean</span>(x, <span class="number">1</span><span class="string">:</span><span class="keyword">length</span>(x))
<span class="comment"># 7.666667</span>
<span class="keyword">median</span>(x)
<span class="comment"># 5.5</span>
<span class="keyword">sum</span>(x);<span class="keyword">prod</span>(x[<span class="string">-</span><span class="number">2</span>])
<span class="comment"># 77</span>
<span class="comment"># -479001600</span>
<span class="keyword">cumsum</span>(x);<span class="keyword">cumprod</span>(x);<span class="keyword">cummax</span>(x);<span class="keyword">cummin</span>(x)
<span class="comment"># [1] -1 -1  0  2  5  9 14 20 27 35 44 54 65 77</span>
<span class="comment"># [1] -1  0  0  0  0  0  0  0  0  0  0  0  0  0</span>
<span class="comment"># [1] -1  0  1  2  3  4  5  6  7  8  9 10 11 12</span>
<span class="comment"># [1] -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1</span>
<span class="keyword">sd</span>(x)<span class="string">^</span><span class="number">2</span> ## sample standard deviation
<span class="comment"># sum((x-mean(x))^2)/(length(x)-1)</span>
<span class="comment"># 17.5</span>
<span class="keyword">var</span>(x) ## sample variance
<span class="comment"># 17.5</span>
<span class="keyword">mad</span>(x) ## Median absolute deviation
<span class="comment"># 1.4826*mean(abs(x-median(x)))</span>
<span class="comment"># 5.1891 </span>
<span class="keyword">sign</span>(x)
<span class="comment"># -1  0  1  1  1  1  1  1  1  1  1  1  1  1</span></pre></td></tr></tbody></table></figure>
</div>
<div class="section level2" id="set">
<h2>Set</h2>
<figure class="highlight R"><table><tbody><tr><td class="code"><pre class="sourceCode r">x &lt;-<span class="string"> </span><span class="number">1</span><span class="string">:</span><span class="number">10</span>
y &lt;-<span class="string"> </span><span class="keyword">c</span>(<span class="number">3</span><span class="string">:</span><span class="number">7</span>,<span class="number">11</span><span class="string">:</span><span class="number">13</span>)
z &lt;-<span class="string"> </span><span class="keyword">c</span>(<span class="number">4</span><span class="string">:</span><span class="number">5</span>,<span class="number">1</span><span class="string">:</span><span class="number">2</span>,<span class="number">12</span>)
<span class="keyword">intersect</span>(x, y)
<span class="comment"># 3 4 5 6 7</span>
<span class="keyword">union</span>(x, y)
<span class="comment"># 1  2  3  4  5  6  7  8  9 10 11 12 13</span>
<span class="keyword">setdiff</span>(x, y)
<span class="comment"># 1  2  8  9 10</span>
<span class="keyword">setequal</span>(x, <span class="keyword">c</span>(<span class="number">1</span><span class="string">:</span><span class="number">2</span>, y[<span class="string">-</span><span class="keyword">c</span>(<span class="number">6</span><span class="string">:</span><span class="number">8</span>)], <span class="number">8</span><span class="string">:</span><span class="number">10</span>))
<span class="comment"># TRUE</span>
<span class="keyword">unique</span>(<span class="keyword">c</span>(x,y,z))
<span class="comment"># 1  2  3  4  5  6  7  8  9 10 11 12 13</span>
<span class="keyword">c</span>(x,y,z)[<span class="keyword">duplicated</span>(<span class="keyword">c</span>(x,y,z))]
<span class="comment"># 3  4  5  6  7  4  5  1  2 12</span>
y <span class="string">%in%</span><span class="string"> </span>x
<span class="keyword">is.element</span>(y, x)
<span class="comment"># TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE</span></pre></td></tr></tbody></table></figure>
</div>
<div class="section level2" id="quantile">
<h2>Quantile</h2>
<figure class="highlight R"><table><tbody><tr><td class="code"><pre class="sourceCode r"><span class="keyword">fivenum</span>(x) 
## (x[floor(length(x)/4)] + x[ceiling(length(x)/4)+1])/2
## (x[floor(length(x)/4*3)] + x[ceiling(length(x)/4*3)+1])/2
<span class="comment"># -1.0  2.0  5.5  9.0 12.0</span>

<span class="keyword">quantile</span>(x) ## quantile(x,type = 7)
<span class="comment">#   0%   25%   50%   75%  100% </span>
<span class="comment"># -1.00  2.25  5.50  8.75 12.00</span>

<span class="number">3</span><span class="string">/</span><span class="number">4</span> <span class="string">+</span><span class="string"> </span><span class="number">1</span>;x[<span class="number">4</span>]<span class="string">*</span><span class="fl">0.75</span><span class="string">+</span>x[<span class="number">5</span>]<span class="string">*</span><span class="fl">0.25</span>;<span class="number">13</span><span class="string">/</span><span class="number">4</span><span class="string">*</span><span class="number">3</span> <span class="string">+</span><span class="string"> </span><span class="number">1</span>;x[<span class="number">10</span>]<span class="string">*</span><span class="fl">0.25</span><span class="string">+</span>x[<span class="number">11</span>]<span class="string">*</span><span class="fl">0.75</span>
<span class="comment"># [1] 1.75</span>
<span class="comment"># [1] 2.25</span>
<span class="comment"># [1] 10.75</span>
<span class="comment"># [1] 8.75</span>
<span class="keyword">quantile</span>(x, <span class="dt">type=</span><span class="number">6</span>) 
<span class="comment">#    0%   25%   50%   75%  100% </span>
<span class="comment"># -1.00  1.75  5.50  9.25 12.00</span>
<span class="number">15</span><span class="string">/</span><span class="number">4</span>;x[<span class="number">3</span>]<span class="string">*</span><span class="fl">0.25</span><span class="string">+</span>x[<span class="number">4</span>]<span class="string">*</span><span class="fl">0.75</span>;<span class="number">15</span><span class="string">/</span><span class="number">4</span><span class="string">*</span><span class="number">3</span>;x[<span class="number">11</span>]<span class="string">*</span><span class="fl">0.75</span><span class="string">+</span>x[<span class="number">12</span>]<span class="string">*</span><span class="fl">0.25</span>
<span class="comment"># [1] 3.75</span>
<span class="comment"># [1] 1.75</span>
<span class="comment"># [1] 11.25</span>
<span class="comment"># [1] 9.25</span>
<span class="keyword">IQR</span>(x)
<span class="comment"># 6.5</span>
<span class="keyword">IQR</span>(x,<span class="dt">type =</span> <span class="number">6</span>)
<span class="comment"># [1] 7.5</span></pre></td></tr></tbody></table></figure>
</div>
<div class="section level2" id="logarithm">
<h2>Logarithm</h2>
<figure class="highlight R"><table><tbody><tr><td class="code"><pre class="sourceCode r"><span class="keyword">log</span>(<span class="number">8</span>, <span class="dt">base =</span> <span class="number">2</span>)
<span class="comment"># 3</span>
<span class="keyword">log10</span>(<span class="number">10</span>)s
<span class="comment"># 1</span>
<span class="keyword">log2</span>(<span class="number">8</span>)
<span class="comment"># 3</span>
<span class="keyword">log1p</span>(<span class="number">2</span>)
<span class="comment"># log1p(x) := log(1+x)</span>
<span class="comment"># 1.098612</span>
<span class="keyword">log</span>(<span class="keyword">exp</span>(<span class="number">3</span>), <span class="dt">base =</span> <span class="keyword">exp</span>(<span class="number">1</span>))
<span class="keyword">log</span>(<span class="keyword">exp</span>(<span class="number">3</span>))
<span class="comment"># 3</span>
<span class="keyword">expm1</span>(<span class="number">1</span>)
<span class="comment"># expm1(x) := exp(x) - 1</span>
<span class="comment"># 1.718282</span>
<span class="keyword">exp</span>(<span class="keyword">log</span>(<span class="number">10</span>))
<span class="comment"># 10</span></pre></td></tr></tbody></table></figure>
<p>R caution</p>
<figure class="highlight R"><table><tbody><tr><td class="code"><pre class="sourceCode r"><span class="keyword">log</span>(<span class="number">8</span>, <span class="dt">base =</span> <span class="number">0</span>)
<span class="comment"># 0!!!</span>
(<span class="string">-</span><span class="number">8</span>)<span class="string">^</span>(<span class="number">1</span><span class="string">/</span><span class="number">3</span>)
<span class="comment"># !!!NaN</span>
<span class="keyword">sqrt</span>(<span class="string">-</span><span class="number">2</span>)
<span class="comment"># NaN</span></pre></td></tr></tbody></table></figure>
</div>
<div class="section level2" id="floor-ceiling-trunc">
<h2>Floor Ceiling Trunc</h2>
<figure class="highlight R"><table><tbody><tr><td class="code"><pre class="sourceCode r">nums &lt;-<span class="keyword">c</span>(pi,<span class="string">-</span>pi,<span class="keyword">exp</span>(<span class="number">1</span>),<span class="fl">1.5</span>,<span class="string">-</span><span class="fl">1.5</span>,<span class="fl">0.5</span>)

<span class="keyword">floor</span>(nums)
<span class="comment"># 3 -4  2  1 -2  0</span>
<span class="keyword">ceiling</span>(nums)
<span class="comment"># 4 -3  3  2 -1  1</span>
<span class="keyword">trunc</span>(nums)
<span class="comment"># 3 -3  2  1 -1  0</span>
<span class="comment"># nagtive numbers will be truncated, its round toward zero</span>
<span class="keyword">round</span>(nums,<span class="number">1</span>)
<span class="comment"># 3.1 -3.1  2.7  1.5 -1.5  0.5</span>
<span class="keyword">round</span>(nums)
<span class="comment"># 3 -3  3  2 -2  0</span>
## really weird, but from round(0.15, 1) could be either 0.1 or 0.2,coz 0.15 is not represented exactly

<span class="keyword">round</span>(<span class="string">-</span><span class="fl">5.5</span><span class="string">+</span><span class="number">1</span><span class="string">:</span><span class="number">10</span>)
<span class="comment"># -4 -4 -2 -2  0  0  2  2  4  4</span>
<span class="comment"># thus with .5 values rounded to even number</span>
comp &lt;-<span class="string"> </span><span class="keyword">c</span>(<span class="fl">1.4</span><span class="string">+</span><span class="fl">2118.</span>8i,<span class="number">2118</span>,pi)
<span class="keyword">round</span>(comp,<span class="string">-</span><span class="number">2</span>)
<span class="comment">#  0+2100i 2100+0i 0+0i</span>
<span class="keyword">signif</span>(comp, <span class="dt">digits =</span> <span class="number">6</span>)
<span class="comment"># 1.4+2118.8i 2118.0+0.0i 3.14159+0.0i</span>

<span class="number">29</span><span class="string">*</span><span class="number">50</span><span class="string">/</span><span class="number">50</span>
<span class="comment"># 29</span>
<span class="number">29</span><span class="string">/</span><span class="number">50</span><span class="string">*</span><span class="number">50</span>
<span class="comment"># 29</span>
<span class="keyword">floor</span>(<span class="number">29</span><span class="string">/</span><span class="number">50</span> <span class="string">*</span><span class="string"> </span><span class="number">50</span>)
<span class="comment"># 28</span>
<span class="keyword">floor</span>(<span class="number">29</span> <span class="string">*</span><span class="string"> </span><span class="number">50</span><span class="string">/</span><span class="number">50</span>)
<span class="comment"># 29</span>
.<span class="number">5</span><span class="string">-</span>.<span class="number">8</span><span class="string">+</span>.<span class="number">3</span>
<span class="comment"># -5.551115e-17</span>

op &lt;-<span class="string"> </span><span class="keyword">options</span>(<span class="dt">digits =</span> <span class="number">22</span>)
<span class="fl">0.58</span><span class="string">*</span><span class="number">50</span>
<span class="comment">#  28.999999999999996</span>
<span class="keyword">options</span>(op)</pre></td></tr></tbody></table></figure>
</div>
<div class="section level2" id="formatting">
<h2>Formatting</h2>
<figure class="highlight R"><table><tbody><tr><td class="code"><pre class="sourceCode r">x &lt;-<span class="string"> </span><span class="keyword">c</span>(<span class="fl">3.1</span>,<span class="fl">2.71828</span>,<span class="number">100</span>)
<span class="keyword">format</span>(x)
<span class="comment"># " 3.10000" " 2.71828" "100.00000"</span>
<span class="keyword">format</span>(x, <span class="dt">trim =</span> T)
<span class="comment"># "3.10000"  "2.71828"  "100.00000"</span>
<span class="keyword">format</span>(x, <span class="dt">nsmall =</span> <span class="number">3</span>,<span class="dt">digits =</span> <span class="number">2</span>) ## digits(minimum) --&gt; nsmall
<span class="comment"># "  3.100" "  2.718" "100.000"</span>
<span class="keyword">format</span>(<span class="keyword">c</span>(x,<span class="string">"Hi"</span>), <span class="dt">justify =</span> <span class="string">"left"</span>)
<span class="comment"># "3.1    " "2.71828" "100    " "Hi     "</span>
<span class="keyword">format</span>(x, <span class="dt">scientific =</span> T)
<span class="comment"># "3.10000e+00" "2.71828e+00" "1.00000e+02"</span>
<span class="keyword">format</span>(<span class="keyword">ISOdate</span>(<span class="number">2000</span>, <span class="number">1</span><span class="string">:</span><span class="number">12</span>, <span class="number">1</span>), <span class="string">"%B"</span>) 
<span class="comment"># "一月"   "二月"   "三月"   "四月"   "五月"   "六月"   "七月"   "八月"   "九月"   "十月"   "十一月" "十二月"</span>

<span class="keyword">sprintf</span>(<span class="string">"%.5s"</span>, x)
<span class="comment"># "3.1"   "2.718" "100" </span>
<span class="keyword">sprintf</span>(<span class="string">"%1.0f"</span>, x)
<span class="comment"># "3"   "3"   "100"</span>
<span class="keyword">sprintf</span>(<span class="string">"%05.1f"</span>, x)
<span class="comment"># "003.1" "002.7" "100.0"</span>
<span class="keyword">sprintf</span>(<span class="string">"%-10f"</span>, x) ## left justified
<span class="comment"># "3.100000  " "2.718280  " "100.000000"</span>
<span class="keyword">sprintf</span>(<span class="string">"%g"</span>,   <span class="fl">1e6</span> <span class="string">*</span><span class="string"> </span>x) ## exponential
<span class="comment"># "3.1e+06"     "2.71828e+06" "1e+08" </span></pre></td></tr></tbody></table></figure>
</div>
<div class="section level2" id="interval">
<h2>Interval</h2>
<figure class="highlight R"><table><tbody><tr><td class="code"><pre class="sourceCode r"><span class="keyword">cut</span>(<span class="number">0</span><span class="string">:</span><span class="number">10</span>,<span class="dt">breaks =</span> <span class="number">4</span>)
<span class="comment">#  [1] (-0.01,2.5] (-0.01,2.5] (-0.01,2.5] (2.5,5]     (2.5,5]     (2.5,5]    </span>
<span class="comment">#  [7] (5,7.5]     (5,7.5]     (7.5,10]    (7.5,10]    (7.5,10]   </span>
<span class="comment"># Levels: (-0.01,2.5] (2.5,5] (5,7.5] (7.5,10]</span>
<span class="keyword">cbind</span>(<span class="number">0</span><span class="string">:</span><span class="number">10</span>, <span class="keyword">findInterval</span>(<span class="number">0</span><span class="string">:</span><span class="number">10</span>, <span class="keyword">c</span>(<span class="number">2</span>, <span class="number">5</span>, <span class="fl">7.5</span>)))
<span class="comment">#        [,1] [,2]</span>
<span class="comment">#  [1,]    0    0</span>
<span class="comment">#  [2,]    1    0</span>
<span class="comment">#  [3,]    2    1</span>
<span class="comment">#  [4,]    3    1</span>
<span class="comment">#  [5,]    4    1</span>
<span class="comment">#  [6,]    5    2</span>
<span class="comment">#  [7,]    6    2</span>
<span class="comment">#  [8,]    7    2</span>
<span class="comment">#  [9,]    8    3</span>
<span class="comment"># [10,]    9    3</span>
<span class="comment"># [11,]   10    3</span>
<span class="keyword">cbind</span>(<span class="number">0</span><span class="string">:</span><span class="number">10</span>, <span class="keyword">findInterval</span>(<span class="number">0</span><span class="string">:</span><span class="number">10</span>, <span class="keyword">c</span>(<span class="number">2</span>, <span class="number">5</span>, <span class="fl">7.5</span>),<span class="dt">left.open =</span> T))
<span class="comment">#       [,1] [,2]</span>
<span class="comment">#  [1,]    0    0</span>
<span class="comment">#  [2,]    1    0</span>
<span class="comment">#  [3,]    2    0</span>
<span class="comment">#  [4,]    3    1</span>
<span class="comment">#  [5,]    4    1</span>
<span class="comment">#  [6,]    5    1</span>
<span class="comment">#  [7,]    6    2</span>
<span class="comment">#  [8,]    7    2</span>
<span class="comment">#  [9,]    8    3</span>
<span class="comment"># [10,]    9    3</span>
<span class="comment"># [11,]   10    3</span></pre></td></tr></tbody></table></figure>
</div>
<div class="section level2" id="formula">
<h2>Formula</h2>
<figure class="highlight R"><table><tbody><tr><td class="code"><pre class="sourceCode r">## This returns a string:
<span class="string">"y ~ x1 + x2"</span>
<span class="comment">#  "y ~ x1 + x2"</span>

## This returns a formula:
<span class="keyword">as.formula</span>(<span class="string">"y ~ x1 + x2"</span>)
<span class="comment"># y ~ x1 + x2</span>

<span class="keyword">class</span>(y <span class="string">~</span><span class="string"> </span>x1 <span class="string">+</span><span class="string"> </span>x2)
<span class="comment"># "formula"</span>

f &lt;-<span class="string"> </span><span class="keyword">as.formula</span>(<span class="keyword">paste</span>(<span class="string">"Y"</span>, <span class="keyword">paste</span>(letters[<span class="number">1</span><span class="string">:</span><span class="number">5</span>], <span class="dt">collapse=</span><span class="string">" + "</span>), <span class="dt">sep=</span><span class="string">" ~ "</span>))
<span class="comment"># Y ~ a + b + c + d + e</span>

## Take a look at f
<span class="keyword">str</span>(f)
<span class="comment"># Class 'formula'  language Y ~ a + b + c + d + e</span>
<span class="comment">#   ..- attr(*, ".Environment")=&lt;environment: R_GlobalEnv&gt; </span>
<span class="keyword">environment</span>(f)

<span class="comment"># Get each part</span>
f[[<span class="number">1</span>]]
<span class="comment"># `~`</span>
f[[<span class="number">2</span>]]
<span class="comment"># Y</span>
f[[<span class="number">3</span>]]
<span class="comment"># a + b + c + d + e</span>

## View the whole thing as a list
<span class="keyword">as.list</span>(f)
<span class="comment"># [[1]]</span>
<span class="comment"># `~`</span>
<span class="comment"># </span>
<span class="comment"># [[2]]</span>
<span class="comment"># Y</span>
<span class="comment"># </span>
<span class="comment"># [[3]]</span>
<span class="comment"># a + b + c + d + e</span>


<span class="keyword">as.character</span>(<span class="keyword">c</span>(f[[<span class="number">1</span>]],f[[<span class="number">2</span>]],f[[<span class="number">3</span>]]))
<span class="comment"># [1] "`~`"               "Y"                 "a + b + c + d + e"</span>

<span class="keyword">as.character</span>(f[[<span class="number">3</span>]])
<span class="comment"># "+"             "a + b + c + d" "e"</span>

## You can use deparse() to get a more natural looking string
<span class="keyword">deparse</span>(f[[<span class="number">3</span>]])
<span class="comment"># "a + b + c + d + e"</span>
<span class="keyword">deparse</span>(f)
<span class="comment"># "Y ~ a + b + c + d + e"</span></pre></td></tr></tbody></table></figure>
</div>
<div class="section level2" id="piecewise-function">
<h2>Piecewise function</h2>
<span class="math display">\[\begin{equation}
f(x)=\left\{
\begin{aligned}
\cos(x), x&lt;=0\\
\sin(x), 0&lt;x&lt;=2\\
\frac x5, x&gt;2
\end{aligned}
\right.
\end{equation}\]</span>
<figure class="highlight R"><table><tbody><tr><td class="code"><pre class="sourceCode r">x &lt;-<span class="string"> </span><span class="string">-</span><span class="number">5</span><span class="string">:</span><span class="number">5</span>
f &lt;-<span class="string"> </span><span class="cf">function</span>(x){
<span class="cf">if</span>(x<span class="string">&lt;=</span><span class="number">0</span>)
   y=<span class="keyword">cos</span>(x)
<span class="cf">else</span> <span class="cf">if</span>(x<span class="string">&gt;</span><span class="number">0</span><span class="string">&amp;</span>x<span class="string">&lt;=</span><span class="number">2</span>)
   y=<span class="keyword">sin</span>(x)
<span class="cf">else</span>
   y=x<span class="string">/</span><span class="number">5</span>
<span class="keyword">return</span>(y)
}
<span class="keyword">sapply</span>(x, f)
<span class="comment"># 0.2836622 -0.6536436 -0.9899925 -0.4161468  0.5403023 1.0000000  0.8414710  0.9092974  0.6000000  0.8000000 1.0000000</span></pre></td></tr></tbody></table></figure>
<figure class="highlight R"><table><tbody><tr><td class="code"><pre class="sourceCode r">y &lt;-<span class="string"> </span><span class="keyword">numeric</span>(<span class="keyword">length</span>(x))
y[x<span class="string">&lt;=</span><span class="number">0</span>] &lt;-<span class="string"> </span><span class="keyword">cos</span>(x[x<span class="string">&lt;=</span><span class="number">0</span>])
y[x<span class="string">&gt;</span><span class="number">0</span> <span class="string">&amp;</span><span class="string"> </span>x<span class="string">&lt;=</span><span class="number">2</span>] &lt;-<span class="string"> </span><span class="keyword">sin</span>(x[x<span class="string">&gt;</span><span class="number">0</span> <span class="string">&amp;</span><span class="string"> </span>x<span class="string">&lt;=</span><span class="number">2</span>])
y[x<span class="string">&gt;</span><span class="number">2</span>] &lt;-<span class="string"> </span>x[x<span class="string">&gt;</span><span class="number">2</span>]<span class="string">/</span><span class="number">5</span>
y
<span class="comment"># 0.2836622 -0.6536436 -0.9899925 -0.4161468  0.5403023 1.0000000  0.8414710  0.9092974  0.6000000  0.8000000 1.0000000</span></pre></td></tr></tbody></table></figure>
</div>
<div class="section level2" id="complex">
<h2>Complex</h2>
<ul>
<li>complex(length.out = 0, real = numeric(), imaginary = numeric(),modulus = 1, argument = 0)</li>
<li>as.complex(x, …)</li>
<li>is.complex(x)</li>
<li>Re(z)</li>
<li>Im(z)</li>
<li>Mod(z)</li>
<li>Arg(z)</li>
<li>Conj(z)</li>
</ul>
<figure class="highlight R"><table><tbody><tr><td class="code"><pre class="sourceCode r">1i<span class="string">*</span>(<span class="number">9</span><span class="string">:</span><span class="number">1</span>)
<span class="comment"># 0+9i 0+8i 0+7i 0+6i 0+5i 0+4i 0+3i 0+2i 0+1i</span>
<span class="keyword">Re</span>(<span class="number">1</span> <span class="string">+</span><span class="string"> </span>2i);<span class="keyword">Im</span>(<span class="number">1</span> <span class="string">+</span><span class="string"> </span>2i)
<span class="comment"># 1</span>
<span class="comment"># 2</span>
<span class="keyword">Mod</span>(<span class="number">1</span> <span class="string">+</span><span class="string"> </span>2i)
<span class="comment"># 2.236068</span>
<span class="keyword">Arg</span>(<span class="number">1</span> <span class="string">+</span><span class="string"> </span>2i)
<span class="comment"># 1.107149</span>
<span class="keyword">Conj</span>(<span class="number">1</span> <span class="string">+</span><span class="string"> </span>2i)
<span class="comment"># 1-2i</span></pre></td></tr></tbody></table></figure>
<figure class="highlight R"><table><tbody><tr><td class="code"><pre class="sourceCode r">z &lt;-<span class="string"> </span>(<span class="keyword">rep</span>(<span class="number">1</span><span class="string">:</span><span class="number">4</span>, <span class="dt">len =</span> <span class="number">9</span>) <span class="string">+</span><span class="string"> </span>1i<span class="string">*</span>(<span class="number">9</span><span class="string">:</span><span class="number">1</span>))<span class="string">/</span><span class="number">10</span>
<span class="comment"># 0.1+0.9i 0.2+0.8i 0.3+0.7i 0.4+0.6i 0.1+0.5i 0.2+0.4i 0.3+0.3i 0.4+0.2i 0.1+0.1i</span>
z.shift &lt;-<span class="string"> </span><span class="keyword">complex</span>(<span class="dt">modulus =</span> <span class="keyword">Mod</span>(z), <span class="dt">argument =</span> <span class="keyword">Arg</span>(z) <span class="string">+</span><span class="string"> </span>pi)
<span class="comment"># -0.1-0.9i -0.2-0.8i -0.3-0.7i -0.4-0.6i -0.1-0.5i -0.2-0.4i -0.3-0.3i -0.4-0.2i -0.1-0.1i</span>
<span class="keyword">plot</span>(z, <span class="dt">xlim =</span> <span class="keyword">c</span>(<span class="string">-</span><span class="number">1</span>,<span class="number">1</span>), <span class="dt">ylim =</span> <span class="keyword">c</span>(<span class="string">-</span><span class="number">1</span>,<span class="number">1</span>), <span class="dt">col =</span> <span class="string">"red"</span>,
     <span class="dt">main =</span> <span class="keyword">expression</span>(<span class="keyword">paste</span>(<span class="string">"Rotation by "</span>,<span class="string">" "</span>, pi <span class="string">==</span><span class="string"> </span><span class="number">180</span><span class="string">^</span>o)))
<span class="keyword">abline</span>(<span class="dt">h =</span> <span class="number">0</span>, <span class="dt">v =</span> <span class="number">0</span>, <span class="dt">col =</span> <span class="string">"blue"</span>, <span class="dt">lty =</span> <span class="number">3</span>)
<span class="keyword">points</span>(z.shift, <span class="dt">col =</span> <span class="string">"orange"</span>)
<span class="keyword">points</span>(<span class="keyword">complex</span>(<span class="dt">re=</span><span class="keyword">Re</span>(z)<span class="string">*</span><span class="number">2</span>, <span class="dt">im=</span><span class="keyword">tan</span>(<span class="keyword">Re</span>(z)<span class="string">*</span><span class="number">2</span>)),<span class="dt">col=</span><span class="string">"gray20"</span>,<span class="dt">pch =</span> <span class="number">16</span>)
<span class="keyword">points</span>(<span class="keyword">complex</span>(<span class="dt">re=</span><span class="string">-</span><span class="keyword">Re</span>(z)<span class="string">*</span><span class="number">2</span>, <span class="dt">im=</span><span class="keyword">tan</span>(<span class="string">-</span><span class="keyword">Re</span>(z)<span class="string">*</span><span class="number">2</span>)),<span class="dt">col=</span><span class="string">"gray20"</span>,<span class="dt">pch =</span> <span class="number">16</span>)</pre></td></tr></tbody></table></figure>
</div>
<div class="section level2" id="large-integers">
<h2>Large Integers</h2>
<figure class="highlight R"><table><tbody><tr><td class="code"><pre class="sourceCode r"><span class="keyword">library</span>(gmp)</pre></td></tr></tbody></table></figure>
<ul>
<li>add.bigz(e1, e2)</li>
<li>sub.bigz(e1, e2 = NULL)</li>
<li>mul.bigz(e1, e2)</li>
<li>div.bigz(e1, e2)</li>
<li>divq.bigz(e1,e2) ## == e1 %/% e2</li>
<li>mod.bigz(e1, e2) ## == e1 %% e2</li>
</ul>
<figure class="highlight R"><table><tbody><tr><td class="code"><pre class="sourceCode r"><span class="number">2</span><span class="string">^</span><span class="number">1024</span>
<span class="comment"># 1.60693804426e+60</span>
<span class="keyword">as.bigz</span>(<span class="number">2</span>)<span class="string">^</span><span class="number">200</span>
<span class="keyword">pow.bigz</span>(<span class="number">2</span>,<span class="number">200</span>)
<span class="comment"># Big Integer ('bigz') :</span>
<span class="comment"># [1] 1606938044258990275541962092341162602522202993782792835301376</span>
<span class="keyword">nchar</span>(<span class="keyword">as.character</span>(<span class="keyword">as.bigz</span>(<span class="number">1024</span><span class="string">^</span><span class="number">1024</span>)<span class="string">^</span><span class="number">1024</span>)[<span class="number">1</span>])
<span class="comment"># 2466038</span></pre></td></tr></tbody></table></figure>
</div>
</div>
<div class="section level1" id="examples-1">
<h1>Examples 1</h1>
<div class="section level2" id="simple-calculator">
<h2>Simple Calculator</h2>
<figure class="highlight R"><table><tbody><tr><td class="code"><pre class="sourceCode r">add &lt;-<span class="string"> </span><span class="cf">function</span>(x, y) {
    <span class="keyword">return</span>(x <span class="string">+</span><span class="string"> </span>y)
}

subtract &lt;-<span class="string"> </span><span class="cf">function</span>(x, y) {
    <span class="keyword">return</span>(x <span class="string">-</span><span class="string"> </span>y)
}

multiply &lt;-<span class="string"> </span><span class="cf">function</span>(x, y) {
    <span class="keyword">return</span>(x <span class="string">*</span><span class="string"> </span>y)
}

divide &lt;-<span class="string"> </span><span class="cf">function</span>(x, y) {
    <span class="keyword">return</span>(x <span class="string">/</span><span class="string"> </span>y)
}


<span class="comment"># take input from the user</span>

<span class="keyword">print</span>(<span class="string">"Select operation."</span>)
<span class="keyword">print</span>(<span class="string">"1.Add"</span>)
<span class="keyword">print</span>(<span class="string">"2.Subtract"</span>)
<span class="keyword">print</span>(<span class="string">"3.Multiply"</span>)
<span class="keyword">print</span>(<span class="string">"4.Divide"</span>)

choice =<span class="string"> </span><span class="keyword">as.integer</span>(<span class="keyword">readline</span>(<span class="dt">prompt=</span><span class="string">"Enter choice[1/2/3/4]: "</span>))

num1 =<span class="string"> </span><span class="keyword">as.integer</span>(<span class="keyword">readline</span>(<span class="dt">prompt=</span><span class="string">"Enter first number: "</span>))
num2 =<span class="string"> </span><span class="keyword">as.integer</span>(<span class="keyword">readline</span>(<span class="dt">prompt=</span><span class="string">"Enter second number: "</span>))

operator &lt;-<span class="string"> </span><span class="cf">switch</span>(choice,<span class="string">"+"</span>,<span class="string">"-"</span>,<span class="string">"*"</span>,<span class="string">"/"</span>)
result &lt;-<span class="string"> </span><span class="cf">switch</span>(choice, <span class="keyword">add</span>(num1, num2), <span class="keyword">subtract</span>(num1, num2), <span class="keyword">multiply</span>(num1, num2), <span class="keyword">divide</span>(num1, num2))

<span class="keyword">print</span>(<span class="keyword">paste</span>(num1, operator, num2, <span class="string">"="</span>, result))</pre></td></tr></tbody></table></figure>
</div>
<div class="section level2" id="triangle">
<h2>Triangle</h2>
<figure class="highlight R"><table><tbody><tr><td class="code"><pre class="sourceCode r">triangle &lt;-<span class="string"> </span><span class="cf">function</span>(n, <span class="dt">unit=</span><span class="string">"degrees"</span>){
  rad &lt;-<span class="string"> </span>n<span class="string">/</span><span class="number">180</span><span class="string">*</span>pi
  mat &lt;-<span class="string"> </span><span class="keyword">array</span>(<span class="number">0</span>, <span class="dt">dim =</span> <span class="keyword">c</span>(<span class="number">1</span>,<span class="number">13</span>))
  <span class="keyword">colnames</span>(mat) &lt;-<span class="string"> </span><span class="keyword">c</span>(<span class="string">"triangle"</span>,
                      <span class="string">"sin"</span>,<span class="string">"cos"</span>,<span class="string">"tan"</span>,
                     <span class="string">"csc"</span>,<span class="string">"sec"</span>,<span class="string">"cot"</span>,
                     <span class="string">"asin"</span>,<span class="string">"acos"</span>,<span class="string">"atan"</span>,
                     <span class="string">"sinh"</span>,<span class="string">"cosh"</span>,<span class="string">"tanh"</span>)
   mat[<span class="number">1</span>] &lt;-<span class="string"> </span>n
   mat[<span class="number">2</span>] &lt;-<span class="string"> </span><span class="keyword">sin</span>(rad)
   mat[<span class="number">3</span>] &lt;-<span class="string"> </span><span class="keyword">cos</span>(rad)
   mat[<span class="number">4</span>] &lt;-<span class="string"> </span><span class="keyword">tan</span>(rad)
   mat[<span class="number">5</span>] &lt;-<span class="string"> </span><span class="number">1</span><span class="string">/</span><span class="keyword">sin</span>(rad)
   mat[<span class="number">6</span>] &lt;-<span class="string"> </span><span class="number">1</span><span class="string">/</span><span class="keyword">cos</span>(rad)
   mat[<span class="number">7</span>] &lt;-<span class="string"> </span><span class="number">1</span><span class="string">/</span><span class="keyword">tan</span>(rad)
   mat[<span class="number">8</span>] &lt;-<span class="string"> </span><span class="keyword">asin</span>(rad)
   mat[<span class="number">9</span>] &lt;-<span class="string"> </span><span class="keyword">acos</span>(rad)
   mat[<span class="number">10</span>] &lt;-<span class="string"> </span><span class="keyword">atan</span>(rad)
   mat[<span class="number">11</span>] &lt;-<span class="string"> </span><span class="keyword">sinh</span>(rad)
   mat[<span class="number">12</span>] &lt;-<span class="string"> </span><span class="keyword">cosh</span>(rad)
   mat[<span class="number">13</span>] &lt;-<span class="string"> </span><span class="keyword">tanh</span>(rad)
   <span class="keyword">return</span>(mat)
}
## NOTES:
<span class="comment"># (sqrt(6)-sqrt(2))/4  0.258</span>
<span class="comment"># (sqrt(6)+sqrt(2))/4  0.965</span>
<span class="comment"># 2-sqrt(3)  0.267</span>
<span class="comment"># sqrt(6)+sqrt(2)  3.86</span>
<span class="comment"># sqrt(6)-sqrt(2)  1.03</span>
<span class="comment"># 2+sqrt(3)  3.73</span>

<span class="keyword">triangle</span>(<span class="number">15</span>)
<span class="comment"># triangle      sin       cos       tan      csc      sec      cot      asin    acos</span>
<span class="comment">#  15      0.258819 0.9659258 0.2679492 3.863703 1.035276 3.732051 0.2648861 1.30591</span>
<span class="comment">#     atan      sinh     cosh      tanh</span>
<span class="comment"># 0.2560528 0.2648002 1.034466 0.2559778</span>
<span class="keyword">triangle</span>(<span class="number">30</span>)
<span class="comment"># triangle sin       cos       tan csc      sec      cot      asin     acos      atan      sinh</span>
<span class="comment">#  30      0.5 0.8660254 0.5773503   2 1.154701 1.732051 0.5510696 1.019727 0.4823479 0.5478535</span>
<span class="comment">#    cosh      tanh</span>
<span class="comment"># 1.140238 0.4804728</span></pre></td></tr></tbody></table></figure>
</div>
<div class="section level2" id="isprime">
<h2>isPrime</h2>
<figure class="highlight R"><table><tbody><tr><td class="code"><pre class="sourceCode r"><span class="comment"># num = as.integer(readline(prompt="Enter a number: "))</span>
num =<span class="string"> </span><span class="number">1573</span>

flag =<span class="string"> </span><span class="number">0</span>
<span class="cf">if</span>(num <span class="string">&gt;</span><span class="string"> </span><span class="number">1</span>) {
    flag =<span class="string"> </span><span class="number">1</span>
    <span class="cf">for</span>(i <span class="cf">in</span> <span class="number">2</span><span class="string">:</span>num <span class="string">**</span><span class="string"> </span><span class="fl">0.5</span>) {
        <span class="cf">if</span> ((num <span class="string">%%</span><span class="string"> </span>i) <span class="string">==</span><span class="string"> </span><span class="number">0</span>) {
            flag =<span class="string"> </span><span class="number">0</span>
            <span class="cf">break</span>
        }
    }
} 

<span class="cf">if</span>(num <span class="string">==</span><span class="string"> </span><span class="number">2</span>)    flag =<span class="string"> </span><span class="number">1</span>
<span class="cf">if</span>(flag <span class="string">==</span><span class="string"> </span><span class="number">1</span>) {
    <span class="keyword">print</span>(<span class="keyword">paste</span>(num,<span class="string">"is a prime number"</span>))
} <span class="cf">else</span> {
    <span class="keyword">print</span>(<span class="keyword">paste</span>(num,<span class="string">"is not a prime number:"</span>,num,<span class="string">"/"</span>,i,<span class="string">"="</span>,num<span class="string">/</span>i))
}
<span class="comment"># "1573 is not a prime number: 1573 / 11 = 143"</span></pre></td></tr></tbody></table></figure>
</div>
<div class="section level2" id="factorial">
<h2>Factorial</h2>
<figure class="highlight R"><table><tbody><tr><td class="code"><pre class="sourceCode r">num =<span class="string"> </span><span class="number">10</span>
<span class="keyword">factorial</span>(num)
<span class="comment"># 3628800</span>

factorial &lt;-<span class="string"> </span><span class="cf">function</span>(num){
factorial =<span class="string"> </span><span class="number">1</span>
<span class="cf">if</span>(num <span class="string">&lt;</span><span class="string"> </span><span class="number">0</span>) {
    <span class="keyword">print</span>(<span class="string">"Sorry, factorial does not exist for negative numbers"</span>)
} <span class="cf">else</span> <span class="cf">if</span>(num <span class="string">==</span><span class="string"> </span><span class="number">0</span>) {
    <span class="keyword">print</span>(<span class="string">"The factorial of 0 is 1"</span>)
} <span class="cf">else</span> {
    <span class="cf">for</span>(i <span class="cf">in</span> <span class="number">1</span><span class="string">:</span>num) {
        factorial =<span class="string"> </span>factorial <span class="string">*</span><span class="string"> </span>i
    }
    <span class="keyword">return</span>(<span class="keyword">paste</span>(<span class="string">"The factorial of"</span>, num ,<span class="string">"is"</span>,factorial))
}
}
<span class="keyword">factorial</span>(<span class="number">10</span>)
<span class="comment"># "The factorial of 10 is 3628800"</span>

## Find Factorial of a number using recursion
recursive_factorial &lt;-<span class="string"> </span><span class="cf">function</span>(n) {
    <span class="cf">if</span>(n <span class="string">&lt;=</span><span class="string"> </span><span class="number">1</span>) {
        <span class="keyword">return</span>(<span class="number">1</span>)
    } <span class="cf">else</span> { 
        <span class="keyword">return</span>(n <span class="string">*</span><span class="string"> </span><span class="keyword">recursive_factorial</span>(n<span class="string">-</span><span class="number">1</span>))
    }
}

<span class="keyword">recursive_factorial</span>(num)
<span class="comment"># 3628800</span>

<span class="keyword">rbind</span>(<span class="keyword">system.time</span>(<span class="keyword">recursive_factorial</span>(<span class="number">3000</span>)),<span class="keyword">system.time</span>(<span class="keyword">factorial</span>(<span class="number">3000</span>)))
<span class="comment">#      user.self sys.self elapsed user.child sys.child</span>
<span class="comment"># [1,]      0.01        0    0.02         NA        NA</span>
<span class="comment"># [2,]      0.00        0    0.00         NA        NA</span></pre></td></tr></tbody></table></figure>
<figure class="highlight R"><table><tbody><tr><td class="code"><pre class="sourceCode r"><span class="string">"%!%"</span> &lt;-<span class="string"> </span><span class="cf">function</span>(x, y) {<span class="keyword">factorial</span>(x)<span class="string">/</span><span class="keyword">factorial</span>(y)}
<span class="number">10</span><span class="string">%!%</span><span class="number">8</span>
<span class="comment"># 90</span></pre></td></tr></tbody></table></figure>
</div>
<div class="section level2" id="armstrong-numbernarcissistic-number">
<h2>Armstrong number(narcissistic number)</h2>
<figure class="highlight R"><table><tbody><tr><td class="code"><pre class="sourceCode r">is.Armstrong &lt;-<span class="string"> </span><span class="cf">function</span>(num){
sum =<span class="string"> </span><span class="number">0</span>
temp =<span class="string"> </span>num
<span class="cf">while</span>(temp <span class="string">&gt;</span><span class="string"> </span><span class="number">0</span>) {
    digit =<span class="string"> </span>temp <span class="string">%%</span><span class="string"> </span><span class="number">10</span>
    sum =<span class="string"> </span>sum <span class="string">+</span><span class="string"> </span>(digit <span class="string">**</span><span class="string"> </span><span class="keyword">nchar</span>(num))
    temp =<span class="string"> </span>temp <span class="string">%/%</span><span class="string"> </span><span class="number">10</span>
}
<span class="cf">if</span>(num <span class="string">==</span><span class="string"> </span>sum) {
    <span class="keyword">return</span>(<span class="ot">TRUE</span>)
}<span class="cf">else</span>{
    <span class="keyword">return</span>(<span class="ot">FALSE</span>)
}
}
<span class="keyword">c</span>(<span class="number">100</span><span class="string">:</span><span class="number">100000</span>)[<span class="keyword">sapply</span>(<span class="number">100</span><span class="string">:</span><span class="number">100000</span>,is.Armstrong)]
<span class="comment"># [1]   153   370   371   407  1634  8208  9474 54748 92727 93084</span></pre></td></tr></tbody></table></figure>
</div>
</div>
<div class="section level1" id="examples-2">
<h1>Examples 2</h1>
<div class="section level2" id="bisect">
<h2>Bisect</h2>
<figure class="highlight R"><table><tbody><tr><td class="code"><pre class="sourceCode r">cubic &lt;-<span class="string"> </span><span class="cf">function</span> (x, <span class="dt">a=</span><span class="number">0</span>, <span class="dt">b=</span><span class="number">0</span>, <span class="dt">c=</span><span class="number">0</span>, <span class="dt">d=</span><span class="number">0</span>) a<span class="string">*</span>x<span class="string">^</span><span class="number">3</span> <span class="string">+</span><span class="string"> </span>b<span class="string">*</span>x<span class="string">^</span><span class="number">2</span> <span class="string">+</span><span class="string"> </span>c<span class="string">*</span>x <span class="string">+</span><span class="string"> </span>d
a &lt;-<span class="string"> </span><span class="number">1</span> ; b &lt;-<span class="string"> </span><span class="string">-</span><span class="number">2</span> ; c &lt;-<span class="string"> </span><span class="number">3</span> ; d &lt;-<span class="string"> </span><span class="string">-</span><span class="number">4</span>
result &lt;-<span class="string"> </span><span class="keyword">uniroot</span>(cubic, <span class="keyword">c</span>(<span class="string">-</span><span class="number">5</span>,<span class="number">5</span>), <span class="dt">a =</span> a, <span class="dt">b =</span> b,<span class="dt">c =</span> c,<span class="dt">d =</span> d, <span class="dt">tol =</span> <span class="fl">0.000001</span>)
result
<span class="comment"># $`root`</span>
<span class="comment"># [1] 1.650629</span>
<span class="comment"># </span>
<span class="comment"># $f.root</span>
<span class="comment"># [1] 5.33745e-09</span>
<span class="comment"># </span>
<span class="comment"># $iter</span>
<span class="comment"># [1] 8</span>
<span class="comment"># </span>
<span class="comment"># $init.it</span>
<span class="comment"># [1] NA</span>
<span class="comment"># </span>
<span class="comment"># $estim.prec</span>
<span class="comment"># [1] 5e-07</span></pre></td></tr></tbody></table></figure>
<figure class="highlight R"><table><tbody><tr><td class="code"><pre class="sourceCode r">bisect &lt;-<span class="string"> </span><span class="cf">function</span>(f, a, b, <span class="dt">eps =</span> <span class="fl">1e-5</span>, ...){
  <span class="cf">if</span> (<span class="string">!</span><span class="keyword">is.function</span>(f)){
    <span class="keyword">list</span>(<span class="dt">fail=</span><span class="string">"f is not a function!"</span>)
  }
  <span class="cf">else</span> <span class="cf">if</span>(<span class="keyword">f</span>(a, ...) <span class="string">*</span><span class="string"> </span><span class="keyword">f</span>(b, ...) <span class="string">&gt;</span><span class="string"> </span><span class="number">0</span>)
    <span class="keyword">list</span>(<span class="dt">fail=</span><span class="string">"finding root is fail!"</span>)
  <span class="cf">else</span>{
    <span class="cf">repeat</span>{
    <span class="cf">if</span> (<span class="keyword">abs</span>(b <span class="string">-</span><span class="string"> </span>a) <span class="string">&lt;</span><span class="string"> </span>eps) <span class="cf">break</span>
    x &lt;-<span class="string"> </span>(a <span class="string">+</span><span class="string"> </span>b)<span class="string">/</span><span class="number">2</span>
    <span class="cf">if</span> (<span class="keyword">f</span>(a, ...) <span class="string">*</span><span class="string"> </span><span class="keyword">f</span>(x, ...) <span class="string">&lt;</span><span class="string"> </span><span class="number">0</span>) b &lt;-<span class="string"> </span>x <span class="cf">else</span> a &lt;-<span class="string"> </span>x
    }
    <span class="keyword">list</span>(<span class="dt">root =</span> (a<span class="string">+</span>b)<span class="string">/</span><span class="number">2</span>, <span class="dt">fun =</span> <span class="keyword">f</span>(x, ...))
}
}
<span class="keyword">bisect</span>(cubic, <span class="string">-</span><span class="number">5</span>, <span class="number">5</span>, <span class="dt">eps =</span> <span class="fl">1e-6</span>, <span class="number">1</span>, <span class="string">-</span><span class="number">2</span> , <span class="number">3</span>, <span class="string">-</span><span class="number">4</span>)
<span class="comment"># $`root`</span>
<span class="comment"># [1] 1.650629</span>
<span class="comment"># </span>
<span class="comment"># $fun</span>
<span class="comment"># [1] 2.048755e-06</span></pre></td></tr></tbody></table></figure>
</div>
<div class="section level2" id="newton">
<h2>Newton</h2>
<p>Jacobi matrix:</p>
<span class="math display">\[\begin{equation}
\textbf{J}(x) = 
\begin{bmatrix}
\dfrac{\partial f_1}{\partial x_1} &amp; \dfrac{\partial f_1}{\partial x_2} &amp; \cdots &amp;\dfrac{\partial f_1}{\partial x_n} \\
\dfrac{\partial f_2}{\partial x_1} &amp; \dfrac{\partial f_2}{\partial x_2} &amp;\cdots&amp; \dfrac{\partial f_2}{\partial x_n} \\
\vdots&amp; \vdots&amp; \ddots &amp; \vdots \\
\dfrac{\partial f_m}{\partial x_1} &amp;\dfrac{\partial f_m}{\partial x_2} &amp; \cdots &amp;\dfrac{\partial f_m}{\partial x_n} \\
\end{bmatrix}
\end{equation}\]</span>
<p>If we want to solve this equation (start = c(0,1), ep &lt;= 1e-5):</p>
<span class="math display">\[\begin{equation}
\left\{
\begin{aligned}
\ x_1^2 + x_2^2 - 5 = 0\\
\ (x_1 + 1)x_2 - (3x_2 + 1) = 0\\
\end{aligned}
\right.
\end{equation}\]</span>
<figure class="highlight R"><table><tbody><tr><td class="code"><pre class="sourceCode r">Newtons&lt;-<span class="cf">function</span> (fun, x, <span class="dt">ep =</span> <span class="fl">1e-5</span>, <span class="dt">it_max =</span> <span class="number">100</span>){
  index &lt;-<span class="string"> </span><span class="number">0</span>; k &lt;-<span class="string"> </span><span class="number">1</span>
  <span class="cf">while</span> (k <span class="string">&lt;=</span><span class="string"> </span>it_max){
    x1 &lt;-<span class="string"> </span>x; obj &lt;-<span class="string"> </span><span class="keyword">fun</span>(x);
    x &lt;-<span class="string"> </span>x <span class="string">-</span><span class="string"> </span><span class="keyword">solve</span>(obj<span class="string">$</span>J, obj<span class="string">$</span>f);
    norm &lt;-<span class="string"> </span><span class="keyword">sqrt</span>((x <span class="string">-</span><span class="string"> </span>x1) <span class="string">%*%</span><span class="string"> </span>(x <span class="string">-</span><span class="string"> </span>x1))
    <span class="cf">if</span> (norm <span class="string">&lt;</span><span class="string"> </span>ep){
      success &lt;-<span class="string"> </span><span class="number">1</span>; <span class="cf">break</span>
  }
    k &lt;-<span class="string"> </span>k <span class="string">+</span><span class="string"> </span><span class="number">1</span>
  }
  obj &lt;-<span class="string"> </span><span class="keyword">fun</span>(x);
  <span class="keyword">list</span>(<span class="dt">root =</span> x,  <span class="dt">val =</span> obj<span class="string">$</span>f, <span class="dt">iteration =</span> k, <span class="dt">success =</span> success)
}</pre></td></tr></tbody></table></figure>
<figure class="highlight R"><table><tbody><tr><td class="code"><pre class="sourceCode r">funs &lt;-<span class="string"> </span><span class="cf">function</span>(x){
  f &lt;-<span class="string"> </span><span class="keyword">c</span>(x[<span class="number">1</span>]<span class="string">^</span><span class="number">2</span> <span class="string">+</span><span class="string"> </span>x[<span class="number">2</span>]<span class="string">^</span><span class="number">2</span> <span class="string">-</span><span class="string"> </span><span class="number">5</span>, (x[<span class="number">1</span>] <span class="string">+</span><span class="string"> </span><span class="number">1</span>) <span class="string">*</span><span class="string"> </span>x[<span class="number">2</span>] <span class="string">-</span><span class="string"> </span>(<span class="number">3</span> <span class="string">*</span><span class="string"> </span>x[<span class="number">1</span>] <span class="string">+</span><span class="string"> </span><span class="number">1</span>))
  J &lt;-<span class="string"> </span><span class="keyword">matrix</span>(
    <span class="keyword">c</span>(<span class="number">2</span> <span class="string">*</span><span class="string"> </span>x[<span class="number">1</span>], <span class="number">2</span> <span class="string">*</span><span class="string"> </span>x[<span class="number">2</span>], x[<span class="number">2</span>] <span class="string">-</span><span class="string"> </span><span class="number">3</span>, x[<span class="number">1</span>] <span class="string">+</span><span class="string"> </span><span class="number">1</span>),
    <span class="dt">nrow =</span> <span class="number">2</span>, <span class="dt">byrow =</span> T)
  <span class="keyword">list</span>(<span class="dt">f =</span> f, <span class="dt">J =</span> J)
}</pre></td></tr></tbody></table></figure>
<figure class="highlight R"><table><tbody><tr><td class="code"><pre class="sourceCode r"><span class="keyword">Newtons</span>(funs, <span class="keyword">c</span>(<span class="number">0</span>,<span class="number">1</span>))</pre></td></tr></tbody></table></figure>
<figure class="highlight OUTPUT"><table><tbody><tr><td class="code"><pre>## $root
## [1] 1 2
## 
## $val
## [1] 1.598721e-14 6.217249e-15
## 
## $iteration
## [1] 6
## 
## $success
## [1] 1</pre></td></tr></tbody></table></figure>
</div>
<div class="section level2" id="differences">
<h2>Differences</h2>
<p>diff(x, lag = 1, differences(一阶差分) = 1, …) lag(x, k = 1, …)</p>
<figure class="highlight R"><table><tbody><tr><td class="code"><pre class="sourceCode r"><span class="keyword">diff</span>(<span class="number">1</span><span class="string">:</span><span class="number">10</span>)
<span class="comment">#  1 1 1 1 1 1 1 1 1</span>
<span class="keyword">diff</span>(<span class="number">1</span><span class="string">:</span><span class="number">10</span>, <span class="dt">lag=</span><span class="number">2</span>,<span class="dt">differences=</span><span class="number">1</span>)
<span class="comment"># 2 2 2 2 2 2 2 2</span>
<span class="keyword">diff</span>(<span class="number">1</span><span class="string">:</span><span class="number">10</span>, <span class="number">2</span>, <span class="number">2</span>)
<span class="comment"># 0 0 0 0 0 0</span>
<span class="keyword">lag</span>(<span class="number">1</span><span class="string">:</span><span class="number">10</span>,<span class="number">5</span>)
<span class="comment">#  [1]  1  2  3  4  5  6  7  8  9 10</span>
<span class="comment"># attr(,"tsp")</span>
<span class="comment"># [1] -4  5  1</span>
lagdf &lt;-<span class="string"> </span><span class="cf">function</span>(x, k) {
    <span class="keyword">c</span>(<span class="keyword">rep</span>(<span class="ot">NA</span>, k), x)[<span class="number">1</span> <span class="string">:</span><span class="string"> </span><span class="keyword">length</span>(x)] 
}</pre></td></tr></tbody></table></figure>
</div>
<div class="section level2" id="integral">
<h2>Integral</h2>
<p>Newton-Leibniz Formula:</p>
<p><span class="math display">\[
\int_{a}^{b} f(x)dx = F(b) - F(a)
\]</span></p>
<p>梯形公式(n=1):</p>
<p><span class="math display">\[
T= (b - a)[\frac {1}{2} f(a) + \frac {1}{2} f(b)]
\]</span></p>
<p>辛普森公式(n=2, Simpson’s rule):</p>
<p><span class="math display">\[
S=(b-a)[\frac {1}{6} f(a) + \frac {4}{6} f(\frac{a+b}{2}) + \frac {1}{6} f(b) ]
\]</span> <span class="math inline">\(Divide [a,b] to\, n fractions, step h = \frac{b-a}{n}, then\, x_i = a + ih,i = 1,2,\cdots,x_n:\)</span></p>
<p>复化梯形公式: <span class="math display">\[
\int_{a}^{b} f(x)dx \approx \sum_{i=1}^{n}\int_{x_i}^{x_{i+1}}dx=T_n= 
\frac{h}{2}[f(a) + 2\sum_{i=1}^{n-1}f(a+ih) + f(b)]
\]</span> 复化辛普森公式: <span class="math display">\[
S_n = \frac{h}{6}\sum_{i=0}^{n-1}[f(x_i) + 4f(x_{i + \frac{1}{2}}) + f(x_{i+1}))]
\]</span></p>
<figure class="highlight R"><table><tbody><tr><td class="code"><pre class="sourceCode r">area &lt;-<span class="string"> </span><span class="cf">function</span>(f, a, b, <span class="dt">eps =</span> <span class="fl">1.0e-06</span>, <span class="dt">lim =</span> <span class="number">10</span>) {
  fun1 &lt;-<span class="string"> </span><span class="cf">function</span>(f, a, b, fa, fb, a0, eps, lim, fun) {
  d &lt;-<span class="string"> </span>(a <span class="string">+</span><span class="string"> </span>b) <span class="string">/</span><span class="string"> </span><span class="number">2</span>
  h &lt;-<span class="string"> </span>(b <span class="string">-</span><span class="string"> </span>a) <span class="string">/</span><span class="string"> </span><span class="number">4</span>
  fd &lt;-<span class="string"> </span><span class="keyword">f</span>(d)
  a1 &lt;-<span class="string"> </span>h <span class="string">*</span><span class="string"> </span>(fa <span class="string">+</span><span class="string"> </span>fd)
  a2 &lt;-<span class="string"> </span>h <span class="string">*</span><span class="string"> </span>(fb <span class="string">+</span><span class="string"> </span>fd)
  <span class="cf">if</span> (<span class="keyword">abs</span>(a0 <span class="string">-</span><span class="string"> </span>a1 <span class="string">-</span><span class="string"> </span>a2) <span class="string">&lt;</span><span class="string"> </span>eps <span class="string">||</span><span class="string"> </span>lim <span class="string">==</span><span class="string"> </span><span class="number">0</span>)
    <span class="keyword">return</span>(a1 <span class="string">+</span><span class="string"> </span>a2)
  <span class="cf">else</span> {
    <span class="keyword">return</span>(
      <span class="keyword">fun</span>(f, a, d, fa, fd, a1, eps, lim <span class="string">-</span><span class="string"> </span><span class="number">1</span>, fun) <span class="string">+</span><span class="string"> </span>
<span class="string">      </span><span class="keyword">fun</span>(f, d, b, fd, fb, a2, eps, lim <span class="string">-</span><span class="string"> </span><span class="number">1</span>, fun)
      )
  }
  }
  fa &lt;-<span class="string"> </span><span class="keyword">f</span>(a)
  fb &lt;-<span class="string"> </span><span class="keyword">f</span>(b)
  a0 &lt;-<span class="string"> </span>((fa <span class="string">+</span><span class="string"> </span>fb) <span class="string">*</span><span class="string"> </span>(b <span class="string">-</span><span class="string"> </span>a)) <span class="string">/</span><span class="string"> </span><span class="number">2</span>
  <span class="keyword">fun1</span>(f, a, b, fa, fb, a0, eps, lim, fun1)
  }

f &lt;-<span class="string"> </span><span class="cf">function</span>(x) <span class="number">1</span> <span class="string">/</span><span class="string"> </span>x<span class="string">^</span><span class="number">2</span>
  
quad &lt;-<span class="string"> </span><span class="keyword">area</span>(f, <span class="number">1</span>, <span class="number">5</span>)
quad</pre></td></tr></tbody></table></figure>
</div>
</div>
</section>
</div>
</div>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>
</html>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">Joaxin</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://u.pinsflora.com/Ruita/html/R_02_math/">https://u.pinsflora.com/Ruita/html/R_02_math/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Math/">Math</a></div><div class="post_share"><div class="addtoany"><div class="a2a_kit a2a_kit_size_32 a2a_default_style"><a class="a2a_button_facebook"></a><a class="a2a_button_twitter"></a><a class="a2a_button_wechat"></a><a class="a2a_button_sina_weibo"></a><a class="a2a_button_facebook_messenger"></a><a class="a2a_button_email"></a><a class="a2a_button_copy_link"></a><a class="a2a_dd" target="_blank" rel="noopener" href="https://www.addtoany.com/share"></a></div></div><script async="async" src="https://static.addtoany.com/menu/page.js"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/Ruita/html/R_03_matrix/"><img class="prev-cover" src="https://cdn.jsdelivr.net/gh/joaxin/img_bed/img/cover_posts/r/r_matrix.png" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">R Matrix</div></div></a></div><div class="next-post pull-right"><a href="/Ruita/html/R_01_intro/"><img class="next-cover" src="https://cdn.jsdelivr.net/gh/joaxin/img_bed/img/cover_posts/r/r_main.png" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">R Introduction</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span> Related Articles</span></div><div class="relatedPosts-list"><div><a href="/Ruita/html/R_03_matrix/" title="R Matrix"><img class="cover" src="https://cdn.jsdelivr.net/gh/joaxin/img_bed/img/cover_posts/r/r_matrix.png"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2018-04-21</div><div class="title">R Matrix</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> Comment</span></div></div><div class="comment-wrap"><div></div></div></div></article></main><footer id="footer" style="background-image: url(https://cdn.jsdelivr.net/gh/joaxin/img_bed/img/cover_posts/r/R_math01.jpg)" data-type="photo"><div id="footer-wrap"><div class="copyright">&copy;2020 By Joaxin</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Refine, the Life</div></div></footer></div><section id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="Switch Between Traditional Chinese And Simplified Chinese">繁</button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog"></i></button><a id="to_comment" href="#post-comment" title="Scroll To Comments"><i class="fas fa-comments"></i></a><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="chat_btn" type="button" title="rightside.chat_btn"><i class="fas fa-sms"></i></button><button id="go-up" type="button" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></section><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">Local search</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div></div><hr/><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>Powered by</span> <a target="_blank" rel="noopener" href="https://github.com/wzpan/hexo-generator-search" style="color:#49B1F5;">hexo-generator-search</a></div></div></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div><div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>if (document.getElementsByClassName('mermaid').length) {
  if (window.mermaidJsLoad) mermaid.init()
  else {
    $.getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js', function () {
      window.mermaidJsLoad = true
      mermaid.initialize({
        theme: 'default',
      })
      false && mermaid.init()
    })
  }
}</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script defer="defer" id="ribbon" src="/js/third-party/canvas-ribbon.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="fasle"></script><script src="/js/third-party/activate-power-mode.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
document.body.addEventListener('input', POWERMODE);
</script><script>(function(i,s,o,g,r,a,m){i["DaoVoiceObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;a.charset="utf-8";m.parentNode.insertBefore(a,m)})(window,document,"script",('https:' == document.location.protocol ? 'https:' : 'http:') + "//widget.daovoice.io/widget/fae45343.js","daovoice")
</script><script>var isChatBtn = true
daovoice('init', {
  app_id: 'fae45343',},{
  launcher: { 
     disableLauncherIcon: isChatBtn // 悬浮 ICON 是否显示
  },
});
daovoice('update');

if (isChatBtn) {
  var chatBtnFn = () => {
    var chatBtn = document.getElementById("chat_btn")
    chatBtn.addEventListener("click", function(){
      daovoice('show')
    });
  }
  chatBtnFn()
} else {
  if (true) {
    function chatBtnHide () {
      daovoice('update', {},{
        launcher: { 
        disableLauncherIcon: true // 悬浮 ICON 是否显示
        },
      });
    }
    function chatBtnShow () {
      daovoice('update', {},{
        launcher: { 
        disableLauncherIcon: false // 悬浮 ICON 是否显示
        },
      });
    }
  }
}</script></div></body></html>