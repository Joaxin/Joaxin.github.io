<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>HTML Canvas | Pinsflora</title><meta name="description" content="As we talked about in our HTML Multimedia and embedding module, the Web was originally just text, which was very boring, so images were introduced — first via the img element and later via CSS propert"><meta name="author" content="Joaxin"><meta name="copyright" content="Joaxin"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="canonical" href="https://u.pinsflora.com/web/html/web_html_canvas/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta property="og:type" content="article"><meta property="og:title" content="HTML Canvas"><meta property="og:url" content="https://u.pinsflora.com/web/html/web_html_canvas/"><meta property="og:site_name" content="Pinsflora"><meta property="og:description" content="As we talked about in our HTML Multimedia and embedding module, the Web was originally just text, which was very boring, so images were introduced — first via the img element and later via CSS propert"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/joaxin/img_bed/img/cover/cover_stars_man_orchard_photos.jpg"><meta property="article:published_time" content="2017-08-20T16:00:00.000Z"><meta property="article:modified_time" content="2018-05-20T16:00:00.000Z"><meta name="twitter:card" content="summary"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css"><script async="async" src="https://www.googletagmanager.com/gtag/js?id=UA-177831205-1"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-177831205-1');
</script><script>var GLOBAL_CONFIG = { 
  root: '/',
  hexoversion: '5.1.1',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: {"limitDay":500,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  bookmark: {
    message_prev: 'Press',
    message_next: 'to bookmark this page'
  },
  runtime: 'days',
  date_suffix: {"one_hour":"Just","hours":"hours ago","day":"days ago"},
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: {"bookmark":{"message_prev":"Press","message_next":"to bookmark this page"},"chs_to_cht":"Traditional Chinese Activated Manually","cht_to_chs":"Simplified Chinese Activated Manually","day_to_night":"Dark Mode Activated Manually","night_to_day":"Light Mode Activated Manually","bgLight":"#49b1f5","bgDark":"#2d3035","position":"bottom-left"},
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  baiduPush: false,
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
};

var saveToLocal = {
  set: function setWithExpiry(key, value, ttl) {
    const now = new Date()
    const expiryDay = ttl * 86400000
    const item = {
      value: value,
      expiry: now.getTime() + expiryDay,
    }
    localStorage.setItem(key, JSON.stringify(item))
    },

  get: function getWithExpiry(key) {
    const itemStr = localStorage.getItem(key)

    if (!itemStr) {
      return undefined
    }
    const item = JSON.parse(itemStr)
    const now = new Date()

    if (now.getTime() > item.expiry) {
      localStorage.removeItem(key)
      return undefined
    }
    return item.value
  }
}</script><script id="config_change">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isSidebar: true,
  postUpdate: '2018-05-21 00:00:00'
}</script><noscript><style type="text/css">
#nav {
  opacity: 1
}
.justified-gallery img {
  opacity: 1
}
</style></noscript><script>var activateDarkMode = function () {
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
  }
}
var activateLightMode = function () {
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
  }
}

var autoChangeMode = 'false'
var t = saveToLocal.get('theme')
if (autoChangeMode === '1') {
  var isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
  var isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
  var isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined) {
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport) {
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour <= 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
    }
    window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
      if (saveToLocal.get('theme') === undefined) {
        e.matches ? activateDarkMode() : activateLightMode()
      }
    })
  } else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else if (autoChangeMode === '2') {
  now = new Date()
  hour = now.getHours()
  isNight = hour <= 6 || hour >= 18
  if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else {
  if (t === 'dark') activateDarkMode()
  else if (t === 'light') activateLightMode()
}</script><meta name="generator" content="Hexo 5.1.1"><link rel="alternate" href="/atom.xml" title="Pinsflora" type="application/atom+xml">
</head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="https://avatars2.githubusercontent.com/u/8346164?s=460&amp;v=4" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">Articles</div><div class="length_num">274</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">Tags</div><div class="length_num">99</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">Categories</div><div class="length_num">34</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-list"></i><span> List</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/gallery/"><i class="fa-fw fa fa-file-image-o"></i><span> Galleries</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-film"></i><span> Movie</span></a></li><li><a class="site-page" href="/games/"><i class="fa-fw fas fa-gamepad"></i><span> Games</span></a></li><li><a class="site-page" href="/tools/"><i class="fa-fw fas fa-wrench"></i><span> Tools</span></a></li></ul></div></div></div></div><div id="body-wrap"><div id="web_bg" data-type="photo"></div><div id="sidebar"><i class="fas fa-arrow-right on" id="toggle-sidebar"></i><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#getting-started-with-a-canvas"><span class="toc-number">1.</span> <span class="toc-text"> Getting started with a canvas</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#creating-and-sizing-our-canvas"><span class="toc-number">1.1.</span> <span class="toc-text"> Creating and sizing our canvas</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#getting-the-canvas-context-and-final-setup"><span class="toc-number">1.2.</span> <span class="toc-text"> Getting the canvas context and final setup</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#simple-shapes"><span class="toc-number">1.3.</span> <span class="toc-text"> Simple Shapes</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#strokes-and-line-widths"><span class="toc-number">1.4.</span> <span class="toc-text"> Strokes and line widths</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#drawing-paths"><span class="toc-number">1.5.</span> <span class="toc-text"> Drawing paths</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#drawing-lines"><span class="toc-number">1.5.1.</span> <span class="toc-text"> Drawing lines</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#drawing-circles"><span class="toc-number">1.5.2.</span> <span class="toc-text"> Drawing circles</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#text"><span class="toc-number">1.6.</span> <span class="toc-text"> Text</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#drawing-images"><span class="toc-number">1.7.</span> <span class="toc-text"> Drawing images</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#loops-and-animations"><span class="toc-number">2.</span> <span class="toc-text"> Loops and animations</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#creating-a-loop"><span class="toc-number">2.1.</span> <span class="toc-text"> Creating a loop</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#animations"><span class="toc-number">2.2.</span> <span class="toc-text"> Animations</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#a-simple-drawing-application"><span class="toc-number">3.</span> <span class="toc-text"> A simple drawing application</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#references"><span class="toc-number">4.</span> <span class="toc-text"> REFERENCES</span></a></li></ol></div></div></div><header class="post-bg" id="page-header" style="background-image: url(https://cdn.jsdelivr.net/gh/joaxin/img_bed/img/cover/cover_stars_man_orchard_photos.jpg)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Pinsflora</a></span><span id="menus"><div id="search_button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-list"></i><span> List</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/gallery/"><i class="fa-fw fa fa-file-image-o"></i><span> Galleries</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-film"></i><span> Movie</span></a></li><li><a class="site-page" href="/games/"><i class="fa-fw fas fa-gamepad"></i><span> Games</span></a></li><li><a class="site-page" href="/tools/"><i class="fa-fw fas fa-wrench"></i><span> Tools</span></a></li></ul></div></div><span class="close" id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><div id="post-title"><div class="posttitle">HTML Canvas</div></div><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2017-08-20T16:00:00.000Z" title="Created 2017-08-21 00:00:00">2017-08-21</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2018-05-20T16:00:00.000Z" title="Updated 2018-05-21 00:00:00">2018-05-21</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Web/">Web</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Web/HTML/">HTML</a></span></div><div class="meta-secondline"> <span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">Word count:</span><span class="word-count">4.1k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">Reading time:</span><span>25min</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post View:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"></span></div></div></div></header><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><p>As we talked about in our HTML Multimedia and embedding module, the Web was originally just text, which was very boring, so images were introduced — first via the img element and later via CSS properties such as background-image, and SVG.</p>
<p>Canvas provides many useful tools for creating 2D animations, games, data visualizations, and other types of app, especially when combined with some of the other APIs the web platform provides.</p>
<h2 id="getting-started-with-a-canvas"><a class="markdownIt-Anchor" href="#getting-started-with-a-canvas"></a> Getting started with a canvas</h2>
<p>If you want to create a 2D <em>or</em> 3D scene on a web page, you need to start with an HTML canvas element. This element is used to define the area on the page into which the image will be drawn. This is as simple as including the element on the page:</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">width</span>=<span class="string">"320"</span> <span class="attr">height</span>=<span class="string">"240"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<p>This will create a canvas on the page with a size of 320 by 240 pixels.</p>
<p>Inside the canvas tags, you can put some fallback content, which is shown if the user’s browser doesn’t support canvas.</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">width</span>=<span class="string">"320"</span> <span class="attr">height</span>=<span class="string">"240"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Your browser doesn't support canvas. Boo hoo!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<h3 id="creating-and-sizing-our-canvas"><a class="markdownIt-Anchor" href="#creating-and-sizing-our-canvas"></a> Creating and sizing our canvas</h3>
<p>Let’s start by creating our own canvas that we draw future experiments on to.</p>
<p><a href="/web/canvas/web_canvas_demo.html">Play CanvasDemo</a></p>
<p>If you save and load your example in a browser now, you’ll see nothing, which is fine, but you’ll also see scrollbars — this is a problem for us, which happens because the body element has a <code>margin:8px</code> that, added to our full-window-size canvas, results in a document that’s wider than the window. To get rid of the scrollbars, we need to remove the <code>margin</code>and also set <code>overflow</code> to <code>hidden</code>. Add the following into the head of your document:</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">  body {</span><br><span class="line">    margin: 0;</span><br><span class="line">    overflow: hidden;</span><br><span class="line">  }</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<p>The scrollbars should now be gone.</p>
<h3 id="getting-the-canvas-context-and-final-setup"><a class="markdownIt-Anchor" href="#getting-the-canvas-context-and-final-setup"></a> Getting the canvas context and final setup</h3>
<p>We need to do one final thing before we can consider our canvas template finished. To draw onto the canvas we need to get a special reference to the drawing area called a context. This is done using the <code>HTMLCanvasElement.getContext()</code> method, which for basic usage takes a single string as a parameter representing the type of context you want to retrieve.</p>
<p>In this case we want a 2d canvas, so add the following JavaScript line below the others inside the <code>&lt;script&gt;</code> element:</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ctx = canvas.getContext(<span class="string">'2d'</span>);</span><br></pre></td></tr></tbody></table></figure>
<blockquote>
<p><strong>Note</strong>: other context values you could choose include <code>webgl</code> for WebGL, <code>webgl2</code> for WebGL 2, etc., but we won’t need those in this article.</p>
</blockquote>
<p>So that’s it — our canvas is now primed and ready for drawing on! The <code>ctx</code> variable now contains a <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D"><code>CanvasRenderingContext2D</code></a>(ctx) object, and all drawing operations on the canvas will involve manipulating this object.</p>
<p>Let’s do one last thing before we move on. We’ll color the canvas background black to give you a first taste of the canvas API. Add the following lines at the bottom of your JavaScript:</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ctx.fillStyle = <span class="string">'rgb(0, 0, 0)'</span>;</span><br><span class="line">ctx.fillRect(<span class="number">0</span>, <span class="number">0</span>, width, height);</span><br></pre></td></tr></tbody></table></figure>
<p>Here we are fill the entire page with color black, now it’s time to move on.</p>
<h3 id="simple-shapes"><a class="markdownIt-Anchor" href="#simple-shapes"></a> Simple Shapes</h3>
<p>Let’s start with some simple rectangles.</p>
<ol>
<li>
<p>First of all, use this code playground <a href="/web/canvas/web_canvas_demo.html" target="_blank">Here</a>.</p>
</li>
<li>
<p>Next, add the following lines to the bottom of your JavaScript:</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ctx.fillStyle = <span class="string">'rgba(255, 0, 255, 0.75)'</span>;</span><br><span class="line">ctx.fillRect(<span class="number">125</span>, <span class="number">100</span>, <span class="number">175</span>, <span class="number">50</span>);</span><br></pre></td></tr></tbody></table></figure>
<p>Then, you will see a magenta rectangle has appeared on your canvas. Its top left corner is 100 pixels away from the top and 125 pixels away from the left of the canvas edge (as defined by the first two parameters), and it is 175 pixels wide and 50 pixels tall (as defined by the third and fourth parameters).</p>
</li>
<li>
<p>Next, add the following lines to the bottom of your JavaScript:</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ctx.rotate( (<span class="built_in">Math</span>.PI / <span class="number">180</span>) * <span class="number">5</span>);  <span class="comment">// rotate 5 degrees.</span></span><br><span class="line">ctx.fillStyle = <span class="string">"#00FFFF"</span>;</span><br><span class="line">ctx.fillRect(<span class="number">125</span>, <span class="number">100</span>, <span class="number">175</span>, <span class="number">50</span>);</span><br><span class="line">ctx.rotate( (<span class="built_in">Math</span>.PI / <span class="number">180</span>) * <span class="number">5</span>);  <span class="comment">// rotate 5 degrees.</span></span><br><span class="line">ctx.fillStyle = <span class="string">"#FFFF00"</span>;</span><br><span class="line">ctx.fillRect(<span class="number">125</span>, <span class="number">100</span>, <span class="number">175</span>, <span class="number">50</span>);</span><br></pre></td></tr></tbody></table></figure>
<p>Then, you’ll see your new two rectangles. This raises an important point: graphics operations like drawing rectangles, lines, and so forth are performed in the order in which they occur. Think of it like painting a wall, where each coat of paint overlaps and may even hide what’s underneath. You can’t do anything to change this, so you have to think carefully about the order in which you draw the graphics.</p>
</li>
<li>
<p>Now try drawing some more rectangles of your own; have fun!</p>
</li>
</ol>
<p>Finished example <a href="/web/canvas/web_canvas_rect.html" target="_blank">Here</a>.</p>
<h3 id="strokes-and-line-widths"><a class="markdownIt-Anchor" href="#strokes-and-line-widths"></a> Strokes and line widths</h3>
<p>So far we’ve looked at drawing filled rectangles, but you can also draw rectangles that are just outlines (called <strong>strokes</strong> in graphic design).</p>
<ol>
<li>
<p>Add the following to the previous example, again below the previous JavaScript lines:</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ctx.strokeStyle = <span class="string">'rgb(255, 255, 255)'</span>;</span><br><span class="line">ctx.strokeRect(<span class="number">25</span>, <span class="number">25</span>, <span class="number">175</span>, <span class="number">200</span>);</span><br></pre></td></tr></tbody></table></figure>
</li>
<li>
<p>The default width of strokes is 1 pixel; you can adjust the <code>lineWidth</code>property value to change this:</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ctx.lineWidth = <span class="number">5</span>;</span><br></pre></td></tr></tbody></table></figure>
</li>
</ol>
<p>Now you should see that your white outline has become much thicker!</p>
<h3 id="drawing-paths"><a class="markdownIt-Anchor" href="#drawing-paths"></a> Drawing paths</h3>
<p>If you want to draw anything more complex than a rectangle, you need to draw a path. Basically, this involves writing code to specify exactly what path the pen should move along on your canvas to trace the shape you want to draw. Canvas includes functions for drawing straight lines, circles, Bézier curves, and more.</p>
<p>We’ll be using some common methods and properties across all of the below sections:</p>
<ul>
<li><code>beginPath()</code> — start drawing a path at the point where the pen currently is on the canvas. On a new canvas, the pen starts out at (0, 0).</li>
<li><code>moveTo()</code> — move the pen to a different point on the canvas, without recording or tracing the line; the pen simply “jumps” to the new position.</li>
<li><code>fill()</code> — draw a filled shape by filling in the path you’ve traced so far.</li>
<li><code>stroke()</code> — draw an outline shape by drawing a stroke along the path you’ve drawn so far.</li>
<li>You can also use features like <code>lineWidth</code> and <code>fillStyle</code>/<code>strokeStyle</code> with paths as well as rectangles.</li>
</ul>
<p>A typical simple path drawing option would look something like so:</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ctx.fillStyle = <span class="string">'rgb(255, 0, 0)'</span>;</span><br><span class="line">ctx.beginPath();</span><br><span class="line">ctx.moveTo(<span class="number">50</span>, <span class="number">50</span>);</span><br><span class="line"><span class="comment">// draw your path</span></span><br><span class="line">ctx.fill();</span><br></pre></td></tr></tbody></table></figure>
<h4 id="drawing-lines"><a class="markdownIt-Anchor" href="#drawing-lines"></a> Drawing lines</h4>
<p>Let’s draw an equilateral triangle on the canvas.</p>
<ol>
<li>
<p>First of all, add the following helper function to the bottom of your code. This converts degree values to radians, which is useful because whenever you need to provide an angle value in JavaScript, it will nearly always be in radians, but humans usually think in degrees.</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">degToRad</span>(<span class="params">degrees</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> degrees * <span class="built_in">Math</span>.PI / <span class="number">180</span>;</span><br><span class="line">};</span><br></pre></td></tr></tbody></table></figure>
</li>
<li>
<p>Now add the following lines at the bottom of your script:</p>
<p>lineTo(x,y): Defines the ending point of the line.</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">ctx.fillStyle = <span class="string">'rgb(255, 0, 0)'</span>;</span><br><span class="line">ctx.beginPath();</span><br><span class="line">ctx.moveTo(<span class="number">50</span>, <span class="number">50</span>);</span><br><span class="line"></span><br><span class="line">ctx.lineTo(<span class="number">150</span>, <span class="number">50</span>);</span><br><span class="line"><span class="comment">// The height of the equalateral triangle, using a bit of simple trigonometry</span></span><br><span class="line"><span class="comment">// 50 * Math.sqrt(3)</span></span><br><span class="line"><span class="keyword">var</span> triHeight = <span class="number">50</span> * <span class="built_in">Math</span>.tan(degToRad(<span class="number">60</span>));</span><br><span class="line">ctx.lineTo(<span class="number">100</span>, <span class="number">50</span>+triHeight);</span><br><span class="line">ctx.lineTo(<span class="number">50</span>, <span class="number">50</span>);</span><br><span class="line"><span class="comment">//  fill in the red triangle shape</span></span><br><span class="line">ctx.fill();</span><br></pre></td></tr></tbody></table></figure>
<p>In terms of the triangle  sides:</p>
<ul>
<li>The longest side is called the <strong>hypotenuse</strong></li>
<li>The side next to the 60 degree angle is called the <strong>adjacent</strong> — which we know is 50 pixels, as it is half of the line we just drew.</li>
<li>The side opposite the 60 degree angle is called the <strong>opposite</strong>, which is the height of the triangle we want to calculate.</li>
</ul>
<p><img src="https://mdn.mozillademos.org/files/14829/trigonometry.png" alt="img"></p>
</li>
</ol>
<h4 id="drawing-circles"><a class="markdownIt-Anchor" href="#drawing-circles"></a> Drawing circles</h4>
<p>Now let’s look at how to draw a circle in canvas. This is accomplished using the <code>arc()</code>method, which draws all or part of a circle at a specified point.</p>
<p>Let’s add an arc to our canvas — add the following to the bottom of your code:</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">ctx.fillStyle = <span class="string">'magenta'</span>;</span><br><span class="line">ctx.beginPath();</span><br><span class="line">ctx.moveTo(<span class="number">50</span>,<span class="number">50</span>);</span><br><span class="line">ctx.lineTo(<span class="number">200</span>,<span class="number">200</span>);</span><br><span class="line">ctx.arc(<span class="number">150</span>, <span class="number">100</span>, <span class="number">50</span>, degToRad(<span class="number">0</span>), degToRad(<span class="number">270</span>), <span class="literal">true</span>);</span><br><span class="line">ctx.fill();</span><br><span class="line"></span><br><span class="line">ctx.fillStyle = <span class="string">'gold'</span>;</span><br><span class="line">ctx.beginPath();</span><br><span class="line">ctx.moveTo(<span class="number">200</span>,<span class="number">200</span>);</span><br><span class="line">ctx.lineTo(<span class="number">350</span>,<span class="number">350</span>);</span><br><span class="line">ctx.arc(<span class="number">300</span>, <span class="number">250</span>, <span class="number">50</span>, degToRad(<span class="number">0</span>), degToRad(<span class="number">270</span>), <span class="literal">false</span>);</span><br><span class="line">ctx.fill();</span><br></pre></td></tr></tbody></table></figure>
<p><code>arc()</code> takes six parameters. The first two specify the position of the arc’s center (X and Y, respectively). The third is the circle’s radius, the fourth and fifth are the start and end angles at which to draw the circle (so specifying 0 and 360 degrees gives us a full circle), and the sixth parameter defines whether the circle should be drawn counterclockwise (anticlockwise) or clockwise (<code>false</code> is clockwise).</p>
<p><strong>Note</strong>: 0 degrees is horizontally to the right.</p>
<p>This example would found  <a href="/web/canvas/web_canvas_demo_circles.html" target="_blank">Here</a>.</p>
<h3 id="text"><a class="markdownIt-Anchor" href="#text"></a> Text</h3>
<p>Canvas also has features for drawing text.</p>
<p>Text is drawn using two methods:</p>
<ul>
<li><code>fillText()</code> — draws filled text.</li>
<li><code>strokeText()</code> — draws outline (stroke) text.</li>
</ul>
<p>Both of these take three properties in their basic usage: the text string to draw and the X and Y coordinates of the top left corner of the <strong>text box</strong> (literally, the box surrounding the text you draw).</p>
<p>There are also a number of properties to help control text rendering such as <code>font</code>, which lets you specify font family, size, etc.</p>
<p>Here we draw two lines of text, one outline and the other stroke. The final example should look like so:</p>
<p>This example would found  <a href="/web/canvas/web_canvas_demo_text.html" target="_blank">Here</a>.</p>
<p><strong>Gradients</strong><br>
createLinearGradient(x,y,x1,y1): Creates a linear gradient.<br>
createRadialGradient(x,y,r,x1,y1,r1): Creates a radial/circular gradient</p>
<p>This example would found  <a href="/web/canvas/web_canvas_demo_grad.html" target="_blank">Here</a>.</p>
<h3 id="drawing-images"><a class="markdownIt-Anchor" href="#drawing-images"></a> Drawing images</h3>
<p>It is possible to render external images onto your canvas. These can be simple images, frames from videos, or the content of other canvases. For the moment we’ll just look at the case of using some simple images on our canvas.</p>
<ol>
<li>
<p>Images are drawn onto canvas using the <code>drawImage()</code> method. The simplest version takes three parameters — a reference to the image you want to render, and the X and Y coordinates of the image’s top left corner.</p>
</li>
<li>
<p>Let’s start by getting an image source to embed in our canvas. Add the following lines to the bottom of your JavaScript:</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> image = <span class="keyword">new</span> Image();</span><br><span class="line">image.src = <span class="string">'cat.png'</span>;</span><br></pre></td></tr></tbody></table></figure>
<p>Here we create a new <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLImageElement"><code>HTMLImageElement</code></a> object using the <code>Image()</code> constructor.</p>
</li>
<li>
<p>We could now try to embed the image using <code>drawImage()</code>, but we need to make sure the image file has been loaded first, otherwise the code will fail. We can achieve this using the <code>onload</code> event handler, which will only be invoked when the image has finished loading. Add the following block below the previous one:</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">image.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{</span><br><span class="line">  ctx.drawImage(image, <span class="number">50</span>, <span class="number">50</span>);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
</li>
<li>
<p>But there’s more! What if we want to display only a part of the image, or to resize it? We can do both with the more complex version of <code>drawImage()</code>. Update your <code>ctx.drawImage()</code> line like so:</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ctx.drawImage(image, <span class="number">20</span>, <span class="number">20</span>, <span class="number">185</span>, <span class="number">175</span>, <span class="number">50</span>, <span class="number">50</span>, <span class="number">185</span>, <span class="number">175</span>);</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>The first parameter is the image reference, as before.</li>
<li>Parameters 2 and 3 define the coordinates of the top left corner of the area you want to cut out of the loaded image, relative to the top-left corner of the image itself. Nothing to the left of the first parameter or above the second will be drawn.</li>
<li>Parameters 4 and 5 define the width and height of the area we want to cut out from the original image we loaded.</li>
<li>Parameters 6 and 7 define the coordinates at which you want to draw the top-left corner of the cut-out portion of the image, relative to the top-left corner of the canvas.</li>
<li>Parameters 8 and 9 define the width and height to draw the cut-out area of the image. In this case, we have specified the same dimensions as the original slice, but you could resize it by specifying different values.</li>
</ul>
</li>
</ol>
<p>The final example should look this <a href="/web/canvas/web_canvas_demo_image.html" target="_blank">Here</a>.</p>
<h2 id="loops-and-animations"><a class="markdownIt-Anchor" href="#loops-and-animations"></a> Loops and animations</h2>
<p>We have so far covered some very basic uses of 2D canvas, but really you won’t experience the full power of canvas unless you update or animate it in some way. After all, canvas does provide scriptable images! If you aren’t going to change anything, then you might as well just use static images and save yourself all the work.</p>
<h3 id="creating-a-loop"><a class="markdownIt-Anchor" href="#creating-a-loop"></a> Creating a loop</h3>
<p>Playing with loops in canvas is rather fun — you can run canvas commands inside a <code>for</code> (or other type of) loop just like any other JavaScript code.</p>
<ol start="2">
<li><code>translate()</code> method, causes the coordinate origin (0, 0) to be moved to the center of the canvas, rather than being at the top left corner. This is very useful in many situations, like this one, where we want our design to be drawn relative to the center of the canvas.</li>
</ol>
   <figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ctx.translate(width/<span class="number">2</span>, height/<span class="number">2</span>);</span><br></pre></td></tr></tbody></table></figure>
<ol start="3">
<li>
<p>Now add the following code to the bottom of the JavaScript:</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">degToRad</span>(<span class="params">degrees</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> degrees * <span class="built_in">Math</span>.PI / <span class="number">180</span>;</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">rand</span>(<span class="params">min, max</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * (max-min+<span class="number">1</span>)) + (min);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> length = <span class="number">250</span>;</span><br><span class="line"><span class="keyword">var</span> moveOffset = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; length; i++) {</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>Here we are implementing the same <code>degToRad()</code> function we saw in the triangle example above, a <code>rand()</code> function that returns a random number between given lower and upper bounds, <code>length</code> and <code>moveOffset</code> variables (which we’ll find out more about later), and an empty <code>for</code> loop.</p>
</li>
<li>
<p>The idea here is that we’ll draw something on the canvas inside the <code>for</code> loop, and iterate on it each time so we can create something interesting. Add the following code inside your <code>for</code> loop:</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">ctx.fillStyle = <span class="string">'rgba('</span> + (<span class="number">255</span>-length) + <span class="string">', 0, '</span> + (<span class="number">255</span>-length) + <span class="string">', 0.9)'</span>;</span><br><span class="line">ctx.beginPath();</span><br><span class="line">ctx.moveTo(moveOffset, moveOffset);</span><br><span class="line">ctx.lineTo(moveOffset+length, moveOffset);</span><br><span class="line"><span class="keyword">var</span> triHeight = length/<span class="number">2</span> * <span class="built_in">Math</span>.tan(degToRad(<span class="number">60</span>));</span><br><span class="line">ctx.lineTo(moveOffset+(length/<span class="number">2</span>), moveOffset+triHeight);</span><br><span class="line">ctx.lineTo(moveOffset, moveOffset);</span><br><span class="line">ctx.fill();</span><br><span class="line"></span><br><span class="line">length--;</span><br><span class="line">moveOffset += <span class="number">0.7</span>;</span><br><span class="line">ctx.rotate(degToRad(<span class="number">5</span>));</span><br></pre></td></tr></tbody></table></figure>
<p>So on each iteration, we:</p>
<ul>
<li>Set the <code>fillStyle</code> to be a shade of slightly transparent purple, which changes each time based on the value of <code>length</code>. As you’ll see later the length gets smaller each time the loop runs, so the effect here is that the color gets brighter with each successive triangle drawn.</li>
<li>Begin the path.</li>
<li>Move the pen to a coordinate of <code>(moveOffset, moveOffset)</code>; This variable defines how far we want to move each time we draw a new triangle.</li>
<li>Draw a line to a coordinate of <code>(moveOffset+length, moveOffset)</code>. This draws a line of length <code>length</code> parallel to the X axis.</li>
<li>Calculate the triangle’s height, as before.</li>
<li>Draw a line to the downward-pointing corner of the triangle, then draw a line back to the start of the triangle.</li>
<li>Call <code>fill()</code> to fill in the triangle.</li>
<li>Update the variables that describe the sequence of triangles, so we can be ready to draw the next one. We decrease the <code>length</code> value by 1, so the triangles get smaller each time; increase <code>moveOffset</code> by a small amount so each successive triangle is slightly further away, and use another new function, <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/rotate"><code>rotate()</code></a>, which allows us to rotate the entire canvas! We rotate it by 5 degrees before drawing the next triangle.</li>
</ul>
</li>
</ol>
<p>That’s it! The final example should look like so <a href="/web/canvas/web_canvas_demo_loops.html" target="_blank">here!.</a></p>
<h3 id="animations"><a class="markdownIt-Anchor" href="#animations"></a> Animations</h3>
<p>If you think of your canvas as being like a movie, you really want the display to update on each frame to show the updated view, with an ideal refresh rate of 60 frames per second so that movement appears nice and smooth to the human eye.</p>
<p>There are a few JavaScript functions that will allow you to run functions repeatedly, several times a second, the best one for our purposes here being <code>window.requestAnimationFrame()</code>. It takes one parameter — the name of the function you want to run for each frame. The next time the browser is ready to update the screen, your function will get called. If that function draws the new update to your animation, then calls <code>requestAnimationFrame()</code> again just before the end of the function, the animation loop will continue to run. The loop ends when you stop calling <code>requestAnimationFrame()</code> or if you call <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/Window/cancelAnimationFrame"><code>window.cancelAnimationFrame()</code></a> after calling <code>requestAnimationFrame()</code> but before the frame is called.</p>
<p><strong>Note:</strong> It’s good practice to call <code>cancelAnimationFrame()</code> from your main code when you’re done using the animation, to ensure that no updates are still waiting to be run.</p>
<p>The browser works out complex details such as making the animation run at a consistent speed, and not wasting resources animating things that can’t be seen.</p>
<p>Now let’s create our own simple animation — we’ll get a character from a certain rather awesome retro computer game to walk across the screen.</p>
<ol start="4">
<li>
<p>We’ll add some variables to keep track of the position the sprite is to be drawn on the screen, and the sprite number we want to display.</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> sprite = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">var</span> posX = <span class="number">0</span>;</span><br></pre></td></tr></tbody></table></figure>
<p>Let’s explain the spritesheet image (which we have respectfully borrowed from Mike Thomas’ <a target="_blank" rel="noopener" href="http://atomicrobotdesign.com/blog/htmlcss/create-a-sprite-sheet-walk-cycle-using-using-css-animation/">Create a sprite sheet walk cycle using using CSS animation</a>). The image looks like this:</p>
<p><img src="https://mdn.mozillademos.org/files/14847/walk-right.png" alt="img"></p>
<p>It contains six sprites that make up the whole walking sequence — each one is 102 pixels wide and 148 pixels high. To display each sprite cleanly we will have to use <code>drawImage()</code> to chop out a single sprite image from the spritesheet and display only that part, like we did above with the Firefox logo. The X coordinate of the slice will have to be a multiple of 102, and the Y coordinate will always be 0. The slice size will always be 102 by 148 pixels.</p>
</li>
<li>
<p>Now let’s insert an empty <code>draw()</code> function at the bottom of the code, ready for filling up with some code:</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">draw</span>(<span class="params"></span>) </span>{</span><br><span class="line"></span><br><span class="line">};</span><br></pre></td></tr></tbody></table></figure>
</li>
<li>
<p>the rest of the code in this section goes inside <code>draw()</code>. First, add the following line, which clears the canvas to prepare for drawing each frame. Notice that we have to specify the top-left corner of the rectangle as <code>-(width/2), -(height/2)</code> because we specified the origin position as <code>width/2, height/2</code> earlier on.</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ctx.fillRect(-(width/<span class="number">2</span>), -(height/<span class="number">2</span>), width, height);</span><br></pre></td></tr></tbody></table></figure>
</li>
<li>
<p>Next, we’ll draw our image using drawImage — the 9-parameter version. Add the following:</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ctx.drawImage(image, (sprite*<span class="number">102</span>), <span class="number">0</span>, <span class="number">102</span>, <span class="number">148</span>, <span class="number">0</span>+posX, <span class="number">-74</span>, <span class="number">102</span>, <span class="number">148</span>);</span><br></pre></td></tr></tbody></table></figure>
<p>As you can see:</p>
<ul>
<li>We specify <code>image</code> as the image to embed.</li>
<li>Parameters 2 and 3 specify the top-left corner of the slice to cut out of the source image, with the X value as <code>sprite</code> multiplied by 102 (where <code>sprite</code> is the sprite number between 0 and 5) and the Y value always 0.</li>
<li>Parameters 4 and 5 specify the size of the slice to cut out — 102 pixels by 148 pixels.</li>
<li>Parameters 6 and 7 specify the top-left corner of the box into which to draw the slice on the canvas — the X position is 0 + <code>posX</code>, meaning that we can alter the drawing position by altering the <code>posX</code> value.</li>
<li>Parameters 8 and 9 specify the size of the image on the canvas. We just want to keep its original size, so we specify 102 and 148 as the width and height.</li>
</ul>
</li>
<li>
<p>Now we’ll alter the <code>sprite</code> value after each draw — well, after some of them anyway. Add the following block to the bottom of the <code>draw()</code> function:</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (posX % <span class="number">13</span> === <span class="number">0</span>) {</span><br><span class="line">    <span class="keyword">if</span> (sprite === <span class="number">5</span>) {</span><br><span class="line">      sprite = <span class="number">0</span>;</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      sprite++;</span><br><span class="line">    }</span><br><span class="line">  }</span><br></pre></td></tr></tbody></table></figure>
<p>We are wrapping the whole block in <code>if (posX % 13 === 0) { ... }</code>. We use the modulo (<code>%</code>) operator to check whether the <code>posX</code>value can be exactly divided by 13 with no remainder. If so, we move on  to the next sprite by incrementing <code>sprite</code> (wrapping to 0 after we’re done with sprite #5). This effectively means that we are only updating the sprite on every 13th frame, or roughly about 5 frames a second (<code>requestAnimationFrame()</code> calls us at up to 60 frames per second if possible). We are deliberately slowing down the frame rate because we only have six sprites to work with, and if we display one every 60th of a second, our character will move way too fast!</p>
<p>Inside the outer block we use an <code>if ... else</code> statement to check whether the <code>sprite</code>value is at 5 (the last sprite, given that the sprite numbers run from 0 to 5). If we are showing the last sprite already, we reset <code>sprite</code> back to 0; if not we just increment it by 1.</p>
</li>
<li>
<p>Next we need to work out how to change the <code>posX</code> value on each frame — add the following code block just below your last one.</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(posX &gt; width/<span class="number">2</span>) {</span><br><span class="line">    newStartPos = -((width/<span class="number">2</span>) + <span class="number">102</span>);</span><br><span class="line">    posX = <span class="built_in">Math</span>.ceil(newStartPos / <span class="number">13</span>) * <span class="number">13</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(posX);</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    posX += <span class="number">2</span>;</span><br><span class="line">  }</span><br></pre></td></tr></tbody></table></figure>
<p>We are using another <code>if ... else</code> statement to see if the value of <code>posX</code> has become greater than <code>width/2</code>, which means our character has walked off the right edge of the screen. If so, we calculate a position that would put the character just to the left of the left side of the screen, and then set <code>posX</code> to equal the multiple of 13 closest to that number. This has to be a multiple of 13 because otherwise the previous code block won’t work, since <code>posX</code> would never equal a multiple of 13!</p>
<p>If our character hasn’t yet walked off the edge of the screen, we simply increment <code>posX</code>by 2. This will make him move a little bit to the right the next time we draw him.</p>
</li>
<li>
<p>Finally, we need to make the animation loop by calling <code>requestAnimationFrame()</code> at the bottom of the <code>draw()</code> function:</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.requestAnimationFrame(draw);</span><br></pre></td></tr></tbody></table></figure>
</li>
</ol>
<p>That’s it! The final example should look like <a href="/web/canvas/web_canvas_demo_animations.html" target="_blank">here!.</a></p>
<h2 id="a-simple-drawing-application"><a class="markdownIt-Anchor" href="#a-simple-drawing-application"></a> A simple drawing application</h2>
<p>The final drawing application should look like <a href="/web/canvas/web_canvas_demo_drawing.html" target="_blank">here!.</a></p>
<p>Let’s look at the most interesting parts. First of all, we keep track of the mouse’s X and Y coordinates and whether it is being clicked or not with three variables: <code>curX</code>, <code>curY</code>, and <code>pressed</code>. When the mouse moves, we fire a function set as the <code>onmousemove</code> event handler, which captures the current X and Y values. We also use <code>onmousedown</code> and <code>onmouseup</code> event handlers to change the value of <code>pressed</code> to <code>true</code> when the mouse button is pressed, and back to <code>false</code> again when it is released.</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> curX;</span><br><span class="line"><span class="keyword">var</span> curY;</span><br><span class="line"><span class="keyword">var</span> pressed = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.onmousemove = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>{</span><br><span class="line">  curX = (<span class="built_in">window</span>.Event) ? e.pageX : e.clientX + (<span class="built_in">document</span>.documentElement.scrollLeft ? <span class="built_in">document</span>.documentElement.scrollLeft : <span class="built_in">document</span>.body.scrollLeft);</span><br><span class="line">  curY = (<span class="built_in">window</span>.Event) ? e.pageY : e.clientY + (<span class="built_in">document</span>.documentElement.scrollTop ? <span class="built_in">document</span>.documentElement.scrollTop : <span class="built_in">document</span>.body.scrollTop);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">canvas.onmousedown = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{</span><br><span class="line">  pressed = <span class="literal">true</span>;</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line">canvas.onmouseup = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{</span><br><span class="line">  pressed = <span class="literal">false</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>When the “Clear canvas” button is pressed, we run a simple function that clears the whole canvas back to black, the same way we’ve seen before:</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">clearBtn.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{</span><br><span class="line">  ctx.fillStyle = <span class="string">'rgb(0, 0, 0)'</span>;</span><br><span class="line">  ctx.fillRect(<span class="number">0</span>, <span class="number">0</span>, width, height);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>The drawing loop is pretty simple this time around — if pressed is <code>true</code>, we draw a circle with a fill style equal to the value in the color picker, and a radius equal to the value set in the range input.</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">draw</span>(<span class="params"></span>) </span>{</span><br><span class="line">  <span class="keyword">if</span>(pressed) {</span><br><span class="line">    ctx.fillStyle = colorPicker.value;</span><br><span class="line">    ctx.beginPath();</span><br><span class="line">    ctx.arc(curX, curY<span class="number">-85</span>, sizePicker.value, degToRad(<span class="number">0</span>), degToRad(<span class="number">360</span>), <span class="literal">false</span>);</span><br><span class="line">    ctx.fill();</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  requestAnimationFrame(draw);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">draw();</span><br></pre></td></tr></tbody></table></figure>
<p><strong>Note</strong>: The input range<code>and</code>color<code>types are supported fairly well across browsers, with the exception of Internet Explorer versions less than 10; also Safari doesn't yet support</code>color`. If your browser doesn’t support these inputs, they will fall back to simple text fields and you’ll just have to enter valid color/number values yourself.</p>
<h2 id="references"><a class="markdownIt-Anchor" href="#references"></a> REFERENCES</h2>
<ul>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Objects/Object_building_practice">https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Objects/Object_building_practice</a></li>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial/Drawing_shapes">https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial/Drawing_shapes</a></li>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial/Drawing_text">https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial/Drawing_text</a></li>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial">Canvas tutorial</a> — A very detailed tutorial series explaining what you should know about 2D canvas in much more detail than was covered here. Essential reading.</li>
<li><a target="_blank" rel="noopener" href="https://github.com/mdn/violent-theremin">Violent theramin</a> — Uses the Web Audio API to generate sound, and canvas to generate a pretty visualization to go along with it.</li>
<li><a target="_blank" rel="noopener" href="https://github.com/mdn/voice-change-o-matic">Voice change-o-matic</a> — Uses a canvas to visualize real-time audio data from the Web Audio API.</li>
</ul>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script></div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">Joaxin</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://u.pinsflora.com/web/html/web_html_canvas/">https://u.pinsflora.com/web/html/web_html_canvas/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="addtoany"><div class="a2a_kit a2a_kit_size_32 a2a_default_style"><a class="a2a_button_facebook"></a><a class="a2a_button_twitter"></a><a class="a2a_button_wechat"></a><a class="a2a_button_sina_weibo"></a><a class="a2a_button_facebook_messenger"></a><a class="a2a_button_email"></a><a class="a2a_button_copy_link"></a><a class="a2a_dd" target="_blank" rel="noopener" href="https://www.addtoany.com/share"></a></div></div><script async="async" src="https://static.addtoany.com/menu/page.js"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/lang/kr/duo_kr001_intro/"><img class="prev-cover" src="https://cdn.jsdelivr.net/gh/joaxin/img_bed/img/cover/cover_little_girl_phone.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">Duolingo - Korean - Vol.1 - Introduction</div></div></a></div><div class="next-post pull-right"><a href="/web/js/WEB_js_intro_/"><img class="next-cover" src="https://cdn.jsdelivr.net/gh/joaxin/img_bed/img/cover/cover_forests.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">Javascript Variables</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> Comment</span></div></div><div class="comment-wrap"><div></div></div></div></article></main><footer id="footer" style="background-image: url(https://cdn.jsdelivr.net/gh/joaxin/img_bed/img/cover/cover_stars_man_orchard_photos.jpg)" data-type="photo"><div id="footer-wrap"><div class="copyright">&copy;2020 By Joaxin</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Refine, the Life</div></div></footer></div><section id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="Switch Between Traditional Chinese And Simplified Chinese">繁</button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog"></i></button><a id="to_comment" href="#post-comment" title="Scroll To Comments"><i class="fas fa-comments"></i></a><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="chat_btn" type="button" title="rightside.chat_btn"><i class="fas fa-sms"></i></button><button id="go-up" type="button" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></section><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">Local search</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div></div><hr/><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>Powered by</span> <a target="_blank" rel="noopener" href="https://github.com/wzpan/hexo-generator-search" style="color:#49B1F5;">hexo-generator-search</a></div></div></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div><div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>if (document.getElementsByClassName('mermaid').length) {
  if (window.mermaidJsLoad) mermaid.init()
  else {
    $.getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js', function () {
      window.mermaidJsLoad = true
      mermaid.initialize({
        theme: 'default',
      })
      false && mermaid.init()
    })
  }
}</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script defer="defer" id="ribbon" src="/js/third-party/canvas-ribbon.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="fasle"></script><script src="/js/third-party/activate-power-mode.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
document.body.addEventListener('input', POWERMODE);
</script><script>(function(i,s,o,g,r,a,m){i["DaoVoiceObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;a.charset="utf-8";m.parentNode.insertBefore(a,m)})(window,document,"script",('https:' == document.location.protocol ? 'https:' : 'http:') + "//widget.daovoice.io/widget/fae45343.js","daovoice")
</script><script>var isChatBtn = true
daovoice('init', {
  app_id: 'fae45343',},{
  launcher: { 
     disableLauncherIcon: isChatBtn // 悬浮 ICON 是否显示
  },
});
daovoice('update');

if (isChatBtn) {
  var chatBtnFn = () => {
    var chatBtn = document.getElementById("chat_btn")
    chatBtn.addEventListener("click", function(){
      daovoice('show')
    });
  }
  chatBtnFn()
} else {
  if (true) {
    function chatBtnHide () {
      daovoice('update', {},{
        launcher: { 
        disableLauncherIcon: true // 悬浮 ICON 是否显示
        },
      });
    }
    function chatBtnShow () {
      daovoice('update', {},{
        launcher: { 
        disableLauncherIcon: false // 悬浮 ICON 是否显示
        },
      });
    }
  }
}</script></div></body></html>